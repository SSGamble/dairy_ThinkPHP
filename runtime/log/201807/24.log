---------------------------------------------------------------
[ 2018-07-24T07:43:41+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/
[ info ] qingrang.top/daily/ [运行时间：0.124365s][吞吐率：8.04req/s] [内存消耗：3,286.45kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => '',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ RUN ] app\admin\controller\Note->notelst[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/notelst.html [ array (
  0 => 'autoSave',
  1 => 'phoneSave',
  2 => 'hide',
  3 => 'list',
  4 => 'groups',
  5 => 'groups0',
  6 => 'groups1',
  7 => 'groups2',
  8 => 'count',
  9 => 'year',
  10 => 'default_num',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000680s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001658s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Essay' ORDER BY id desc [ RunTime:0.005622s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `config` [ RunTime:0.001102s ]
[ sql ] [ SQL ] SELECT * FROM `config` WHERE  `name` = 'hide' LIMIT 1 [ RunTime:0.000396s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 1 LIMIT 1 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 2 LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000891s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 0  AND `id` <> 2 ORDER BY `groups` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `parent_id` = 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 2 ORDER BY `groups` [ RunTime:0.000346s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Default' LIMIT 1 [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `yearlist` [ RunTime:0.001146s ]
[ sql ] [ SQL ] SELECT DISTINCT  `year` FROM `yearlist` ORDER BY year desc [ RunTime:0.000680s ]
---------------------------------------------------------------
[ 2018-07-24T08:16:56+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/
[ info ] qingrang.top/daily/ [运行时间：0.110200s][吞吐率：9.07req/s] [内存消耗：3,286.45kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => '',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ RUN ] app\admin\controller\Note->notelst[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/notelst.html [ array (
  0 => 'autoSave',
  1 => 'phoneSave',
  2 => 'hide',
  3 => 'list',
  4 => 'groups',
  5 => 'groups0',
  6 => 'groups1',
  7 => 'groups2',
  8 => 'count',
  9 => 'year',
  10 => 'default_num',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000617s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001244s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Essay' ORDER BY id desc [ RunTime:0.002917s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `config` [ RunTime:0.001007s ]
[ sql ] [ SQL ] SELECT * FROM `config` WHERE  `name` = 'hide' LIMIT 1 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 1 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 2 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000940s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 0  AND `id` <> 2 ORDER BY `groups` [ RunTime:0.000409s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `parent_id` = 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 2 ORDER BY `groups` [ RunTime:0.000380s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Default' LIMIT 1 [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` LIMIT 1 [ RunTime:0.000236s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `yearlist` [ RunTime:0.001045s ]
[ sql ] [ SQL ] SELECT DISTINCT  `year` FROM `yearlist` ORDER BY year desc [ RunTime:0.000606s ]
---------------------------------------------------------------
[ 2018-07-24T08:17:03+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/noteview.html
[ info ] qingrang.top/daily/admin/note/noteview.html [运行时间：0.049601s][吞吐率：20.16req/s] [内存消耗：2,089.09kb] [文件加载：50]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'noteview',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '10',
  'accept' => 'application/json, text/javascript, */*; q=0.01',
  'origin' => 'http://qingrang.top',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'content-type' => 'application/x-www-form-urlencoded',
  'referer' => 'http://qingrang.top/daily/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'noteid' => '193',
)
[ info ] [ RUN ] app\admin\controller\Note->noteview[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000540s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001470s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 193 LIMIT 1 [ RunTime:0.000455s ]
---------------------------------------------------------------
[ 2018-07-24T08:17:04+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/193.html
[ info ] qingrang.top/daily/admin/note/shownote/id/193.html [运行时间：0.051574s][吞吐率：19.39req/s] [内存消耗：1,982.89kb] [文件加载：54]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '193',
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000418s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001166s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 193 LIMIT 1 [ RunTime:0.000397s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000901s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000308s ]
---------------------------------------------------------------
[ 2018-07-24T08:28:58+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/asearch.html
[ info ] qingrang.top/daily/admin/note/asearch.html [运行时间：0.055333s][吞吐率：18.07req/s] [内存消耗：2,130.95kb] [文件加载：50]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'asearch',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '9',
  'accept' => 'application/json, text/javascript, */*; q=0.01',
  'origin' => 'http://qingrang.top',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'content-type' => 'application/x-www-form-urlencoded',
  'referer' => 'http://qingrang.top/daily/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'key' => 'mysql',
)
[ info ] [ RUN ] app\admin\controller\Note->aSearch[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000629s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001339s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  ( `title` LIKE '%mysql%' OR `content` LIKE '%mysql%' ) ORDER BY id desc [ RunTime:0.005954s ]
---------------------------------------------------------------
[ 2018-07-24T08:29:01+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/noteview.html
[ info ] qingrang.top/daily/admin/note/noteview.html [运行时间：0.046361s][吞吐率：21.57req/s] [内存消耗：2,086.30kb] [文件加载：50]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'noteview',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '9',
  'accept' => 'application/json, text/javascript, */*; q=0.01',
  'origin' => 'http://qingrang.top',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'content-type' => 'application/x-www-form-urlencoded',
  'referer' => 'http://qingrang.top/daily/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'noteid' => '39',
)
[ info ] [ RUN ] app\admin\controller\Note->noteview[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000511s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001183s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 39 LIMIT 1 [ RunTime:0.000382s ]
---------------------------------------------------------------
[ 2018-07-24T08:34:46+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/193.html
[ info ] qingrang.top/daily/admin/note/editnote/id/193.html [运行时间：0.066467s][吞吐率：15.05req/s] [内存消耗：2,030.70kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '193',
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000592s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001986s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 193 LIMIT 1 [ RunTime:0.000507s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000936s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000355s ]
---------------------------------------------------------------
[ 2018-07-24T08:44:27+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/updatenote/id/193.html
[ info ] qingrang.top/daily/admin/note/updatenote/id/193.html [运行时间：0.057962s][吞吐率：17.25req/s] [内存消耗：2,034.16kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'updatenote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '9155',
  'cache-control' => 'max-age=0',
  'origin' => 'http://qingrang.top',
  'upgrade-insecure-requests' => '1',
  'content-type' => 'application/x-www-form-urlencoded',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/193.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'content' => '# Linux 后台运行程序
`nohup` `screen` `tmux`

[TOC]
## nohup
### 简介
我们通常使用 & 将前台任务变为后台任务执行，但是如果只是使用 &，那么在突然断网或者关闭启动该任务的终端时，内核就会给后台任务发送 SIGHUP 信号，从而导致后台任务停止。这时，我们就需要使用 nohup 来启动该后台任务。

nohup，就是使得运行的命令可以忽略 HANGUP 信号。因此，即使突然断网或者关闭终端，该后台任务依然可以继续执行。

这里需要指明的是，nohup 并不会自动将任务运行在后台，我们需要在命令行末尾加上 & 来显示的指明。

如果 nohup 命令的标准输入是终端，那么 nohup 将会默认使用 /dev/null 来重定向。

如果 nohup 命令的标准输出是终端，那么标准输出会被附加到文件 nohup.out 中；如果用户没有在当前目录创建文件的权限，那么就会把输出附加到 $HOME/nohup.out 中；如果还是没有写入权限，那么该命令就不会执行。

如果 nohup 命令的标准错误是终端，那么就会被定向到标准输出的附加的文件描述符。如果标准输出被关闭了，那么标准错误就会像上面一样尝试附加到 nohup.out 或 $HOME/nohup.out 中。
### 运行

0、1 和 2 分别表示标准输入、标准输出和标准错误信息输出，可以用来指定需要重定向的标准输入或输出。

- 默认参数运行 `nohup 命令 &`

eg: `nohup python3 test.py &`

在上面执行的命令中，由输出 nohup: ignoring input and appending output to \'nohup.out\' 可知，标准输出被重定向到 nohup.out 中，该文件包含了命令的标准输出和标准错误输出。

- 重定向标准输出 `nohup 命令 文件 1>输出文件名.out &`

eg: `nohup python3 test.py 1>log.out &`

- 重定向标准输出标准错误输出 `nohup 命令 文件 1>标准输出文件名.out 2>错误输出文件名.out &`

eg：`nohup python3 test.py 1>norm.out 2>error.out &`

### 关闭
- 查看所有后台运行的进程 `ps -aux`

a：显示所有程序 
u：以用户为主的格式来显示 
x：显示所有程序，不以终端机来区分

- 杀死这个进程 `kill -9 PID`

### 常见错误
#### 在运行了一段时间后自己断掉
在使用nohup的时候，虽然是后台运行了，一段时间内也没有断掉。但是总会在运行了6、7个小时之后断掉。

解决办法：

虽然 Shell 中提示了 nohup 成功，但还是需要按键盘上的任意键退回到 Shell 输入命令窗口，然后通过在 Shell 中**输入 exit 来退出终端，而不是每次在 nohup 执行成功后直接关闭终端**。
#### nohup 执行 python 脚本看不到 log
python 的输出有缓冲，导致 log 并不能够马上看到输出。

解决办法：

-u 参数：使得python不启用缓冲。

所以修改命令即可：`nohup python3 -u test.py > log &`

## tmux
- 安装 tmux `yum install tmux`
- 启动 tmux
```
tmux # 新建一个无名称的会话
tmux new -s demo # 新建一个名称为demo的会话
```
- 在 tmux 中启动程序 `python3 /var/www/html/test.py`
- 直接关闭 ssh 终端
- 重新ssh上去之后，执行如下命令：`tmux attach` 现在可以看到python程序还在正常执行。
- 关闭demo会话 `tmux kill-session -t demo`
- 关闭服务器，所有的会话都将关闭 `tmux kill-server`
http://louiszhai.github.io/2017/09/30/tmux/#%E6%96%AD%E5%BC%80%E5%BD%93%E5%89%8D%E4%BC%9A%E8%AF%9D',
  'groups' => 'Linux',
  'id' => '193',
)
[ info ] [ RUN ] app\admin\controller\Note->updateNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000504s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001594s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 193 LIMIT 1 [ RunTime:0.000410s ]
[ sql ] [ SQL ] SELECT `groups` FROM `note` WHERE  `id` = 193 LIMIT 1 [ RunTime:0.000326s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000933s ]
[ sql ] [ SQL ] SELECT `parent_id` FROM `groups` WHERE  `groups` = 'Linux' LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `id` = 2 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] UPDATE `note`  SET `id`=193,`p_id`=2,`title`='Linux 后台运行程序\r',`content`='# Linux 后台运行程序\r\n`nohup` `screen` `tmux`\r\n\r\n[TOC]\r\n## nohup\r\n### 简介\r\n我们通常使用 & 将前台任务变为后台任务执行，但是如果只是使用 &，那么在突然断网或者关闭启动该任务的终端时，内核就会给后台任务发送 SIGHUP 信号，从而导致后台任务停止。这时，我们就需要使用 nohup 来启动该后台任务。\r\n\r\nnohup，就是使得运行的命令可以忽略 HANGUP 信号。因此，即使突然断网或者关闭终端，该后台任务依然可以继续执行。\r\n\r\n这里需要指明的是，nohup 并不会自动将任务运行在后台，我们需要在命令行末尾加上 & 来显示的指明。\r\n\r\n如果 nohup 命令的标准输入是终端，那么 nohup 将会默认使用 /dev/null 来重定向。\r\n\r\n如果 nohup 命令的标准输出是终端，那么标准输出会被附加到文件 nohup.out 中；如果用户没有在当前目录创建文件的权限，那么就会把输出附加到 $HOME/nohup.out 中；如果还是没有写入权限，那么该命令就不会执行。\r\n\r\n如果 nohup 命令的标准错误是终端，那么就会被定向到标准输出的附加的文件描述符。如果标准输出被关闭了，那么标准错误就会像上面一样尝试附加到 nohup.out 或 $HOME/nohup.out 中。\r\n### 运行\r\n\r\n0、1 和 2 分别表示标准输入、标准输出和标准错误信息输出，可以用来指定需要重定向的标准输入或输出。\r\n\r\n- 默认参数运行 `nohup 命令 &`\r\n\r\neg: `nohup python3 test.py &`\r\n\r\n在上面执行的命令中，由输出 nohup: ignoring input and appending output to \'nohup.out\' 可知，标准输出被重定向到 nohup.out 中，该文件包含了命令的标准输出和标准错误输出。\r\n\r\n- 重定向标准输出 `nohup 命令 文件 1>输出文件名.out &`\r\n\r\neg: `nohup python3 test.py 1>log.out &`\r\n\r\n- 重定向标准输出标准错误输出 `nohup 命令 文件 1>标准输出文件名.out 2>错误输出文件名.out &`\r\n\r\neg：`nohup python3 test.py 1>norm.out 2>error.out &`\r\n\r\n### 关闭\r\n- 查看所有后台运行的进程 `ps -aux`\r\n\r\na：显示所有程序 \r\nu：以用户为主的格式来显示 \r\nx：显示所有程序，不以终端机来区分\r\n\r\n- 杀死这个进程 `kill -9 PID`\r\n\r\n### 常见错误\r\n#### 在运行了一段时间后自己断掉\r\n在使用nohup的时候，虽然是后台运行了，一段时间内也没有断掉。但是总会在运行了6、7个小时之后断掉。\r\n\r\n解决办法：\r\n\r\n虽然 Shell 中提示了 nohup 成功，但还是需要按键盘上的任意键退回到 Shell 输入命令窗口，然后通过在 Shell 中**输入 exit 来退出终端，而不是每次在 nohup 执行成功后直接关闭终端**。\r\n#### nohup 执行 python 脚本看不到 log\r\npython 的输出有缓冲，导致 log 并不能够马上看到输出。\r\n\r\n解决办法：\r\n\r\n-u 参数：使得python不启用缓冲。\r\n\r\n所以修改命令即可：`nohup python3 -u test.py > log &`\r\n\r\n## tmux\r\n- 安装 tmux `yum install tmux`\r\n- 启动 tmux\r\n```\r\ntmux # 新建一个无名称的会话\r\ntmux new -s demo # 新建一个名称为demo的会话\r\n```\r\n- 在 tmux 中启动程序 `python3 /var/www/html/test.py`\r\n- 直接关闭 ssh 终端\r\n- 重新ssh上去之后，执行如下命令：`tmux attach` 现在可以看到python程序还在正常执行。\r\n- 关闭demo会话 `tmux kill-session -t demo`\r\n- 关闭服务器，所有的会话都将关闭 `tmux kill-server`\r\nhttp://louiszhai.github.io/2017/09/30/tmux/#%E6%96%AD%E5%BC%80%E5%BD%93%E5%89%8D%E4%BC%9A%E8%AF%9D',`groups`='Linux'  WHERE  `id` = 193 [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Linux' LIMIT 1 [ RunTime:0.000875s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=9  WHERE  `groups` = 'Linux' [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Linux' LIMIT 1 [ RunTime:0.000517s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=9  WHERE  `groups` = 'Linux' [ RunTime:0.000314s ]
---------------------------------------------------------------
[ 2018-07-24T08:44:28+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/193.html
[ info ] qingrang.top/daily/admin/note/shownote/id/193.html [运行时间：0.049269s][吞吐率：20.30req/s] [内存消耗：1,983.30kb] [文件加载：54]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/193.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '193',
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000491s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001338s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 193 LIMIT 1 [ RunTime:0.000454s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000847s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000278s ]
---------------------------------------------------------------
[ 2018-07-24T08:50:55+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/
[ info ] qingrang.top/daily/ [运行时间：0.107634s][吞吐率：9.29req/s] [内存消耗：3,286.67kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => '',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ RUN ] app\admin\controller\Note->notelst[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/notelst.html [ array (
  0 => 'autoSave',
  1 => 'phoneSave',
  2 => 'hide',
  3 => 'list',
  4 => 'groups',
  5 => 'groups0',
  6 => 'groups1',
  7 => 'groups2',
  8 => 'count',
  9 => 'year',
  10 => 'default_num',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000471s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001223s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Essay' ORDER BY id desc [ RunTime:0.002892s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `config` [ RunTime:0.000921s ]
[ sql ] [ SQL ] SELECT * FROM `config` WHERE  `name` = 'hide' LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 1 LIMIT 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 2 LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000884s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 0  AND `id` <> 2 ORDER BY `groups` [ RunTime:0.000399s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `parent_id` = 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 2 ORDER BY `groups` [ RunTime:0.000338s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Default' LIMIT 1 [ RunTime:0.000610s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` LIMIT 1 [ RunTime:0.000216s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `yearlist` [ RunTime:0.000958s ]
[ sql ] [ SQL ] SELECT DISTINCT  `year` FROM `yearlist` ORDER BY year desc [ RunTime:0.000612s ]
---------------------------------------------------------------
[ 2018-07-24T08:51:02+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/193.html
[ info ] qingrang.top/daily/admin/note/shownote/id/193.html [运行时间：0.047743s][吞吐率：20.95req/s] [内存消耗：1,983.08kb] [文件加载：54]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '193',
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000515s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001151s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 193 LIMIT 1 [ RunTime:0.000408s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000849s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000282s ]
---------------------------------------------------------------
[ 2018-07-24T15:58:25+08:00 ] 74.120.168.12 210.12.30.74 GET /daily/
[ info ] qingrang.top/daily/ [运行时间：0.111580s][吞吐率：8.96req/s] [内存消耗：3,286.93kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => '',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'connection' => 'keep-alive',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
)
[ info ] [ PARAM ] array (
)
[ info ] [ RUN ] app\admin\controller\Note->notelst[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/notelst.html [ array (
  0 => 'autoSave',
  1 => 'phoneSave',
  2 => 'hide',
  3 => 'list',
  4 => 'groups',
  5 => 'groups0',
  6 => 'groups1',
  7 => 'groups2',
  8 => 'count',
  9 => 'year',
  10 => 'default_num',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000471s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001269s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Essay' ORDER BY id desc [ RunTime:0.003592s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `config` [ RunTime:0.000959s ]
[ sql ] [ SQL ] SELECT * FROM `config` WHERE  `name` = 'hide' LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 1 LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 2 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000842s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 0  AND `id` <> 2 ORDER BY `groups` [ RunTime:0.000585s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `parent_id` = 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 2 ORDER BY `groups` [ RunTime:0.000384s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Default' LIMIT 1 [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` LIMIT 1 [ RunTime:0.000234s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `yearlist` [ RunTime:0.001010s ]
[ sql ] [ SQL ] SELECT DISTINCT  `year` FROM `yearlist` ORDER BY year desc [ RunTime:0.000641s ]
---------------------------------------------------------------
[ 2018-07-24T15:58:37+08:00 ] 74.120.168.12 210.12.30.74 POST /daily/admin/note/ashownote2.html
[ info ] qingrang.top/daily/admin/note/ashownote2.html [运行时间：0.048751s][吞吐率：20.51req/s] [内存消耗：2,485.43kb] [文件加载：50]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'ashownote2',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'connection' => 'keep-alive',
  'content-length' => '17',
  'accept' => 'application/json, text/javascript, */*; q=0.01',
  'origin' => 'http://qingrang.top',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'content-type' => 'application/x-www-form-urlencoded',
  'referer' => 'http://qingrang.top/daily/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
)
[ info ] [ PARAM ] array (
  'groupname' => 'Android',
)
[ info ] [ RUN ] app\admin\controller\Note->aShowNote2[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000648s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001269s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` = 'Android' ORDER BY id desc [ RunTime:0.001390s ]
---------------------------------------------------------------
[ 2018-07-24T15:58:38+08:00 ] 74.120.168.12 210.12.30.74 POST /daily/admin/note/ashownote2.html
[ info ] qingrang.top/daily/admin/note/ashownote2.html [运行时间：0.047286s][吞吐率：21.15req/s] [内存消耗：2,164.36kb] [文件加载：50]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'ashownote2',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'connection' => 'keep-alive',
  'content-length' => '16',
  'accept' => 'application/json, text/javascript, */*; q=0.01',
  'origin' => 'http://qingrang.top',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'content-type' => 'application/x-www-form-urlencoded',
  'referer' => 'http://qingrang.top/daily/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
)
[ info ] [ PARAM ] array (
  'groupname' => 'Basics',
)
[ info ] [ RUN ] app\admin\controller\Note->aShowNote2[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000501s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001160s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` = 'Basics' ORDER BY id desc [ RunTime:0.000862s ]
---------------------------------------------------------------
[ 2018-07-24T15:58:40+08:00 ] 74.120.168.12 210.12.30.74 POST /daily/admin/note/ashownote2.html
[ info ] qingrang.top/daily/admin/note/ashownote2.html [运行时间：0.062937s][吞吐率：15.89req/s] [内存消耗：2,099.03kb] [文件加载：50]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'ashownote2',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'connection' => 'keep-alive',
  'content-length' => '14',
  'accept' => 'application/json, text/javascript, */*; q=0.01',
  'origin' => 'http://qingrang.top',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'content-type' => 'application/x-www-form-urlencoded',
  'referer' => 'http://qingrang.top/daily/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
)
[ info ] [ PARAM ] array (
  'groupname' => 'C#',
)
[ info ] [ RUN ] app\admin\controller\Note->aShowNote2[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001268s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` = 'C#' ORDER BY id desc [ RunTime:0.000841s ]
---------------------------------------------------------------
[ 2018-07-24T15:58:45+08:00 ] 74.120.168.12 210.12.30.74 POST /daily/admin/note/ashownote2.html
[ info ] qingrang.top/daily/admin/note/ashownote2.html [运行时间：0.064827s][吞吐率：15.43req/s] [内存消耗：2,123.70kb] [文件加载：50]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'ashownote2',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'connection' => 'keep-alive',
  'content-length' => '23',
  'accept' => 'application/json, text/javascript, */*; q=0.01',
  'origin' => 'http://qingrang.top',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'content-type' => 'application/x-www-form-urlencoded',
  'referer' => 'http://qingrang.top/daily/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
)
[ info ] [ PARAM ] array (
  'groupname' => 'Web Front-end',
)
[ info ] [ RUN ] app\admin\controller\Note->aShowNote2[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000546s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001244s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` = 'Web Front-end' ORDER BY id desc [ RunTime:0.000915s ]
---------------------------------------------------------------
[ 2018-07-24T15:58:49+08:00 ] 74.120.168.12 210.12.30.74 GET /daily/admin/note/shownote/id/31
[ info ] qingrang.top/daily/admin/note/shownote/id/31 [运行时间：0.052026s][吞吐率：19.22req/s] [内存消耗：1,980.66kb] [文件加载：54]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'connection' => 'keep-alive',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
)
[ info ] [ PARAM ] array (
  'id' => '31',
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000466s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001264s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 31 LIMIT 1 [ RunTime:0.000445s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000836s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000271s ]
---------------------------------------------------------------
[ 2018-07-24T15:59:00+08:00 ] 74.120.168.12 210.12.30.74 GET /daily/admin/note/shownote/fonts/fontawesome-webfont.woff?v=4.2.0
[ info ] qingrang.top/daily/admin/note/shownote/fonts/fontawesome-webfont.woff?v=4.2.0 [运行时间：0.046103s][吞吐率：21.69req/s] [内存消耗：1,978.75kb] [文件加载：54]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'connection' => 'keep-alive',
  'origin' => 'http://qingrang.top',
  'user-agent' => 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => '*/*',
  'referer' => 'http://qingrang.top/daily/admin/note/shownote/id/31',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
)
[ info ] [ PARAM ] array (
  'v' => '4.2.0',
  'fonts' => 'fontawesome-webfont.woff',
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000446s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001253s ]
[ sql ] [ SQL ] SELECT * FROM `note` LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000289s ]
---------------------------------------------------------------
[ 2018-07-24T15:59:01+08:00 ] 74.120.168.12 210.12.30.74 GET /daily/admin/note/shownote/fonts/fontawesome-webfont.ttf?v=4.2.0
[ info ] qingrang.top/daily/admin/note/shownote/fonts/fontawesome-webfont.ttf?v=4.2.0 [运行时间：0.051929s][吞吐率：19.26req/s] [内存消耗：1,978.93kb] [文件加载：54]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'connection' => 'keep-alive',
  'origin' => 'http://qingrang.top',
  'user-agent' => 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => '*/*',
  'referer' => 'http://qingrang.top/daily/admin/note/shownote/id/31',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
)
[ info ] [ PARAM ] array (
  'v' => '4.2.0',
  'fonts' => 'fontawesome-webfont.ttf',
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000444s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001150s ]
[ sql ] [ SQL ] SELECT * FROM `note` LIMIT 1 [ RunTime:0.000373s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000867s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000297s ]
---------------------------------------------------------------
[ 2018-07-24T15:59:11+08:00 ] 74.120.168.12 210.12.30.74 POST /daily/admin/note/ashownote2.html
[ info ] qingrang.top/daily/admin/note/ashownote2.html [运行时间：0.062905s][吞吐率：15.90req/s] [内存消耗：2,087.26kb] [文件加载：50]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'ashownote2',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'connection' => 'keep-alive',
  'content-length' => '16',
  'accept' => 'application/json, text/javascript, */*; q=0.01',
  'origin' => 'http://qingrang.top',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'content-type' => 'application/x-www-form-urlencoded',
  'referer' => 'http://qingrang.top/daily/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
)
[ info ] [ PARAM ] array (
  'groupname' => 'Python',
)
[ info ] [ RUN ] app\admin\controller\Note->aShowNote2[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000519s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001331s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` = 'Python' ORDER BY id desc [ RunTime:0.000964s ]
---------------------------------------------------------------
[ 2018-07-24T21:25:56+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/
[ info ] qingrang.top/daily/ [运行时间：0.119240s][吞吐率：8.39req/s] [内存消耗：3,286.67kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => '',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ RUN ] app\admin\controller\Note->notelst[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/notelst.html [ array (
  0 => 'autoSave',
  1 => 'phoneSave',
  2 => 'hide',
  3 => 'list',
  4 => 'groups',
  5 => 'groups0',
  6 => 'groups1',
  7 => 'groups2',
  8 => 'count',
  9 => 'year',
  10 => 'default_num',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000509s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001359s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Essay' ORDER BY id desc [ RunTime:0.004271s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `config` [ RunTime:0.000986s ]
[ sql ] [ SQL ] SELECT * FROM `config` WHERE  `name` = 'hide' LIMIT 1 [ RunTime:0.000332s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 1 LIMIT 1 [ RunTime:0.000366s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 2 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000859s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 0  AND `id` <> 2 ORDER BY `groups` [ RunTime:0.000481s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `parent_id` = 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 2 ORDER BY `groups` [ RunTime:0.000339s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Default' LIMIT 1 [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` LIMIT 1 [ RunTime:0.000216s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `yearlist` [ RunTime:0.001127s ]
[ sql ] [ SQL ] SELECT DISTINCT  `year` FROM `yearlist` ORDER BY year desc [ RunTime:0.000648s ]
---------------------------------------------------------------
[ 2018-07-24T21:26:02+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/193.html
[ info ] qingrang.top/daily/admin/note/shownote/id/193.html [运行时间：0.055877s][吞吐率：17.90req/s] [内存消耗：1,983.08kb] [文件加载：54]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '193',
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000507s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001178s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 193 LIMIT 1 [ RunTime:0.000396s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001346s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000402s ]
---------------------------------------------------------------
[ 2018-07-24T22:13:41+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/193.html
[ info ] qingrang.top/daily/admin/note/shownote/id/193.html [运行时间：0.054792s][吞吐率：18.25req/s] [内存消耗：1,983.07kb] [文件加载：54]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '193',
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000497s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001350s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 193 LIMIT 1 [ RunTime:0.000452s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001023s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000321s ]
---------------------------------------------------------------
[ 2018-07-24T22:16:10+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/asearch.html
[ info ] qingrang.top/daily/admin/note/asearch.html [运行时间：0.052603s][吞吐率：19.01req/s] [内存消耗：2,130.95kb] [文件加载：50]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'asearch',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '9',
  'accept' => 'application/json, text/javascript, */*; q=0.01',
  'origin' => 'http://qingrang.top',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'content-type' => 'application/x-www-form-urlencoded',
  'referer' => 'http://qingrang.top/daily/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'key' => 'mysql',
)
[ info ] [ RUN ] app\admin\controller\Note->aSearch[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000488s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001231s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  ( `title` LIKE '%mysql%' OR `content` LIKE '%mysql%' ) ORDER BY id desc [ RunTime:0.005861s ]
---------------------------------------------------------------
[ 2018-07-24T22:16:13+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/noteview.html
[ info ] qingrang.top/daily/admin/note/noteview.html [运行时间：0.050514s][吞吐率：19.80req/s] [内存消耗：2,086.30kb] [文件加载：50]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'noteview',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '9',
  'accept' => 'application/json, text/javascript, */*; q=0.01',
  'origin' => 'http://qingrang.top',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'content-type' => 'application/x-www-form-urlencoded',
  'referer' => 'http://qingrang.top/daily/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'noteid' => '39',
)
[ info ] [ RUN ] app\admin\controller\Note->noteview[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001177s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 39 LIMIT 1 [ RunTime:0.000414s ]
---------------------------------------------------------------
[ 2018-07-24T22:20:17+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/193.html
[ info ] qingrang.top/daily/admin/note/editnote/id/193.html [运行时间：0.062925s][吞吐率：15.89req/s] [内存消耗：2,030.96kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '193',
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000524s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001488s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 193 LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001455s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000612s ]
---------------------------------------------------------------
[ 2018-07-24T22:21:10+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/updatenote/id/193.html
[ info ] qingrang.top/daily/admin/note/updatenote/id/193.html [运行时间：0.070295s][吞吐率：14.23req/s] [内存消耗：2,034.22kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'updatenote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '9161',
  'cache-control' => 'max-age=0',
  'origin' => 'http://qingrang.top',
  'upgrade-insecure-requests' => '1',
  'content-type' => 'application/x-www-form-urlencoded',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/193.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'content' => '# Linux 后台运行程序
`nohup` `screen` `tmux`

[TOC]
## nohup
### 简介
我们通常使用 & 将前台任务变为后台任务执行，但是如果只是使用 &，那么在突然断网或者关闭启动该任务的终端时，内核就会给后台任务发送 SIGHUP 信号，从而导致后台任务停止。这时，我们就需要使用 nohup 来启动该后台任务。

nohup，就是使得运行的命令可以忽略 HANGUP 信号。因此，即使突然断网或者关闭终端，该后台任务依然可以继续执行。

这里需要指明的是，nohup 并不会自动将任务运行在后台，我们需要在命令行末尾加上 & 来显示的指明。

如果 nohup 命令的标准输入是终端，那么 nohup 将会默认使用 /dev/null 来重定向。

如果 nohup 命令的标准输出是终端，那么标准输出会被附加到文件 nohup.out 中；如果用户没有在当前目录创建文件的权限，那么就会把输出附加到 $HOME/nohup.out 中；如果还是没有写入权限，那么该命令就不会执行。

如果 nohup 命令的标准错误是终端，那么就会被定向到标准输出的附加的文件描述符。如果标准输出被关闭了，那么标准错误就会像上面一样尝试附加到 nohup.out 或 $HOME/nohup.out 中。
### 运行

0、1 和 2 分别表示标准输入、标准输出和标准错误信息输出，可以用来指定需要重定向的标准输入或输出。

- 默认参数运行 `nohup 命令 &`

eg: `nohup python3 test.py &`

在上面执行的命令中，由输出 nohup: ignoring input and appending output to \'nohup.out\' 可知，标准输出被重定向到 nohup.out 中，该文件包含了命令的标准输出和标准错误输出。

- 重定向标准输出 `nohup 命令 文件 1>输出文件名.out &`

eg: `nohup python3 test.py 1>log.out &`

- 重定向标准输出标准错误输出 `nohup 命令 文件 1>标准输出文件名.out 2>错误输出文件名.out &`

eg：`nohup python3 test.py 1>norm.out 2>error.out &`

### 关闭
- 查看所有后台运行的进程 `ps -aux`

a：显示所有程序 
u：以用户为主的格式来显示 
x：显示所有程序，不以终端机来区分

- 杀死这个进程 `kill -9 PID`

### 常见错误
#### 在运行了一段时间后自己断掉
>在使用nohup的时候，虽然是后台运行了，一段时间内也没有断掉。但是总会在运行了6、7个小时之后断掉。

解决办法：

虽然 Shell 中提示了 nohup 成功，但还是需要按键盘上的任意键退回到 Shell 输入命令窗口，然后通过在 Shell 中**输入 exit 来退出终端，而不是每次在 nohup 执行成功后直接关闭终端**。
#### nohup 执行 python 脚本看不到 log
>python 的输出有缓冲，导致 log 并不能够马上看到输出。

解决办法：

-u 参数：使得python不启用缓冲。

所以修改命令即可：`nohup python3 -u test.py > log &`

## tmux
- 安装 tmux `yum install tmux`
- 启动 tmux
```
tmux # 新建一个无名称的会话
tmux new -s demo # 新建一个名称为demo的会话
```
- 在 tmux 中启动程序 `python3 /var/www/html/test.py`
- 直接关闭 ssh 终端
- 重新ssh上去之后，执行如下命令：`tmux attach` 现在可以看到python程序还在正常执行。
- 关闭demo会话 `tmux kill-session -t demo`
- 关闭服务器，所有的会话都将关闭 `tmux kill-server`
http://louiszhai.github.io/2017/09/30/tmux/#%E6%96%AD%E5%BC%80%E5%BD%93%E5%89%8D%E4%BC%9A%E8%AF%9D',
  'groups' => 'Linux',
  'id' => '193',
)
[ info ] [ RUN ] app\admin\controller\Note->updateNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000515s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001594s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 193 LIMIT 1 [ RunTime:0.000804s ]
[ sql ] [ SQL ] SELECT `groups` FROM `note` WHERE  `id` = 193 LIMIT 1 [ RunTime:0.000452s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001257s ]
[ sql ] [ SQL ] SELECT `parent_id` FROM `groups` WHERE  `groups` = 'Linux' LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `id` = 2 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] UPDATE `note`  SET `id`=193,`p_id`=2,`title`='Linux 后台运行程序\r',`content`='# Linux 后台运行程序\r\n`nohup` `screen` `tmux`\r\n\r\n[TOC]\r\n## nohup\r\n### 简介\r\n我们通常使用 & 将前台任务变为后台任务执行，但是如果只是使用 &，那么在突然断网或者关闭启动该任务的终端时，内核就会给后台任务发送 SIGHUP 信号，从而导致后台任务停止。这时，我们就需要使用 nohup 来启动该后台任务。\r\n\r\nnohup，就是使得运行的命令可以忽略 HANGUP 信号。因此，即使突然断网或者关闭终端，该后台任务依然可以继续执行。\r\n\r\n这里需要指明的是，nohup 并不会自动将任务运行在后台，我们需要在命令行末尾加上 & 来显示的指明。\r\n\r\n如果 nohup 命令的标准输入是终端，那么 nohup 将会默认使用 /dev/null 来重定向。\r\n\r\n如果 nohup 命令的标准输出是终端，那么标准输出会被附加到文件 nohup.out 中；如果用户没有在当前目录创建文件的权限，那么就会把输出附加到 $HOME/nohup.out 中；如果还是没有写入权限，那么该命令就不会执行。\r\n\r\n如果 nohup 命令的标准错误是终端，那么就会被定向到标准输出的附加的文件描述符。如果标准输出被关闭了，那么标准错误就会像上面一样尝试附加到 nohup.out 或 $HOME/nohup.out 中。\r\n### 运行\r\n\r\n0、1 和 2 分别表示标准输入、标准输出和标准错误信息输出，可以用来指定需要重定向的标准输入或输出。\r\n\r\n- 默认参数运行 `nohup 命令 &`\r\n\r\neg: `nohup python3 test.py &`\r\n\r\n在上面执行的命令中，由输出 nohup: ignoring input and appending output to \'nohup.out\' 可知，标准输出被重定向到 nohup.out 中，该文件包含了命令的标准输出和标准错误输出。\r\n\r\n- 重定向标准输出 `nohup 命令 文件 1>输出文件名.out &`\r\n\r\neg: `nohup python3 test.py 1>log.out &`\r\n\r\n- 重定向标准输出标准错误输出 `nohup 命令 文件 1>标准输出文件名.out 2>错误输出文件名.out &`\r\n\r\neg：`nohup python3 test.py 1>norm.out 2>error.out &`\r\n\r\n### 关闭\r\n- 查看所有后台运行的进程 `ps -aux`\r\n\r\na：显示所有程序 \r\nu：以用户为主的格式来显示 \r\nx：显示所有程序，不以终端机来区分\r\n\r\n- 杀死这个进程 `kill -9 PID`\r\n\r\n### 常见错误\r\n#### 在运行了一段时间后自己断掉\r\n>在使用nohup的时候，虽然是后台运行了，一段时间内也没有断掉。但是总会在运行了6、7个小时之后断掉。\r\n\r\n解决办法：\r\n\r\n虽然 Shell 中提示了 nohup 成功，但还是需要按键盘上的任意键退回到 Shell 输入命令窗口，然后通过在 Shell 中**输入 exit 来退出终端，而不是每次在 nohup 执行成功后直接关闭终端**。\r\n#### nohup 执行 python 脚本看不到 log\r\n>python 的输出有缓冲，导致 log 并不能够马上看到输出。\r\n\r\n解决办法：\r\n\r\n-u 参数：使得python不启用缓冲。\r\n\r\n所以修改命令即可：`nohup python3 -u test.py > log &`\r\n\r\n## tmux\r\n- 安装 tmux `yum install tmux`\r\n- 启动 tmux\r\n```\r\ntmux # 新建一个无名称的会话\r\ntmux new -s demo # 新建一个名称为demo的会话\r\n```\r\n- 在 tmux 中启动程序 `python3 /var/www/html/test.py`\r\n- 直接关闭 ssh 终端\r\n- 重新ssh上去之后，执行如下命令：`tmux attach` 现在可以看到python程序还在正常执行。\r\n- 关闭demo会话 `tmux kill-session -t demo`\r\n- 关闭服务器，所有的会话都将关闭 `tmux kill-server`\r\nhttp://louiszhai.github.io/2017/09/30/tmux/#%E6%96%AD%E5%BC%80%E5%BD%93%E5%89%8D%E4%BC%9A%E8%AF%9D',`groups`='Linux'  WHERE  `id` = 193 [ RunTime:0.000859s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Linux' LIMIT 1 [ RunTime:0.000686s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=9  WHERE  `groups` = 'Linux' [ RunTime:0.000375s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Linux' LIMIT 1 [ RunTime:0.000664s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=9  WHERE  `groups` = 'Linux' [ RunTime:0.000415s ]
---------------------------------------------------------------
[ 2018-07-24T22:21:11+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/193.html
[ info ] qingrang.top/daily/admin/note/shownote/id/193.html [运行时间：0.048848s][吞吐率：20.47req/s] [内存消耗：1,983.36kb] [文件加载：54]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/193.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'OUTFOX_SEARCH_USER_ID_NCOO=300956949.4398302',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '193',
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001114s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 193 LIMIT 1 [ RunTime:0.000427s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000870s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000271s ]
