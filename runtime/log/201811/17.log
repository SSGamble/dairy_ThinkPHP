---------------------------------------------------------------
[ 2018-11-17T03:39:30+08:00 ] 74.120.168.12 66.249.66.91 GET /daily/admin/login/index.html
[ info ] qingrang.top/daily/admin/login/index.html [运行时间：0.040244s][吞吐率：24.85req/s] [内存消耗：1,340.17kb] [文件加载：47]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'login',
    2 => 'index',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/',
  'cookie' => 'PHPSESSID=r53oksh9aqdlo65kcb61kgn5n0',
  'accept-language' => 'en-US',
  'connection' => 'keep-alive',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
  'from' => 'googlebot(at)googlebot.com',
  'user-agent' => 'Mozilla/5.0 AppleWebKit/537.36 (KHTML, like Gecko; compatible; Googlebot/2.1; +http://www.google.com/bot.html) Safari/537.36',
  'accept-encoding' => 'gzip,deflate,br',
)
[ info ] [ PARAM ] array (
)
[ info ] [ RUN ] app\admin\controller\Login->index[ /var/www/html/daily/application/admin/controller/Login.php ]
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/login/index.html [ array (
) ]
[ info ] [ LOG ] INIT File
---------------------------------------------------------------
[ 2018-11-17T13:28:34+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/login/index.html
[ info ] qingrang.top/daily/admin/login/index.html [运行时间：0.043577s][吞吐率：22.95req/s] [内存消耗：1,339.90kb] [文件加载：47]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'login',
    2 => 'index',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ RUN ] app\admin\controller\Login->index[ /var/www/html/daily/application/admin/controller/Login.php ]
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/login/index.html [ array (
) ]
[ info ] [ LOG ] INIT File
---------------------------------------------------------------
[ 2018-11-17T13:28:41+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/login/index.html
[ info ] qingrang.top/daily/admin/login/index.html [运行时间：0.096080s][吞吐率：10.41req/s] [内存消耗：1,922.41kb] [文件加载：54]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'login',
    2 => 'index',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '8',
  'cache-control' => 'max-age=0',
  'origin' => 'http://qingrang.top',
  'upgrade-insecure-requests' => '1',
  'content-type' => 'application/x-www-form-urlencoded',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/login/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'pwd' => 'shao',
)
[ info ] [ RUN ] app\admin\controller\Login->index[ /var/www/html/daily/application/admin/controller/Login.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.001531s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `admin` [ RunTime:0.003732s ]
[ sql ] [ SQL ] SELECT * FROM `admin` WHERE  `id` = 1 LIMIT 1 [ RunTime:0.000861s ]
---------------------------------------------------------------
[ 2018-11-17T13:28:42+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note
[ info ] qingrang.top/daily/admin/note [运行时间：0.122998s][吞吐率：8.13req/s] [内存消耗：2,304.78kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/login/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->notelst[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/notelst.html [ array (
  0 => 'stickList',
  1 => 'hide',
  2 => 'list',
  3 => 'list_new',
  4 => 'groups',
  5 => 'groups0',
  6 => 'groups1',
  7 => 'groups2',
  8 => 'count',
  9 => 'year',
  10 => 'default_num',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000791s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.002056s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Personal'  AND `is_show` = 1 ORDER BY date desc,id desc [ RunTime:0.004758s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Personal' ORDER BY id desc LIMIT 5 [ RunTime:0.000940s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `config` [ RunTime:0.001426s ]
[ sql ] [ SQL ] SELECT * FROM `config` WHERE  `name` = 'hide' LIMIT 1 [ RunTime:0.000462s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` < 5 [ RunTime:0.001046s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001349s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000446s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 0  AND `id` <> 2 ORDER BY `groups` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `parent_id` = 1 [ RunTime:0.000439s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 2 ORDER BY `groups` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Default' LIMIT 1 [ RunTime:0.001920s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` LIMIT 1 [ RunTime:0.000390s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `yearlist` [ RunTime:0.001589s ]
[ sql ] [ SQL ] SELECT DISTINCT  `year` FROM `yearlist` ORDER BY year desc [ RunTime:0.001234s ]
---------------------------------------------------------------
[ 2018-11-17T13:48:11+08:00 ] 74.120.168.12 223.104.214.62 POST /daily/admin/api/synTemp?content=%E4%B8%B4%E6%97%B6%E7%AC%94%E8%AE%B0
[ info ] qingrang.top/daily/admin/api/synTemp?content=%E4%B8%B4%E6%97%B6%E7%AC%94%E8%AE%B0 [运行时间：0.065882s][吞吐率：15.18req/s] [内存消耗：1,982.89kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'api',
    2 => 'synTemp',
  ),
)
[ info ] [ HEADER ] array (
  'accept' => 'application/json,application/xml,application/xhtml+xml,text/html;q=0.9,image/webp,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh',
  'connection' => 'keep-alive',
  'content-type' => 'application/json; charset=utf-8',
  'user-agent' => 'Mozilla/5.0 (Linux; U; Android 8.1.0; zh-cn; OE106 Build/OPM1.171019.026) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30',
  'content-length' => '17',
  'host' => 'qingrang.top',
)
[ info ] [ PARAM ] array (
  'content' => '临时笔记',
  'type' => 'json',
)
[ info ] [ RUN ] app\admin\controller\Api->synTemp[ /var/www/html/daily/application/admin/controller/Api.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000759s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.002561s ]
[ sql ] [ SQL ] UPDATE `note`  SET `content`='临时笔记'  WHERE  `id` = 2 [ RunTime:0.000879s ]
---------------------------------------------------------------
[ 2018-11-17T15:09:13+08:00 ] 74.120.168.12 122.49.28.2 GET /daily/admin/api/synTemp?content=%E4%B8%B4%E6%97%B6%E7%AC%94%E8%AE%B0
[ info ] www.qingrang.top/daily/admin/api/synTemp?content=%E4%B8%B4%E6%97%B6%E7%AC%94%E8%AE%B0 [运行时间：0.084820s][吞吐率：11.79req/s] [内存消耗：1,980.09kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'api',
    2 => 'synTemp',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'www.qingrang.top',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'content' => '临时笔记',
)
[ info ] [ RUN ] app\admin\controller\Api->synTemp[ /var/www/html/daily/application/admin/controller/Api.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.002273s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.004065s ]
[ sql ] [ SQL ] UPDATE `note`  SET `content`='临时笔记'  WHERE  `id` = 2 [ RunTime:0.001169s ]
---------------------------------------------------------------
[ 2018-11-17T15:09:14+08:00 ] 74.120.168.12 122.49.28.2 GET /daily/admin/api/synTemp?content=%E4%B8%B4%E6%97%B6%E7%AC%94%E8%AE%B0
[ info ] www.qingrang.top/daily/admin/api/synTemp?content=%E4%B8%B4%E6%97%B6%E7%AC%94%E8%AE%B0 [运行时间：0.056576s][吞吐率：17.68req/s] [内存消耗：1,981.77kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'api',
    2 => 'synTemp',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'www.qingrang.top',
  'connection' => 'keep-alive',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; SV1; QQDownload 732; .NET4.0C; .NET4.0E; SE 2.X MetaSr 1.0)',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'content' => '临时笔记',
)
[ info ] [ RUN ] app\admin\controller\Api->synTemp[ /var/www/html/daily/application/admin/controller/Api.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000646s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001534s ]
[ sql ] [ SQL ] UPDATE `note`  SET `content`='临时笔记'  WHERE  `id` = 2 [ RunTime:0.000431s ]
---------------------------------------------------------------
[ 2018-11-17T15:12:18+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/noteview.html
[ info ] qingrang.top/daily/admin/note/noteview.html [运行时间：0.058657s][吞吐率：17.05req/s] [内存消耗：2,161.46kb] [文件加载：52]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'noteview',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '10',
  'accept' => 'application/json, text/javascript, */*; q=0.01',
  'origin' => 'http://qingrang.top',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'content-type' => 'application/x-www-form-urlencoded',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'noteid' => '247',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->noteview[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000809s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001515s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 247 LIMIT 1 [ RunTime:0.000703s ]
---------------------------------------------------------------
[ 2018-11-17T15:17:42+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/195.html
[ info ] qingrang.top/daily/admin/note/editnote/id/195.html [运行时间：0.057286s][吞吐率：17.46req/s] [内存消耗：2,029.27kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '195',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000682s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001476s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 195 LIMIT 1 [ RunTime:0.000477s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000333s ]
---------------------------------------------------------------
[ 2018-11-17T17:00:27+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/savenote.html
[ info ] qingrang.top/daily/admin/note/savenote.html [运行时间：0.076076s][吞吐率：13.14req/s] [内存消耗：2,053.20kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'savenote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '7497',
  'accept' => 'text/plain, */*; q=0.01',
  'origin' => 'http://qingrang.top',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/195.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'ogroup' => 'Default',
  'context' => '# Python 基础知识
`python`

[TOC]
## 声明文件编码
```
# 指定脚本调用方式
#!/usr/bin/env python

# 配置 utf-8 编码
# -*- coding: utf-8 -*-

# 配置其他编码
# -*- coding: <encoding-name> -*-

# Vim 中还可以使用如下方式
# vim:fileencoding=<encoding-name>
```
## 交互
### 输入
```
a = input(\'请输入：\')
print(a)
```
## 变量和简单数据类型
### 变量
尽量使用小写和下划线命名
```
result_msg = "Hello World!"
print(result_msg)
```
### 字符串
单双引号都行。
#### 大小写转换
```
msg = \'"hello" world!\'
print(msg.title())
------------------
"Hello" World!
------------------
# 函数
title()：以首字母大写的方式显示每个单词
upper()：全大写
lower()：全小写
```
#### 去两端的特别字符 `strip()`
>函数

strip()：去两端的字符
lstrip()：去左端的字符
rstrip()：去右端的字符
```
msg = " hel lo "
# 默认空格
print("-" + msg.strip() + "-")
--------------
-hel lo-
--------------
======================================
# 指定字符
msg = "+hello+"
print(msg.strip(\'+\'))
--------------
hello
--------------
```
### 整数
```
num1 = 3
num2 = 3
# ** 表示乘方运算
print(num1 ** num2)
------------------
27
------------------
```
### 类型转换
```
int(str)
float(str)
str(int)
str(float)
```
## if 和 while
### 条件
```
and/or
in/not in
```
### if
```
score = 65
if score > 90:
    print("A")
elif score > 60:
    print("B")
else:
    print("F")
------------------------------
lst = [1, 2, 3]
a = 2
b = 4

if a in lst:
    print("T")
if b not in lst:
    print("F")
```
### while
```
while a < 5:
    a += 1
```

## 列表
### 基础操作
```
# 创建
list1 = [\'a\', \'b\', \'c\']
list2 = list(range(1, 5))   # [1, 2, 3, 4]
list3 = [4, 1, 3, 2]

# 长度
length = len(list1)

# 负数索引
res = list1[-1]   # 返回倒数第一个元素

# 增
list1.append(\'e\')
list1.insert(3, \'d\')  # 在下标 3，插入 4

# 删
del list1[0]  # 下标
num1 = list1.pop()  # 最后一个元素
num2 = list1.pop(1)  # 有返回值，下标
list1.remove(\'a\')   # 指定值删除

# 排序
list3.sort()
list4 = sorted(list3)
list3.reverse()  # 反转

# 遍历
for s in list1:
    print(s)

# 统计
a = min(list3)
b = max(list3)
c = sum(list3)
```
### 切片
```
list1 = [\'a\', \'b\', \'c\', \'d\', \'e\']

# 利用切片复制列表
list2 = list1[:]

arr = list1[2:4]  # 下标 2 到下标 3
arr = list1[2:]  # 下标 2 到最后
arr = list1[-3:]  # 倒数第三个至最后

# 遍历
for s in list1[:3]:  # 遍历前 3 个元素
    print(s)
```
### 元组：列表中的元素不可变
```
list1 = (\'a\', \'b\', \'c\', \'d\', \'e\')
```



## 字典
```
# 创建
student = {\'name\': \'Tom\', \'age\': 18}
# 增
student[\'sex\'] = \'boy\'
# 改
student[\'age\'] = \'20\'
# 删
del student[\'age\']

# 遍历所有
for k, v in student.items():
    print(k + ":" + v)
# 遍历键
for s in student.keys():
    print(s)
# 遍历值
for s in student.values():
    print(s)
```
## 函数
```
def get_age(name):
    print(name)
    return 23

age = get_age("Tom")
print(age)
```
## 类
```
# 定义类
class Person():
    # 构造方法
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def play_game(self):
        print(self.name + " play game!")

p = Person(\'Tom\', 18)
p.play_game()

# 继承
class Student(Person):
    def __init__(self, name, age, school):
        super().__init__(name, age)
        self.school = school

stu = Student(\'Joy\', 15, \'QH\')
print(stu.school)
```
## 文件
```
file_name = "F:\\\\1.txt"

# 读取整个文件
with open(file_name) as file:
    content = file.read()
    print(content)

# 逐行读取
with open(file_name) as file:
    for line in file:
        print(line.rstrip() + ".")

# 读取文件行转为列表
with open(file_name) as file:
    lines = file.readlines()
print(lines)

# 写入，覆盖原内容
with open(file_name, \'w\') as file:
    file.write("Hello")

# 写入，追加
with open(file_name, \'a\') as file:
    file.write(" World！")
```
## 异常
',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->saveNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.001264s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.002020s ]
[ sql ] [ SQL ] UPDATE `note`  SET `title`='Python 基础知识',`content`='# Python 基础知识\n`python`\n\n[TOC]\n## 声明文件编码\n```\n# 指定脚本调用方式\n#!/usr/bin/env python\n\n# 配置 utf-8 编码\n# -*- coding: utf-8 -*-\n\n# 配置其他编码\n# -*- coding: <encoding-name> -*-\n\n# Vim 中还可以使用如下方式\n# vim:fileencoding=<encoding-name>\n```\n## 交互\n### 输入\n```\na = input(\'请输入：\')\nprint(a)\n```\n## 变量和简单数据类型\n### 变量\n尽量使用小写和下划线命名\n```\nresult_msg = \"Hello World!\"\nprint(result_msg)\n```\n### 字符串\n单双引号都行。\n#### 大小写转换\n```\nmsg = \'\"hello\" world!\'\nprint(msg.title())\n------------------\n\"Hello\" World!\n------------------\n# 函数\ntitle()：以首字母大写的方式显示每个单词\nupper()：全大写\nlower()：全小写\n```\n#### 去两端的特别字符 `strip()`\n>函数\n\nstrip()：去两端的字符\nlstrip()：去左端的字符\nrstrip()：去右端的字符\n```\nmsg = \" hel lo \"\n# 默认空格\nprint(\"-\" + msg.strip() + \"-\")\n--------------\n-hel lo-\n--------------\n======================================\n# 指定字符\nmsg = \"+hello+\"\nprint(msg.strip(\'+\'))\n--------------\nhello\n--------------\n```\n### 整数\n```\nnum1 = 3\nnum2 = 3\n# ** 表示乘方运算\nprint(num1 ** num2)\n------------------\n27\n------------------\n```\n### 类型转换\n```\nint(str)\nfloat(str)\nstr(int)\nstr(float)\n```\n## if 和 while\n### 条件\n```\nand/or\nin/not in\n```\n### if\n```\nscore = 65\nif score > 90:\n    print(\"A\")\nelif score > 60:\n    print(\"B\")\nelse:\n    print(\"F\")\n------------------------------\nlst = [1, 2, 3]\na = 2\nb = 4\n\nif a in lst:\n    print(\"T\")\nif b not in lst:\n    print(\"F\")\n```\n### while\n```\nwhile a < 5:\n    a += 1\n```\n\n## 列表\n### 基础操作\n```\n# 创建\nlist1 = [\'a\', \'b\', \'c\']\nlist2 = list(range(1, 5))   # [1, 2, 3, 4]\nlist3 = [4, 1, 3, 2]\n\n# 长度\nlength = len(list1)\n\n# 负数索引\nres = list1[-1]   # 返回倒数第一个元素\n\n# 增\nlist1.append(\'e\')\nlist1.insert(3, \'d\')  # 在下标 3，插入 4\n\n# 删\ndel list1[0]  # 下标\nnum1 = list1.pop()  # 最后一个元素\nnum2 = list1.pop(1)  # 有返回值，下标\nlist1.remove(\'a\')   # 指定值删除\n\n# 排序\nlist3.sort()\nlist4 = sorted(list3)\nlist3.reverse()  # 反转\n\n# 遍历\nfor s in list1:\n    print(s)\n\n# 统计\na = min(list3)\nb = max(list3)\nc = sum(list3)\n```\n### 切片\n```\nlist1 = [\'a\', \'b\', \'c\', \'d\', \'e\']\n\n# 利用切片复制列表\nlist2 = list1[:]\n\narr = list1[2:4]  # 下标 2 到下标 3\narr = list1[2:]  # 下标 2 到最后\narr = list1[-3:]  # 倒数第三个至最后\n\n# 遍历\nfor s in list1[:3]:  # 遍历前 3 个元素\n    print(s)\n```\n### 元组：列表中的元素不可变\n```\nlist1 = (\'a\', \'b\', \'c\', \'d\', \'e\')\n```\n\n\n\n## 字典\n```\n# 创建\nstudent = {\'name\': \'Tom\', \'age\': 18}\n# 增\nstudent[\'sex\'] = \'boy\'\n# 改\nstudent[\'age\'] = \'20\'\n# 删\ndel student[\'age\']\n\n# 遍历所有\nfor k, v in student.items():\n    print(k + \":\" + v)\n# 遍历键\nfor s in student.keys():\n    print(s)\n# 遍历值\nfor s in student.values():\n    print(s)\n```\n## 函数\n```\ndef get_age(name):\n    print(name)\n    return 23\n\nage = get_age(\"Tom\")\nprint(age)\n```\n## 类\n```\n# 定义类\nclass Person():\n    # 构造方法\n    def __init__(self, name, age):\n        self.name = name\n        self.age = age\n\n    def play_game(self):\n        print(self.name + \" play game!\")\n\np = Person(\'Tom\', 18)\np.play_game()\n\n# 继承\nclass Student(Person):\n    def __init__(self, name, age, school):\n        super().__init__(name, age)\n        self.school = school\n\nstu = Student(\'Joy\', 15, \'QH\')\nprint(stu.school)\n```\n## 文件\n```\nfile_name = \"F:\\\\1.txt\"\n\n# 读取整个文件\nwith open(file_name) as file:\n    content = file.read()\n    print(content)\n\n# 逐行读取\nwith open(file_name) as file:\n    for line in file:\n        print(line.rstrip() + \".\")\n\n# 读取文件行转为列表\nwith open(file_name) as file:\n    lines = file.readlines()\nprint(lines)\n\n# 写入，覆盖原内容\nwith open(file_name, \'w\') as file:\n    file.write(\"Hello\")\n\n# 写入，追加\nwith open(file_name, \'a\') as file:\n    file.write(\" World！\")\n```\n## 异常\n',`groups`='Default',`p_id`=1  WHERE  `id` = 1 [ RunTime:0.001081s ]
---------------------------------------------------------------
[ 2018-11-17T17:17:28+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/updatenote/id/195.html
[ info ] qingrang.top/daily/admin/note/updatenote/id/195.html [运行时间：0.081122s][吞吐率：12.33req/s] [内存消耗：2,080.29kb] [文件加载：58]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'updatenote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '9280',
  'cache-control' => 'max-age=0',
  'origin' => 'http://qingrang.top',
  'upgrade-insecure-requests' => '1',
  'content-type' => 'application/x-www-form-urlencoded',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/195.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'summary' => '一些基础语法，主要是列出与 java，C# 等的差异',
  'content' => '# Python 基础知识
`python`

[TOC]
## 声明文件编码
```
# 指定脚本调用方式
#!/usr/bin/env python

# 配置 utf-8 编码
# -*- coding: utf-8 -*-

# 配置其他编码
# -*- coding: <encoding-name> -*-

# Vim 中还可以使用如下方式
# vim:fileencoding=<encoding-name>
```
## 交互
### 输入
```
a = input(\'请输入：\')
print(a)
```
## 变量和简单数据类型
### 变量
尽量使用小写和下划线命名
```
result_msg = "Hello World!"
print(result_msg)
```
### 字符串
单双引号都行。
#### 大小写转换
```
msg = \'"hello" world!\'
print(msg.title())
------------------
"Hello" World!
------------------
# 函数
title()：以首字母大写的方式显示每个单词
upper()：全大写
lower()：全小写
```
#### 去两端的特别字符 `strip()`
>函数

strip()：去两端的字符
lstrip()：去左端的字符
rstrip()：去右端的字符
```
msg = " hel lo "
# 默认空格
print("-" + msg.strip() + "-")
--------------
-hel lo-
--------------
======================================
# 指定字符
msg = "+hello+"
print(msg.strip(\'+\'))
--------------
hello
--------------
```
### 整数
```
num1 = 3
num2 = 3
# ** 表示乘方运算
print(num1 ** num2)
------------------
27
------------------
```
### 类型转换
```
int(str)
float(str)
str(int)
str(float)
```
## if 和 while
### 条件
```
and/or
in/not in
```
### if
```
score = 65
if score > 90:
    print("A")
elif score > 60:
    print("B")
else:
    print("F")
------------------------------
lst = [1, 2, 3]
a = 2
b = 4

if a in lst:
    print("T")
if b not in lst:
    print("F")
```
### while
```
while a < 5:
    a += 1
```

## 列表
### 基础操作
```
# 创建
list1 = [\'a\', \'b\', \'c\']
list2 = list(range(1, 5))   # [1, 2, 3, 4]
list3 = [4, 1, 3, 2]

# 长度
length = len(list1)

# 负数索引
res = list1[-1]   # 返回倒数第一个元素

# 增
list1.append(\'e\')
list1.insert(3, \'d\')  # 在下标 3，插入 4

# 删
del list1[0]  # 下标
num1 = list1.pop()  # 最后一个元素
num2 = list1.pop(1)  # 有返回值，下标
list1.remove(\'a\')   # 指定值删除

# 排序
list3.sort()
list4 = sorted(list3)
list3.reverse()  # 反转

# 遍历
for s in list1:
    print(s)

# 统计
a = min(list3)
b = max(list3)
c = sum(list3)
```
### 切片
```
list1 = [\'a\', \'b\', \'c\', \'d\', \'e\']

# 利用切片复制列表
list2 = list1[:]

arr = list1[2:4]  # 下标 2 到下标 3
arr = list1[2:]  # 下标 2 到最后
arr = list1[-3:]  # 倒数第三个至最后

# 遍历
for s in list1[:3]:  # 遍历前 3 个元素
    print(s)
```
### 元组：列表中的元素不可变
```
list1 = (\'a\', \'b\', \'c\', \'d\', \'e\')
```



## 字典
```
# 创建
student = {\'name\': \'Tom\', \'age\': 18}
# 增
student[\'sex\'] = \'boy\'
# 改
student[\'age\'] = \'20\'
# 删
del student[\'age\']

# 遍历所有
for k, v in student.items():
    print(k + ":" + v)
# 遍历键
for s in student.keys():
    print(s)
# 遍历值
for s in student.values():
    print(s)
```
## 函数
```
def get_age(name):
    print(name)
    return 23

age = get_age("Tom")
print(age)
```
## 类
```
# 定义类
class Person():
    # 构造方法
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def play_game(self):
        print(self.name + " play game!")

p = Person(\'Tom\', 18)
p.play_game()

# 继承
class Student(Person):
    def __init__(self, name, age, school):
        super().__init__(name, age)
        self.school = school

stu = Student(\'Joy\', 15, \'QH\')
print(stu.school)
```
## 文件
```
file_name = "F:\\\\1.txt"

# 读取整个文件
with open(file_name) as file:
    content = file.read()
    print(content)

# 逐行读取
with open(file_name) as file:
    for line in file:
        print(line.rstrip() + ".")

# 读取文件行转为列表
with open(file_name) as file:
    lines = file.readlines()
print(lines)

# 写入，覆盖原内容
with open(file_name, \'w\') as file:
    file.write("Hello")

# 写入，追加
with open(file_name, \'a\') as file:
    file.write(" World！")
```
## 异常
```
try:
    print(5/0)
except ZeroDivisionError:
    print("除 0 啦")
    pass    # 抛出
else:   # 仅在 try 代码块成功执行时才执行
    print("= ...")
```
',
  'groups' => 'Python',
  'showsel' => '1',
  'showse2' => '1',
  'id' => '195',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->updateNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000753s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001717s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 195 LIMIT 1 [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT `groups` FROM `note` WHERE  `id` = 195 LIMIT 1 [ RunTime:0.000396s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001057s ]
[ sql ] [ SQL ] SELECT `parent_id` FROM `groups` WHERE  `groups` = 'Python' LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `id` = 2 LIMIT 1 [ RunTime:0.000454s ]
[ sql ] [ SQL ] UPDATE `note`  SET `id`=195,`p_id`=2,`title`='Python 基础知识\r',`content`='# Python 基础知识\r\n`python`\r\n\r\n[TOC]\r\n## 声明文件编码\r\n```\r\n# 指定脚本调用方式\r\n#!/usr/bin/env python\r\n\r\n# 配置 utf-8 编码\r\n# -*- coding: utf-8 -*-\r\n\r\n# 配置其他编码\r\n# -*- coding: <encoding-name> -*-\r\n\r\n# Vim 中还可以使用如下方式\r\n# vim:fileencoding=<encoding-name>\r\n```\r\n## 交互\r\n### 输入\r\n```\r\na = input(\'请输入：\')\r\nprint(a)\r\n```\r\n## 变量和简单数据类型\r\n### 变量\r\n尽量使用小写和下划线命名\r\n```\r\nresult_msg = \"Hello World!\"\r\nprint(result_msg)\r\n```\r\n### 字符串\r\n单双引号都行。\r\n#### 大小写转换\r\n```\r\nmsg = \'\"hello\" world!\'\r\nprint(msg.title())\r\n------------------\r\n\"Hello\" World!\r\n------------------\r\n# 函数\r\ntitle()：以首字母大写的方式显示每个单词\r\nupper()：全大写\r\nlower()：全小写\r\n```\r\n#### 去两端的特别字符 `strip()`\r\n>函数\r\n\r\nstrip()：去两端的字符\r\nlstrip()：去左端的字符\r\nrstrip()：去右端的字符\r\n```\r\nmsg = \" hel lo \"\r\n# 默认空格\r\nprint(\"-\" + msg.strip() + \"-\")\r\n--------------\r\n-hel lo-\r\n--------------\r\n======================================\r\n# 指定字符\r\nmsg = \"+hello+\"\r\nprint(msg.strip(\'+\'))\r\n--------------\r\nhello\r\n--------------\r\n```\r\n### 整数\r\n```\r\nnum1 = 3\r\nnum2 = 3\r\n# ** 表示乘方运算\r\nprint(num1 ** num2)\r\n------------------\r\n27\r\n------------------\r\n```\r\n### 类型转换\r\n```\r\nint(str)\r\nfloat(str)\r\nstr(int)\r\nstr(float)\r\n```\r\n## if 和 while\r\n### 条件\r\n```\r\nand/or\r\nin/not in\r\n```\r\n### if\r\n```\r\nscore = 65\r\nif score > 90:\r\n    print(\"A\")\r\nelif score > 60:\r\n    print(\"B\")\r\nelse:\r\n    print(\"F\")\r\n------------------------------\r\nlst = [1, 2, 3]\r\na = 2\r\nb = 4\r\n\r\nif a in lst:\r\n    print(\"T\")\r\nif b not in lst:\r\n    print(\"F\")\r\n```\r\n### while\r\n```\r\nwhile a < 5:\r\n    a += 1\r\n```\r\n\r\n## 列表\r\n### 基础操作\r\n```\r\n# 创建\r\nlist1 = [\'a\', \'b\', \'c\']\r\nlist2 = list(range(1, 5))   # [1, 2, 3, 4]\r\nlist3 = [4, 1, 3, 2]\r\n\r\n# 长度\r\nlength = len(list1)\r\n\r\n# 负数索引\r\nres = list1[-1]   # 返回倒数第一个元素\r\n\r\n# 增\r\nlist1.append(\'e\')\r\nlist1.insert(3, \'d\')  # 在下标 3，插入 4\r\n\r\n# 删\r\ndel list1[0]  # 下标\r\nnum1 = list1.pop()  # 最后一个元素\r\nnum2 = list1.pop(1)  # 有返回值，下标\r\nlist1.remove(\'a\')   # 指定值删除\r\n\r\n# 排序\r\nlist3.sort()\r\nlist4 = sorted(list3)\r\nlist3.reverse()  # 反转\r\n\r\n# 遍历\r\nfor s in list1:\r\n    print(s)\r\n\r\n# 统计\r\na = min(list3)\r\nb = max(list3)\r\nc = sum(list3)\r\n```\r\n### 切片\r\n```\r\nlist1 = [\'a\', \'b\', \'c\', \'d\', \'e\']\r\n\r\n# 利用切片复制列表\r\nlist2 = list1[:]\r\n\r\narr = list1[2:4]  # 下标 2 到下标 3\r\narr = list1[2:]  # 下标 2 到最后\r\narr = list1[-3:]  # 倒数第三个至最后\r\n\r\n# 遍历\r\nfor s in list1[:3]:  # 遍历前 3 个元素\r\n    print(s)\r\n```\r\n### 元组：列表中的元素不可变\r\n```\r\nlist1 = (\'a\', \'b\', \'c\', \'d\', \'e\')\r\n```\r\n\r\n\r\n\r\n## 字典\r\n```\r\n# 创建\r\nstudent = {\'name\': \'Tom\', \'age\': 18}\r\n# 增\r\nstudent[\'sex\'] = \'boy\'\r\n# 改\r\nstudent[\'age\'] = \'20\'\r\n# 删\r\ndel student[\'age\']\r\n\r\n# 遍历所有\r\nfor k, v in student.items():\r\n    print(k + \":\" + v)\r\n# 遍历键\r\nfor s in student.keys():\r\n    print(s)\r\n# 遍历值\r\nfor s in student.values():\r\n    print(s)\r\n```\r\n## 函数\r\n```\r\ndef get_age(name):\r\n    print(name)\r\n    return 23\r\n\r\nage = get_age(\"Tom\")\r\nprint(age)\r\n```\r\n## 类\r\n```\r\n# 定义类\r\nclass Person():\r\n    # 构造方法\r\n    def __init__(self, name, age):\r\n        self.name = name\r\n        self.age = age\r\n\r\n    def play_game(self):\r\n        print(self.name + \" play game!\")\r\n\r\np = Person(\'Tom\', 18)\r\np.play_game()\r\n\r\n# 继承\r\nclass Student(Person):\r\n    def __init__(self, name, age, school):\r\n        super().__init__(name, age)\r\n        self.school = school\r\n\r\nstu = Student(\'Joy\', 15, \'QH\')\r\nprint(stu.school)\r\n```\r\n## 文件\r\n```\r\nfile_name = \"F:\\\\1.txt\"\r\n\r\n# 读取整个文件\r\nwith open(file_name) as file:\r\n    content = file.read()\r\n    print(content)\r\n\r\n# 逐行读取\r\nwith open(file_name) as file:\r\n    for line in file:\r\n        print(line.rstrip() + \".\")\r\n\r\n# 读取文件行转为列表\r\nwith open(file_name) as file:\r\n    lines = file.readlines()\r\nprint(lines)\r\n\r\n# 写入，覆盖原内容\r\nwith open(file_name, \'w\') as file:\r\n    file.write(\"Hello\")\r\n\r\n# 写入，追加\r\nwith open(file_name, \'a\') as file:\r\n    file.write(\" World！\")\r\n```\r\n## 异常\r\n```\r\ntry:\r\n    print(5/0)\r\nexcept ZeroDivisionError:\r\n    print(\"除 0 啦\")\r\n    pass    # 抛出\r\nelse:   # 仅在 try 代码块成功执行时才执行\r\n    print(\"= ...\")\r\n```\r\n',`groups`='Python',`is_show`=1,`publish`=1,`summary`='一些基础语法，主要是列出与 java，C# 等的差异'  WHERE  `id` = 195 [ RunTime:0.000637s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Python' LIMIT 1 [ RunTime:0.002680s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=1  WHERE  `groups` = 'Python' [ RunTime:0.000371s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Python' LIMIT 1 [ RunTime:0.000959s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=1  WHERE  `groups` = 'Python' [ RunTime:0.000362s ]
---------------------------------------------------------------
[ 2018-11-17T17:17:29+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/195.html
[ info ] qingrang.top/daily/admin/note/shownote/id/195.html [运行时间：0.060426s][吞吐率：16.55req/s] [内存消耗：1,984.18kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/195.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '195',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000539s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001356s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 195 LIMIT 1 [ RunTime:0.000506s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001003s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000298s ]
---------------------------------------------------------------
[ 2018-11-17T17:21:01+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/195.html
[ info ] qingrang.top/daily/admin/note/editnote/id/195.html [运行时间：0.061375s][吞吐率：16.29req/s] [内存消耗：2,031.87kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '195',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000590s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001387s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 195 LIMIT 1 [ RunTime:0.000445s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001275s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000492s ]
---------------------------------------------------------------
[ 2018-11-17T17:21:16+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/updatenote/id/195.html
[ info ] qingrang.top/daily/admin/note/updatenote/id/195.html [运行时间：0.072862s][吞吐率：13.72req/s] [内存消耗：2,080.64kb] [文件加载：58]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'updatenote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '9417',
  'cache-control' => 'max-age=0',
  'origin' => 'http://qingrang.top',
  'upgrade-insecure-requests' => '1',
  'content-type' => 'application/x-www-form-urlencoded',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/195.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'summary' => '一些基础语法，主要是列出与 java，C# 等的差异',
  'content' => '# Python 基础知识
`python`

[TOC]
## 声明文件编码
```
# 指定脚本调用方式
#!/usr/bin/env python

# 配置 utf-8 编码
# -*- coding: utf-8 -*-

# 配置其他编码
# -*- coding: <encoding-name> -*-

# Vim 中还可以使用如下方式
# vim:fileencoding=<encoding-name>
```
## 交互
### 输入
```
a = input(\'请输入：\')
print(a)
```
## 变量和简单数据类型
### 变量
尽量使用小写和下划线命名
```
result_msg = "Hello World!"
print(result_msg)
```
### 字符串
单双引号都行。
#### 大小写转换
```
msg = \'"hello" world!\'
print(msg.title())
------------------
"Hello" World!
------------------
# 函数
title()：以首字母大写的方式显示每个单词
upper()：全大写
lower()：全小写
```
#### 去两端的特别字符 `strip()`
>函数

strip()：去两端的字符
lstrip()：去左端的字符
rstrip()：去右端的字符
```
msg = " hel lo "
# 默认空格
print("-" + msg.strip() + "-")
--------------
-hel lo-
--------------
======================================
# 指定字符
msg = "+hello+"
print(msg.strip(\'+\'))
--------------
hello
--------------
```
### 整数
```
num1 = 3
num2 = 3
# ** 表示乘方运算
print(num1 ** num2)
------------------
27
------------------
```
### 类型转换
```
int(str)
float(str)
str(int)
str(float)
```
## if 和 while
### 条件
```
and/or
in/not in
```
### if
```
score = 65
if score > 90:
    print("A")
elif score > 60:
    print("B")
else:
    print("F")
------------------------------
lst = [1, 2, 3]
a = 2
b = 4

if a in lst:
    print("T")
if b not in lst:
    print("F")
```
### while
```
while a < 5:
    a += 1
```

## 列表
### 基础操作
```
# 创建
list1 = [\'a\', \'b\', \'c\']
list2 = list(range(1, 5))   # [1, 2, 3, 4]
list3 = [4, 1, 3, 2]

# 长度
length = len(list1)

# 负数索引
res = list1[-1]   # 返回倒数第一个元素

# 增
list1.append(\'e\')
list1.insert(3, \'d\')  # 在下标 3，插入 4

# 删
del list1[0]  # 下标
num1 = list1.pop()  # 最后一个元素
num2 = list1.pop(1)  # 有返回值，下标
list1.remove(\'a\')   # 指定值删除

# 排序
list3.sort()
list4 = sorted(list3)
list3.reverse()  # 反转

# 遍历
for s in list1:
    print(s)

# 统计
a = min(list3)
b = max(list3)
c = sum(list3)
```
### 切片
```
list1 = [\'a\', \'b\', \'c\', \'d\', \'e\']

# 利用切片复制列表
list2 = list1[:]

arr = list1[2:4]  # 下标 2 到下标 3
arr = list1[2:]  # 下标 2 到最后
arr = list1[-3:]  # 倒数第三个至最后

# 遍历
for s in list1[:3]:  # 遍历前 3 个元素
    print(s)
```
### 元组：列表中的元素不可变
```
list1 = (\'a\', \'b\', \'c\', \'d\', \'e\')
```



## 字典
```
# 创建
student = {\'name\': \'Tom\', \'age\': 18}
# 增
student[\'sex\'] = \'boy\'
# 改
student[\'age\'] = \'20\'
# 删
del student[\'age\']

# 遍历所有
for k, v in student.items():
    print(k + ":" + v)
# 遍历键
for s in student.keys():
    print(s)
# 遍历值
for s in student.values():
    print(s)
```
## 函数
```
def get_age(name):
    print(name)
    return 23

age = get_age("Tom")
print(age)
```
## 类
```
# 定义类
class Person():
    # 构造方法
    def __init__(self, name, age):
        self.name = name
        self.age = age
    def play_game(self):
        print(self.name + " play game!")
p = Person(\'Tom\', 18)
p.play_game()
# 继承
class Student(Person):
    def __init__(self, name, age, school):
        super().__init__(name, age)
        self.school = school

    @staticmethod
    def static_fun():
        print("静态方法")
stu = Student(\'Joy\', 15, \'QH\')
print(stu.school)
Student.static_fun()
```
## 文件
```
file_name = "F:\\\\1.txt"

# 读取整个文件
with open(file_name) as file:
    content = file.read()
    print(content)

# 逐行读取
with open(file_name) as file:
    for line in file:
        print(line.rstrip() + ".")

# 读取文件行转为列表
with open(file_name) as file:
    lines = file.readlines()
print(lines)

# 写入，覆盖原内容
with open(file_name, \'w\') as file:
    file.write("Hello")

# 写入，追加
with open(file_name, \'a\') as file:
    file.write(" World！")
```
## 异常
```
try:
    print(5/0)
except ZeroDivisionError:
    print("除 0 啦")
    pass    # 抛出
else:   # 仅在 try 代码块成功执行时才执行
    print("= ...")
```
',
  'groups' => 'Python',
  'showsel' => '1',
  'showse2' => '1',
  'id' => '195',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->updateNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000585s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001386s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 195 LIMIT 1 [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT `groups` FROM `note` WHERE  `id` = 195 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000998s ]
[ sql ] [ SQL ] SELECT `parent_id` FROM `groups` WHERE  `groups` = 'Python' LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `id` = 2 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] UPDATE `note`  SET `id`=195,`p_id`=2,`title`='Python 基础知识\r',`content`='# Python 基础知识\r\n`python`\r\n\r\n[TOC]\r\n## 声明文件编码\r\n```\r\n# 指定脚本调用方式\r\n#!/usr/bin/env python\r\n\r\n# 配置 utf-8 编码\r\n# -*- coding: utf-8 -*-\r\n\r\n# 配置其他编码\r\n# -*- coding: <encoding-name> -*-\r\n\r\n# Vim 中还可以使用如下方式\r\n# vim:fileencoding=<encoding-name>\r\n```\r\n## 交互\r\n### 输入\r\n```\r\na = input(\'请输入：\')\r\nprint(a)\r\n```\r\n## 变量和简单数据类型\r\n### 变量\r\n尽量使用小写和下划线命名\r\n```\r\nresult_msg = \"Hello World!\"\r\nprint(result_msg)\r\n```\r\n### 字符串\r\n单双引号都行。\r\n#### 大小写转换\r\n```\r\nmsg = \'\"hello\" world!\'\r\nprint(msg.title())\r\n------------------\r\n\"Hello\" World!\r\n------------------\r\n# 函数\r\ntitle()：以首字母大写的方式显示每个单词\r\nupper()：全大写\r\nlower()：全小写\r\n```\r\n#### 去两端的特别字符 `strip()`\r\n>函数\r\n\r\nstrip()：去两端的字符\r\nlstrip()：去左端的字符\r\nrstrip()：去右端的字符\r\n```\r\nmsg = \" hel lo \"\r\n# 默认空格\r\nprint(\"-\" + msg.strip() + \"-\")\r\n--------------\r\n-hel lo-\r\n--------------\r\n======================================\r\n# 指定字符\r\nmsg = \"+hello+\"\r\nprint(msg.strip(\'+\'))\r\n--------------\r\nhello\r\n--------------\r\n```\r\n### 整数\r\n```\r\nnum1 = 3\r\nnum2 = 3\r\n# ** 表示乘方运算\r\nprint(num1 ** num2)\r\n------------------\r\n27\r\n------------------\r\n```\r\n### 类型转换\r\n```\r\nint(str)\r\nfloat(str)\r\nstr(int)\r\nstr(float)\r\n```\r\n## if 和 while\r\n### 条件\r\n```\r\nand/or\r\nin/not in\r\n```\r\n### if\r\n```\r\nscore = 65\r\nif score > 90:\r\n    print(\"A\")\r\nelif score > 60:\r\n    print(\"B\")\r\nelse:\r\n    print(\"F\")\r\n------------------------------\r\nlst = [1, 2, 3]\r\na = 2\r\nb = 4\r\n\r\nif a in lst:\r\n    print(\"T\")\r\nif b not in lst:\r\n    print(\"F\")\r\n```\r\n### while\r\n```\r\nwhile a < 5:\r\n    a += 1\r\n```\r\n\r\n## 列表\r\n### 基础操作\r\n```\r\n# 创建\r\nlist1 = [\'a\', \'b\', \'c\']\r\nlist2 = list(range(1, 5))   # [1, 2, 3, 4]\r\nlist3 = [4, 1, 3, 2]\r\n\r\n# 长度\r\nlength = len(list1)\r\n\r\n# 负数索引\r\nres = list1[-1]   # 返回倒数第一个元素\r\n\r\n# 增\r\nlist1.append(\'e\')\r\nlist1.insert(3, \'d\')  # 在下标 3，插入 4\r\n\r\n# 删\r\ndel list1[0]  # 下标\r\nnum1 = list1.pop()  # 最后一个元素\r\nnum2 = list1.pop(1)  # 有返回值，下标\r\nlist1.remove(\'a\')   # 指定值删除\r\n\r\n# 排序\r\nlist3.sort()\r\nlist4 = sorted(list3)\r\nlist3.reverse()  # 反转\r\n\r\n# 遍历\r\nfor s in list1:\r\n    print(s)\r\n\r\n# 统计\r\na = min(list3)\r\nb = max(list3)\r\nc = sum(list3)\r\n```\r\n### 切片\r\n```\r\nlist1 = [\'a\', \'b\', \'c\', \'d\', \'e\']\r\n\r\n# 利用切片复制列表\r\nlist2 = list1[:]\r\n\r\narr = list1[2:4]  # 下标 2 到下标 3\r\narr = list1[2:]  # 下标 2 到最后\r\narr = list1[-3:]  # 倒数第三个至最后\r\n\r\n# 遍历\r\nfor s in list1[:3]:  # 遍历前 3 个元素\r\n    print(s)\r\n```\r\n### 元组：列表中的元素不可变\r\n```\r\nlist1 = (\'a\', \'b\', \'c\', \'d\', \'e\')\r\n```\r\n\r\n\r\n\r\n## 字典\r\n```\r\n# 创建\r\nstudent = {\'name\': \'Tom\', \'age\': 18}\r\n# 增\r\nstudent[\'sex\'] = \'boy\'\r\n# 改\r\nstudent[\'age\'] = \'20\'\r\n# 删\r\ndel student[\'age\']\r\n\r\n# 遍历所有\r\nfor k, v in student.items():\r\n    print(k + \":\" + v)\r\n# 遍历键\r\nfor s in student.keys():\r\n    print(s)\r\n# 遍历值\r\nfor s in student.values():\r\n    print(s)\r\n```\r\n## 函数\r\n```\r\ndef get_age(name):\r\n    print(name)\r\n    return 23\r\n\r\nage = get_age(\"Tom\")\r\nprint(age)\r\n```\r\n## 类\r\n```\r\n# 定义类\r\nclass Person():\r\n    # 构造方法\r\n    def __init__(self, name, age):\r\n        self.name = name\r\n        self.age = age\r\n    def play_game(self):\r\n        print(self.name + \" play game!\")\r\np = Person(\'Tom\', 18)\r\np.play_game()\r\n# 继承\r\nclass Student(Person):\r\n    def __init__(self, name, age, school):\r\n        super().__init__(name, age)\r\n        self.school = school\r\n\r\n    @staticmethod\r\n    def static_fun():\r\n        print(\"静态方法\")\r\nstu = Student(\'Joy\', 15, \'QH\')\r\nprint(stu.school)\r\nStudent.static_fun()\r\n```\r\n## 文件\r\n```\r\nfile_name = \"F:\\\\1.txt\"\r\n\r\n# 读取整个文件\r\nwith open(file_name) as file:\r\n    content = file.read()\r\n    print(content)\r\n\r\n# 逐行读取\r\nwith open(file_name) as file:\r\n    for line in file:\r\n        print(line.rstrip() + \".\")\r\n\r\n# 读取文件行转为列表\r\nwith open(file_name) as file:\r\n    lines = file.readlines()\r\nprint(lines)\r\n\r\n# 写入，覆盖原内容\r\nwith open(file_name, \'w\') as file:\r\n    file.write(\"Hello\")\r\n\r\n# 写入，追加\r\nwith open(file_name, \'a\') as file:\r\n    file.write(\" World！\")\r\n```\r\n## 异常\r\n```\r\ntry:\r\n    print(5/0)\r\nexcept ZeroDivisionError:\r\n    print(\"除 0 啦\")\r\n    pass    # 抛出\r\nelse:   # 仅在 try 代码块成功执行时才执行\r\n    print(\"= ...\")\r\n```\r\n',`groups`='Python',`is_show`=1,`publish`=1,`summary`='一些基础语法，主要是列出与 java，C# 等的差异'  WHERE  `id` = 195 [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Python' LIMIT 1 [ RunTime:0.001108s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=1  WHERE  `groups` = 'Python' [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Python' LIMIT 1 [ RunTime:0.000967s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=1  WHERE  `groups` = 'Python' [ RunTime:0.000348s ]
---------------------------------------------------------------
[ 2018-11-17T17:21:17+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/195.html
[ info ] qingrang.top/daily/admin/note/shownote/id/195.html [运行时间：0.056304s][吞吐率：17.76req/s] [内存消耗：1,984.27kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/195.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '195',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000562s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001306s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 195 LIMIT 1 [ RunTime:0.000488s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000858s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000290s ]
---------------------------------------------------------------
[ 2018-11-17T17:22:42+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/195.html
[ info ] qingrang.top/daily/admin/note/editnote/id/195.html [运行时间：0.066264s][吞吐率：15.09req/s] [内存消耗：2,032.46kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '195',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000515s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001550s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 195 LIMIT 1 [ RunTime:0.000504s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000843s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000302s ]
---------------------------------------------------------------
[ 2018-11-17T17:22:48+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/updatenote/id/195.html
[ info ] qingrang.top/daily/admin/note/updatenote/id/195.html [运行时间：0.077769s][吞吐率：12.86req/s] [内存消耗：2,080.64kb] [文件加载：58]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'updatenote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '9417',
  'cache-control' => 'max-age=0',
  'origin' => 'http://qingrang.top',
  'upgrade-insecure-requests' => '1',
  'content-type' => 'application/x-www-form-urlencoded',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/195.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'summary' => '一些基础语法，主要是列出与 java，C# 等的差异',
  'content' => '# Python 基础知识
`python`

[TOC]
## 声明文件编码
```
# 指定脚本调用方式
#!/usr/bin/env python

# 配置 utf-8 编码
# -*- coding: utf-8 -*-

# 配置其他编码
# -*- coding: <encoding-name> -*-

# Vim 中还可以使用如下方式
# vim:fileencoding=<encoding-name>
```
## 交互
### 输入
```
a = input(\'请输入：\')
print(a)
```
## 变量和简单数据类型
### 变量
尽量使用小写和下划线命名
```
result_msg = "Hello World!"
print(result_msg)
```
### 字符串
单双引号都行。
#### 大小写转换
```
msg = \'"hello" world!\'
print(msg.title())
------------------
"Hello" World!
------------------
# 函数
title()：以首字母大写的方式显示每个单词
upper()：全大写
lower()：全小写
```
#### 去两端的特别字符 `strip()`
>函数

strip()：去两端的字符
lstrip()：去左端的字符
rstrip()：去右端的字符
```
msg = " hel lo "
# 默认空格
print("-" + msg.strip() + "-")
--------------
-hel lo-
--------------
======================================
# 指定字符
msg = "+hello+"
print(msg.strip(\'+\'))
--------------
hello
--------------
```
### 整数
```
num1 = 3
num2 = 3
# ** 表示乘方运算
print(num1 ** num2)
------------------
27
------------------
```
### 类型转换
```
int(str)
float(str)
str(int)
str(float)
```
## if 和 while
### 条件
```
and/or
in/not in
```
### if
```
score = 65
if score > 90:
    print("A")
elif score > 60:
    print("B")
else:
    print("F")
------------------------------
lst = [1, 2, 3]
a = 2
b = 4

if a in lst:
    print("T")
if b not in lst:
    print("F")
```
### while
```
while a < 5:
    a += 1
```

## 列表
### 基础操作
```
# 创建
list1 = [\'a\', \'b\', \'c\']
list2 = list(range(1, 5))   # [1, 2, 3, 4]
list3 = [4, 1, 3, 2]

# 长度
length = len(list1)

# 负数索引
res = list1[-1]   # 返回倒数第一个元素

# 增
list1.append(\'e\')
list1.insert(3, \'d\')  # 在下标 3，插入 4

# 删
del list1[0]  # 下标
num1 = list1.pop()  # 最后一个元素
num2 = list1.pop(1)  # 有返回值，下标
list1.remove(\'a\')   # 指定值删除

# 排序
list3.sort()
list4 = sorted(list3)
list3.reverse()  # 反转

# 遍历
for s in list1:
    print(s)

# 统计
a = min(list3)
b = max(list3)
c = sum(list3)
```
### 切片
```
list1 = [\'a\', \'b\', \'c\', \'d\', \'e\']

# 利用切片复制列表
list2 = list1[:]

arr = list1[2:4]  # 下标 2 到下标 3
arr = list1[2:]  # 下标 2 到最后
arr = list1[-3:]  # 倒数第三个至最后

# 遍历
for s in list1[:3]:  # 遍历前 3 个元素
    print(s)
```
### 元组：列表中的元素不可变
```
list1 = (\'a\', \'b\', \'c\', \'d\', \'e\')
```



## 字典
```
# 创建
student = {\'name\': \'Tom\', \'age\': 18}
# 增
student[\'sex\'] = \'boy\'
# 改
student[\'age\'] = \'20\'
# 删
del student[\'age\']

# 遍历所有
for k, v in student.items():
    print(k + ":" + v)
# 遍历键
for s in student.keys():
    print(s)
# 遍历值
for s in student.values():
    print(s)
```
## 函数
```
def get_age(name):
    print(name)
    return 23

age = get_age("Tom")
print(age)
```
## 类
```
# 定义类
class Person():
    # 构造方法
    def __init__(self, name, age):
        self.name = name
        self.age = age
    def play_game(self):
        print(self.name + " play game!")
p = Person(\'Tom\', 18)
p.play_game()
# 继承
class Student(Person):
    def __init__(self, name, age, school):
        super().__init__(name, age)
        self.school = school

    @staticmethod
    def static_fun():
        print("静态方法")
stu = Student(\'Joy\', 15, \'QH\')
print(stu.school)
Student.static_fun()
```
## 文件
```
file_name = "F:\\\\1.txt"

# 读取整个文件
with open(file_name) as file:
    content = file.read()
    print(content)

# 逐行读取
with open(file_name) as file:
    for line in file:
        print(line.rstrip() + ".")

# 读取文件行转为列表
with open(file_name) as file:
    lines = file.readlines()
print(lines)

# 写入，覆盖原内容
with open(file_name, \'w\') as file:
    file.write("Hello")

# 写入，追加
with open(file_name, \'a\') as file:
    file.write(" World！")
```
## 异常
```
try:
    print(5/0)
except ZeroDivisionError:
    print("除 0 啦")
    pass    # 抛出
else:   # 仅在 try 代码块成功执行时才执行
    print("= ...")
```
',
  'groups' => 'Python',
  'showsel' => '0',
  'showse2' => '1',
  'id' => '195',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->updateNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000561s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.002740s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 195 LIMIT 1 [ RunTime:0.000877s ]
[ sql ] [ SQL ] SELECT `groups` FROM `note` WHERE  `id` = 195 LIMIT 1 [ RunTime:0.000389s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001450s ]
[ sql ] [ SQL ] SELECT `parent_id` FROM `groups` WHERE  `groups` = 'Python' LIMIT 1 [ RunTime:0.000395s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `id` = 2 LIMIT 1 [ RunTime:0.000421s ]
[ sql ] [ SQL ] UPDATE `note`  SET `id`=195,`p_id`=2,`title`='Python 基础知识\r',`content`='# Python 基础知识\r\n`python`\r\n\r\n[TOC]\r\n## 声明文件编码\r\n```\r\n# 指定脚本调用方式\r\n#!/usr/bin/env python\r\n\r\n# 配置 utf-8 编码\r\n# -*- coding: utf-8 -*-\r\n\r\n# 配置其他编码\r\n# -*- coding: <encoding-name> -*-\r\n\r\n# Vim 中还可以使用如下方式\r\n# vim:fileencoding=<encoding-name>\r\n```\r\n## 交互\r\n### 输入\r\n```\r\na = input(\'请输入：\')\r\nprint(a)\r\n```\r\n## 变量和简单数据类型\r\n### 变量\r\n尽量使用小写和下划线命名\r\n```\r\nresult_msg = \"Hello World!\"\r\nprint(result_msg)\r\n```\r\n### 字符串\r\n单双引号都行。\r\n#### 大小写转换\r\n```\r\nmsg = \'\"hello\" world!\'\r\nprint(msg.title())\r\n------------------\r\n\"Hello\" World!\r\n------------------\r\n# 函数\r\ntitle()：以首字母大写的方式显示每个单词\r\nupper()：全大写\r\nlower()：全小写\r\n```\r\n#### 去两端的特别字符 `strip()`\r\n>函数\r\n\r\nstrip()：去两端的字符\r\nlstrip()：去左端的字符\r\nrstrip()：去右端的字符\r\n```\r\nmsg = \" hel lo \"\r\n# 默认空格\r\nprint(\"-\" + msg.strip() + \"-\")\r\n--------------\r\n-hel lo-\r\n--------------\r\n======================================\r\n# 指定字符\r\nmsg = \"+hello+\"\r\nprint(msg.strip(\'+\'))\r\n--------------\r\nhello\r\n--------------\r\n```\r\n### 整数\r\n```\r\nnum1 = 3\r\nnum2 = 3\r\n# ** 表示乘方运算\r\nprint(num1 ** num2)\r\n------------------\r\n27\r\n------------------\r\n```\r\n### 类型转换\r\n```\r\nint(str)\r\nfloat(str)\r\nstr(int)\r\nstr(float)\r\n```\r\n## if 和 while\r\n### 条件\r\n```\r\nand/or\r\nin/not in\r\n```\r\n### if\r\n```\r\nscore = 65\r\nif score > 90:\r\n    print(\"A\")\r\nelif score > 60:\r\n    print(\"B\")\r\nelse:\r\n    print(\"F\")\r\n------------------------------\r\nlst = [1, 2, 3]\r\na = 2\r\nb = 4\r\n\r\nif a in lst:\r\n    print(\"T\")\r\nif b not in lst:\r\n    print(\"F\")\r\n```\r\n### while\r\n```\r\nwhile a < 5:\r\n    a += 1\r\n```\r\n\r\n## 列表\r\n### 基础操作\r\n```\r\n# 创建\r\nlist1 = [\'a\', \'b\', \'c\']\r\nlist2 = list(range(1, 5))   # [1, 2, 3, 4]\r\nlist3 = [4, 1, 3, 2]\r\n\r\n# 长度\r\nlength = len(list1)\r\n\r\n# 负数索引\r\nres = list1[-1]   # 返回倒数第一个元素\r\n\r\n# 增\r\nlist1.append(\'e\')\r\nlist1.insert(3, \'d\')  # 在下标 3，插入 4\r\n\r\n# 删\r\ndel list1[0]  # 下标\r\nnum1 = list1.pop()  # 最后一个元素\r\nnum2 = list1.pop(1)  # 有返回值，下标\r\nlist1.remove(\'a\')   # 指定值删除\r\n\r\n# 排序\r\nlist3.sort()\r\nlist4 = sorted(list3)\r\nlist3.reverse()  # 反转\r\n\r\n# 遍历\r\nfor s in list1:\r\n    print(s)\r\n\r\n# 统计\r\na = min(list3)\r\nb = max(list3)\r\nc = sum(list3)\r\n```\r\n### 切片\r\n```\r\nlist1 = [\'a\', \'b\', \'c\', \'d\', \'e\']\r\n\r\n# 利用切片复制列表\r\nlist2 = list1[:]\r\n\r\narr = list1[2:4]  # 下标 2 到下标 3\r\narr = list1[2:]  # 下标 2 到最后\r\narr = list1[-3:]  # 倒数第三个至最后\r\n\r\n# 遍历\r\nfor s in list1[:3]:  # 遍历前 3 个元素\r\n    print(s)\r\n```\r\n### 元组：列表中的元素不可变\r\n```\r\nlist1 = (\'a\', \'b\', \'c\', \'d\', \'e\')\r\n```\r\n\r\n\r\n\r\n## 字典\r\n```\r\n# 创建\r\nstudent = {\'name\': \'Tom\', \'age\': 18}\r\n# 增\r\nstudent[\'sex\'] = \'boy\'\r\n# 改\r\nstudent[\'age\'] = \'20\'\r\n# 删\r\ndel student[\'age\']\r\n\r\n# 遍历所有\r\nfor k, v in student.items():\r\n    print(k + \":\" + v)\r\n# 遍历键\r\nfor s in student.keys():\r\n    print(s)\r\n# 遍历值\r\nfor s in student.values():\r\n    print(s)\r\n```\r\n## 函数\r\n```\r\ndef get_age(name):\r\n    print(name)\r\n    return 23\r\n\r\nage = get_age(\"Tom\")\r\nprint(age)\r\n```\r\n## 类\r\n```\r\n# 定义类\r\nclass Person():\r\n    # 构造方法\r\n    def __init__(self, name, age):\r\n        self.name = name\r\n        self.age = age\r\n    def play_game(self):\r\n        print(self.name + \" play game!\")\r\np = Person(\'Tom\', 18)\r\np.play_game()\r\n# 继承\r\nclass Student(Person):\r\n    def __init__(self, name, age, school):\r\n        super().__init__(name, age)\r\n        self.school = school\r\n\r\n    @staticmethod\r\n    def static_fun():\r\n        print(\"静态方法\")\r\nstu = Student(\'Joy\', 15, \'QH\')\r\nprint(stu.school)\r\nStudent.static_fun()\r\n```\r\n## 文件\r\n```\r\nfile_name = \"F:\\\\1.txt\"\r\n\r\n# 读取整个文件\r\nwith open(file_name) as file:\r\n    content = file.read()\r\n    print(content)\r\n\r\n# 逐行读取\r\nwith open(file_name) as file:\r\n    for line in file:\r\n        print(line.rstrip() + \".\")\r\n\r\n# 读取文件行转为列表\r\nwith open(file_name) as file:\r\n    lines = file.readlines()\r\nprint(lines)\r\n\r\n# 写入，覆盖原内容\r\nwith open(file_name, \'w\') as file:\r\n    file.write(\"Hello\")\r\n\r\n# 写入，追加\r\nwith open(file_name, \'a\') as file:\r\n    file.write(\" World！\")\r\n```\r\n## 异常\r\n```\r\ntry:\r\n    print(5/0)\r\nexcept ZeroDivisionError:\r\n    print(\"除 0 啦\")\r\n    pass    # 抛出\r\nelse:   # 仅在 try 代码块成功执行时才执行\r\n    print(\"= ...\")\r\n```\r\n',`groups`='Python',`is_show`=0,`publish`=1,`summary`='一些基础语法，主要是列出与 java，C# 等的差异'  WHERE  `id` = 195 [ RunTime:0.000921s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Python' LIMIT 1 [ RunTime:0.001589s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=1  WHERE  `groups` = 'Python' [ RunTime:0.000464s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Python' LIMIT 1 [ RunTime:0.001461s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=1  WHERE  `groups` = 'Python' [ RunTime:0.000452s ]
---------------------------------------------------------------
[ 2018-11-17T17:22:51+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/195.html
[ info ] qingrang.top/daily/admin/note/shownote/id/195.html [运行时间：0.056983s][吞吐率：17.55req/s] [内存消耗：1,984.27kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/195.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '195',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000593s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001299s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 195 LIMIT 1 [ RunTime:0.000598s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000932s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000304s ]
---------------------------------------------------------------
[ 2018-11-17T17:23:12+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note
[ info ] qingrang.top/daily/admin/note [运行时间：0.078752s][吞吐率：12.70req/s] [内存消耗：2,242.39kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/login/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->notelst[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/notelst.html [ array (
  0 => 'stickList',
  1 => 'hide',
  2 => 'list',
  3 => 'list_new',
  4 => 'groups',
  5 => 'groups0',
  6 => 'groups1',
  7 => 'groups2',
  8 => 'count',
  9 => 'year',
  10 => 'default_num',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000868s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001557s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Personal'  AND `is_show` = 1 ORDER BY date desc,id desc [ RunTime:0.001818s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Personal' ORDER BY id desc LIMIT 5 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `config` [ RunTime:0.001246s ]
[ sql ] [ SQL ] SELECT * FROM `config` WHERE  `name` = 'hide' LIMIT 1 [ RunTime:0.000401s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` < 5 [ RunTime:0.000421s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000931s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000274s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 0  AND `id` <> 2 ORDER BY `groups` [ RunTime:0.000416s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `parent_id` = 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 2 ORDER BY `groups` [ RunTime:0.000381s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Default' LIMIT 1 [ RunTime:0.001125s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` LIMIT 1 [ RunTime:0.000226s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `yearlist` [ RunTime:0.000963s ]
[ sql ] [ SQL ] SELECT DISTINCT  `year` FROM `yearlist` ORDER BY year desc [ RunTime:0.000786s ]
---------------------------------------------------------------
[ 2018-11-17T17:24:42+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/208.html
[ info ] qingrang.top/daily/admin/note/editnote/id/208.html [运行时间：0.053628s][吞吐率：18.65req/s] [内存消耗：2,031.16kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '208',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000494s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001512s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 208 LIMIT 1 [ RunTime:0.000396s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000905s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000313s ]
---------------------------------------------------------------
[ 2018-11-17T17:24:46+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/208.html
[ info ] qingrang.top/daily/admin/note/shownote/id/208.html [运行时间：0.055580s][吞吐率：17.99req/s] [内存消耗：1,982.85kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '208',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000565s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001470s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 208 LIMIT 1 [ RunTime:0.000429s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001079s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000437s ]
---------------------------------------------------------------
[ 2018-11-17T17:35:35+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/247.html
[ info ] qingrang.top/daily/admin/note/shownote/id/247.html [运行时间：0.062976s][吞吐率：15.88req/s] [内存消耗：2,014.34kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=h8cljovj6g3q5h5e2u9lm1u521',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '247',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.001224s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.002677s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 247 LIMIT 1 [ RunTime:0.000827s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000999s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000345s ]
---------------------------------------------------------------
[ 2018-11-17T20:52:56+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/login/index.html
[ info ] qingrang.top/daily/admin/login/index.html [运行时间：0.041548s][吞吐率：24.07req/s] [内存消耗：1,339.90kb] [文件加载：47]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'login',
    2 => 'index',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ RUN ] app\admin\controller\Login->index[ /var/www/html/daily/application/admin/controller/Login.php ]
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/login/index.html [ array (
) ]
[ info ] [ LOG ] INIT File
---------------------------------------------------------------
[ 2018-11-17T20:55:11+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/login/index.html
[ info ] qingrang.top/daily/admin/login/index.html [运行时间：0.057525s][吞吐率：17.38req/s] [内存消耗：1,922.41kb] [文件加载：54]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'login',
    2 => 'index',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '8',
  'cache-control' => 'max-age=0',
  'origin' => 'http://qingrang.top',
  'upgrade-insecure-requests' => '1',
  'content-type' => 'application/x-www-form-urlencoded',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/login/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'pwd' => 'shao',
)
[ info ] [ RUN ] app\admin\controller\Login->index[ /var/www/html/daily/application/admin/controller/Login.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000880s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `admin` [ RunTime:0.001618s ]
[ sql ] [ SQL ] SELECT * FROM `admin` WHERE  `id` = 1 LIMIT 1 [ RunTime:0.000388s ]
---------------------------------------------------------------
[ 2018-11-17T20:55:12+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note
[ info ] qingrang.top/daily/admin/note [运行时间：0.084071s][吞吐率：11.89req/s] [内存消耗：2,242.39kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/login/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=18tp57kv0k7udj1p34ekbqqi92',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->notelst[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/notelst.html [ array (
  0 => 'stickList',
  1 => 'hide',
  2 => 'list',
  3 => 'list_new',
  4 => 'groups',
  5 => 'groups0',
  6 => 'groups1',
  7 => 'groups2',
  8 => 'count',
  9 => 'year',
  10 => 'default_num',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000614s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001472s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Personal'  AND `is_show` = 1 ORDER BY date desc,id desc [ RunTime:0.003404s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Personal' ORDER BY id desc LIMIT 5 [ RunTime:0.000668s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `config` [ RunTime:0.001060s ]
[ sql ] [ SQL ] SELECT * FROM `config` WHERE  `name` = 'hide' LIMIT 1 [ RunTime:0.000417s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` < 5 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000921s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000330s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 0  AND `id` <> 2 ORDER BY `groups` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `parent_id` = 1 [ RunTime:0.000408s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 2 ORDER BY `groups` [ RunTime:0.000391s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Default' LIMIT 1 [ RunTime:0.001319s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `yearlist` [ RunTime:0.001215s ]
[ sql ] [ SQL ] SELECT DISTINCT  `year` FROM `yearlist` ORDER BY year desc [ RunTime:0.000739s ]
---------------------------------------------------------------
[ 2018-11-17T20:55:20+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/login/index.html
[ info ] qingrang.top/daily/admin/login/index.html [运行时间：0.036903s][吞吐率：27.10req/s] [内存消耗：1,340.09kb] [文件加载：47]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'login',
    2 => 'index',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=18tp57kv0k7udj1p34ekbqqi92',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ RUN ] app\admin\controller\Login->index[ /var/www/html/daily/application/admin/controller/Login.php ]
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/login/index.html [ array (
) ]
[ info ] [ LOG ] INIT File
---------------------------------------------------------------
[ 2018-11-17T20:55:22+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note
[ info ] qingrang.top/daily/admin/note [运行时间：0.081120s][吞吐率：12.33req/s] [内存消耗：2,242.14kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/login/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=18tp57kv0k7udj1p34ekbqqi92',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->notelst[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/notelst.html [ array (
  0 => 'stickList',
  1 => 'hide',
  2 => 'list',
  3 => 'list_new',
  4 => 'groups',
  5 => 'groups0',
  6 => 'groups1',
  7 => 'groups2',
  8 => 'count',
  9 => 'year',
  10 => 'default_num',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.001087s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001595s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Personal'  AND `is_show` = 1 ORDER BY date desc,id desc [ RunTime:0.002009s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Personal' ORDER BY id desc LIMIT 5 [ RunTime:0.000580s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `config` [ RunTime:0.001115s ]
[ sql ] [ SQL ] SELECT * FROM `config` WHERE  `name` = 'hide' LIMIT 1 [ RunTime:0.000424s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` < 5 [ RunTime:0.000396s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001083s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000352s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 0  AND `id` <> 2 ORDER BY `groups` [ RunTime:0.000457s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `parent_id` = 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 2 ORDER BY `groups` [ RunTime:0.000381s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Default' LIMIT 1 [ RunTime:0.001379s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` LIMIT 1 [ RunTime:0.000232s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `yearlist` [ RunTime:0.001187s ]
[ sql ] [ SQL ] SELECT DISTINCT  `year` FROM `yearlist` ORDER BY year desc [ RunTime:0.000791s ]
---------------------------------------------------------------
[ 2018-11-17T21:14:37+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/login/index.html
[ info ] qingrang.top/daily/admin/login/index.html [运行时间：0.044719s][吞吐率：22.36req/s] [内存消耗：1,339.90kb] [文件加载：47]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'login',
    2 => 'index',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ RUN ] app\admin\controller\Login->index[ /var/www/html/daily/application/admin/controller/Login.php ]
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/login/index.html [ array (
) ]
[ info ] [ LOG ] INIT File
---------------------------------------------------------------
[ 2018-11-17T21:14:48+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/login/index.html
[ info ] qingrang.top/daily/admin/login/index.html [运行时间：0.057282s][吞吐率：17.46req/s] [内存消耗：1,922.41kb] [文件加载：54]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'login',
    2 => 'index',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '8',
  'cache-control' => 'max-age=0',
  'origin' => 'http://qingrang.top',
  'upgrade-insecure-requests' => '1',
  'content-type' => 'application/x-www-form-urlencoded',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/login/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'pwd' => 'shao',
)
[ info ] [ RUN ] app\admin\controller\Login->index[ /var/www/html/daily/application/admin/controller/Login.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000784s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `admin` [ RunTime:0.001394s ]
[ sql ] [ SQL ] SELECT * FROM `admin` WHERE  `id` = 1 LIMIT 1 [ RunTime:0.000329s ]
---------------------------------------------------------------
[ 2018-11-17T21:14:52+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note
[ info ] qingrang.top/daily/admin/note [运行时间：0.080688s][吞吐率：12.39req/s] [内存消耗：2,242.39kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/login/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=o6ks3fkf36d7gbp7k617en7d14',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->notelst[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/notelst.html [ array (
  0 => 'stickList',
  1 => 'hide',
  2 => 'list',
  3 => 'list_new',
  4 => 'groups',
  5 => 'groups0',
  6 => 'groups1',
  7 => 'groups2',
  8 => 'count',
  9 => 'year',
  10 => 'default_num',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000754s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001319s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Personal'  AND `is_show` = 1 ORDER BY date desc,id desc [ RunTime:0.001639s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Personal' ORDER BY id desc LIMIT 5 [ RunTime:0.000571s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `config` [ RunTime:0.000976s ]
[ sql ] [ SQL ] SELECT * FROM `config` WHERE  `name` = 'hide' LIMIT 1 [ RunTime:0.000390s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` < 5 [ RunTime:0.000408s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000985s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 0  AND `id` <> 2 ORDER BY `groups` [ RunTime:0.000456s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `parent_id` = 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 2 ORDER BY `groups` [ RunTime:0.000448s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Default' LIMIT 1 [ RunTime:0.001006s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` LIMIT 1 [ RunTime:0.000228s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `yearlist` [ RunTime:0.001064s ]
[ sql ] [ SQL ] SELECT DISTINCT  `year` FROM `yearlist` ORDER BY year desc [ RunTime:0.000645s ]
---------------------------------------------------------------
[ 2018-11-17T21:14:57+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/247.html
[ info ] qingrang.top/daily/admin/note/shownote/id/247.html [运行时间：0.054697s][吞吐率：18.28req/s] [内存消耗：2,014.34kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=o6ks3fkf36d7gbp7k617en7d14',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '247',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000491s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001596s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 247 LIMIT 1 [ RunTime:0.000563s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000940s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000328s ]
---------------------------------------------------------------
[ 2018-11-17T21:21:33+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/247.html
[ info ] qingrang.top/daily/admin/note/editnote/id/247.html [运行时间：0.071117s][吞吐率：14.06req/s] [内存消耗：2,062.13kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=o6ks3fkf36d7gbp7k617en7d14',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '247',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000832s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.002140s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 247 LIMIT 1 [ RunTime:0.000803s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001573s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000486s ]
---------------------------------------------------------------
[ 2018-11-17T21:41:59+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/savenote.html
[ info ] qingrang.top/daily/admin/note/savenote.html [运行时间：0.062208s][吞吐率：16.08req/s] [内存消耗：2,194.50kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'savenote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '41406',
  'accept' => 'text/plain, */*; q=0.01',
  'origin' => 'http://qingrang.top',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/247.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=o6ks3fkf36d7gbp7k617en7d14',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'ogroup' => 'Default',
  'context' => '# Spring
[TOC]

Spring 是一个基于 **IOC** 和 **AOP** 的结构 J2EE 系统的框架。
## IOC（控制反转）
### 概念
控制反转（IOC， Inversion of Control），是一个概念，是一种思想。指将传统上由程序代码直接操控的对象调用权交给容器，通过容器来实现对象的装配和管理。控制反转就是对对象控制权的转移，从程序代码本身反转到了外部容器。简单说就是创建对象由以前的程序员自己 new 构造方法来调用，变成了交由 Spring 创建对象。

IoC 是一个概念，是一种思想，其实现方式多种多样。当前比较流行的实现方式有两种：依赖注入和依赖查找。依赖注入方式应用更为广泛。
- 依赖查找： Dependency Lookup， DL，容器提供回调接口和上下文环境给组件，程序代
码则需要提供具体的查找方式。比较典型的是依赖于 JNDI 系统的查找。
- 依赖注入： Dependency Injection， DI，程序代码不做定位查询，这些工作由容器自行完成。简单地说就是拿到的对象的属性，已经被注入好相关值了，直接使用即可。

依赖注入 DI 是指程序运行过程中，若需要调用另一个对象协助时，无须在代码中创建被调用者，而是依赖于外部容器，由外部容器创建后传递给程序。Spring 的依赖注入对调用者与被调用者几乎没有任何要求，完全支持 POJO 之间依赖关系的管理。

依赖注入是目前最优秀的解耦方式。依赖注入让 Spring 的 Bean 之间以配置文件的方式组织在一起，而不是以硬编码的方式耦合在一起的。

>以获取对象的方式来进行比较

- 传统的方式

通过 new 关键字主动创建一个对象

相当于你自己去菜市场 new 了一只鸡，不过是生鸡，要自己拔毛，去内脏，再上花椒，酱油，烤制，经过各种工序之后，才可以食用。

- IOC方式

对象的生命周期由 Spring 来管理，直接从 Spring 那里去获取一个对象。IOC 是反转控制 (Inversion Of Control)的缩写，就像控制权从本来在自己手里，现在交给了 Spring。

相当于去馆子(Spring)点了一只鸡，交到你手上的时候，已经五味俱全，你就只管吃就行了。



### 第一个 Spring 程序
#### 传统的面向接口编程
经过以下例子可以看出，若接口（Service 层）变了，Test(View 层) 也的改，耦合度很高。

*ISomeService.java - 接口*
```
public interface ISomeService {
	void doSome();
}
```
*SomeServiceImpl.java - 实现类*
```
public class SomeServiceImpl implements ISomeService {
	@Override
	public void doSome() {
		System.out.println("执行doSome()方法");
	}
}
```
*Test.java - 测试*
```
@Test
public void test01() {
	ISomeService service = new SomeServiceImpl();
	service.doSome();
}
```
#### Spring 实现
*applicationContext.mxl - Spring 的配置文件*
```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- 注册 Service，Spring 底层实际是做了 SomeServiceImpl myService = new SomeServiceImpl(); -->
    <bean id="myService" class="top.qingrang.service.SomeServiceImpl"/>

</beans>
```
*Test.java - 测试*
```
@Test
public void test02() {
	// 创建容器对象，加载 Spring 配置文件，会从类路径下查找配置文件
	ApplicationContext ac = new ClassPathXmlApplicationContext("applicationContext.xml");
	ISomeService someService = (ISomeService)ac.getBean("myService");
	someService.doSome();
}
```

从以上代码中已经看不到 `SomeServiceImpl` 这个实现类了，就做到了解耦。

>FileSystemXmlApplicationContext

```
// 创建容器对象，加载 Spring 配置文件，会从项目的根下查找配置文件
ApplicationContext ac = new FileSystemXmlApplicationContext("applicationContext.xml");

// 创建容器对象，加载 Spring 配置文件，会从当前文件系统的 D 盘根目录下查找配置文件
ApplicationContext ac = new FileSystemXmlApplicationContext("d:/applicationContext.xml");
```

>BeanFactory 容器

*Test.java*
```
@Test
public void test05() {
	// 创建 BeanFactory 容器
	BeanFactory bf = new XmlBeanFactory(new ClassPathResource("applicationContext.xml"));
	ISomeService service = (ISomeService) bf.getBean("myService");
	service.doSome();
}
```

>ApplicationContext 与 BeanFactory 容器的区别

这两上容器对于其中 Bean 的创建时机不同：
1. ApplicationContext容器在进行初始化时，会将其中的所有Bean(对象)进行创建
 - 缺点：占用系统资源（内存、CPU等）
 - 优点：响应速度快
1. BeanFactory容器中的对象，在容器初始化时并不会被创建，而是在真正获取该对象时才被创建
 - 缺点：相对来说，响应速度慢
 - 优点：不多占用系统资源

### Bean 的装配
#### 动态工厂 Bean
*ISomeService.java - service 接口*
```
public interface ISomeService {
	void doSome();
}
```
*SomeServiceImpl.java - service 实现类*
```
public class SomeServiceImpl implements ISomeService {
	@Override
	public void doSome() {
		System.out.println("执行doSome()方法");
	}
}
```
*ServiceFactory.java - service 工厂*
```
public class ServiceFactory {
	public ISomeService getSomeService() {
		return new SomeServiceImpl();
	}
}
```
*applicationContext.mxl*
```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- 注册动态工厂 -->
    <bean id="factory" class="top.qingrang.ba02.ServiceFactory"/>

    <!-- 注册 Service：动态工厂 Bean -->
    <bean id="myService" factory-bean="factory" factory-method="getSomeService"/>
</beans>
```
*Test.java - 测试*
```
public void test02() {
	String resource = "top/qingrang/ba02/applicationContext.xml";
	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);
	ISomeService service = (ISomeService) ac.getBean("myService");
	service.doSome();
}
```
#### 静态工厂 Bean
*applicationContext.mxl*
```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- 注册 Service：静态工厂 Bean -->
    <bean id="myService" class="top.qingrang.ba03.ServiceFactory" factory-method="getSomeService"/>
</beans>
```
#### 容器中 Bean 的作用域
*applicationContext.mxl*
```
<bean id="myService" class="top.qingrang.ba04.SomeServiceImpl" scope="prototype"/>
```

当通过 Spring 容器创建一个 Bean 实例时，不仅可以完成 Bean 的实例化，还可以通过 scope 属性，为 Bean 指定特定的作用域。 Spring 支持 5 种作用域。
1. singleton： 单例模式。即在整个 Spring 容器中，使用 singleton 定义的 Bean 将是单例的，只有一个实例。该 Bean 是在容器被创建时即被装配好了。 默认为单例的。
1. prototype： 原型模式。即每次使用 getBean 方法获取的同一个 `<bean />` 的实例都是一个新的实例。Bean 实例是在代码中使用该 Bean 实例时才进行装配的。
1. request：对于每次 HTTP 请求，都将会产生一个不同的 Bean 实例。
1. session：对于每个不同的 HTTP session，都将产生一个不同的 Bean 实例。
1. global session：每个全局的 HTTP session 对应一个 Bean 实例。典型情况下，仅在使用 portlet 集群时有效，多个 Web 应用共享一个 session。一般应用中， global-session 与 session 是等同的。

对于 scope 的值 request、 session 与 global session， 只有在 Web 应用中使用 Spring 时，该作用域才有效。


#### Bean 后处理器
Bean 后处理器是一种特殊的 Bean，容器中所有的 Bean 在初始化时，均会自动执行该类的两个方法。由于该 Bean 是由其它 Bean 自动调用执行，不是程序员手工调用，故此 Bean 无须 id 属性。

需要做的是，在 Bean 后处理器类方法中，只要对 Bean 类与 Bean 类中的方法进行判断，就可实现对指定的 Bean 的指定方法进行功能扩展与增强。方法返回的 Bean 对象，即是增强过的对象。就是设计模式中的代理模式。

代码中需要自定义 Bean 后处理器类。该类就是实现了接口 BeanPostProcessor 的类。该接口中包含两个方法，分别在目标 Bean 初始化完毕之前与之后执行。它们的返回值为：功能被扩展或增强后的 Bean 对象。

Bean 初始化完毕有一个标志：一个方法将被执行。即当该方法被执行时，表示该 Bean 被初始化完毕。所以 Bean 后处理器中两个方法的执行，是在这个方法之前之后执行。 这个方法在后面将会讲到。

`public Object postProcessBeforeInitialization(Object bean, String beanId) throws BeansException`

该方法会在目标 Bean 初始化完毕之前由容器自动调用。

`public Object postProcessAfterInitialization(Object bean, String beanId) throws BeansException`

该方法会在目标 Bean 初始化完毕之后由容器自动调用。它们的参数是：第一个参数是系统即将初始化的 Bean 实例，第二个参数是该 Bean 实例的 id 属性值。若 Bean 没有 id 就是 name 属性值。

*ISomeService.java - service 接口*
```
public interface ISomeService {
	String doSome();
	String doOther();
}
```
*SomeServiceImpl.java - service 实现类*
```
public class SomeServiceImpl implements ISomeService {
	@Override
	public String doSome() {
		System.out.println("执行doSome()方法");
		return "doSome() - abc";
	}
	
	@Override
	public String doOther() {
		System.out.println("执行doOther()方法");
		return "doOther() - def";
	}
}
```
*MyBeanPostProcessor.java - 自定义 Bean 后处理器类*
```
public class MyBeanPostProcessor implements BeanPostProcessor {

	// bean：表示当前正在进行初始化的Bean对象
	// beanName：表示当前正在进行初始化的Bean对象的id
	@Override
	public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
		System.out.println("执行 ---- before() ---方法");
		return bean;
	}

	@Override
	public Object postProcessAfterInitialization(final Object bean, String beanName) throws BeansException {
		System.out.println("执行 ---- after() ---方法");
		//判断 SomeServiceImpl 对象
		if ("myService".equals(beanName)) {
			Object obj = Proxy.newProxyInstance(bean.getClass().getClassLoader(),
					bean.getClass().getInterfaces(),
					new InvocationHandler() {
						@Override
						public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
							Object invoke = method.invoke(bean, args);
							//判断具体方法
							if ("doSome".equals(method.getName())) {
								return ((String) invoke).toUpperCase();
							}
							return invoke;
						}
					});
			return obj;
		}
		return bean;
	}
}
```
*applicationContext.mxl*
```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- 注册 Service -->
    <bean id="myService" class="top.qingrang.ba05.SomeServiceImpl"/>
    <bean id="myService2" class="top.qingrang.ba05.SomeServiceImpl"/>

    <!-- 注册 Bean 后处理器 -->
    <bean class="top.qingrang.ba05.MyBeanPostProcessor"/>

</beans>
```
*Test.java - 测试*
```
public void test01() {
	String resource = "top/qingrang/ba05/applicationContext.xml";
	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);

	ISomeService service = (ISomeService) ac.getBean("myService");
	System.out.println(service.doSome());
	System.out.println(service.doOther());

	System.out.println("======================");

	ISomeService service2 = (ISomeService) ac.getBean("myService2");
	System.out.println(service2.doSome());
	System.out.println(service2.doOther());
}
```

*输出结果*
```
执行 ---- before() ---方法
执行 ---- after() ---方法
执行 ---- before() ---方法
执行 ---- after() ---方法
执行doSome()方法
DOSOME() - ABC
执行doOther()方法
doOther() - def
======================
执行doSome()方法
doSome() - abc
执行doOther()方法
doOther() - def
```


#### Bean 的生命周期
*ISomeService.java - service 接口*
```
public interface ISomeService {
	void doSome();
}
```
*SomeServiceImpl.java - service 实现类*
```
public class SomeServiceImpl implements ISomeService, BeanNameAware, BeanFactoryAware, InitializingBean, DisposableBean {
	private String adao;
	private String bdao;

	public void setAdao(String adao) {
		this.adao = adao;
		System.out.println("Step2：执行 setter");
	}

	public void setBdao(String bdao) {
		this.bdao = bdao;
		System.out.println("Step2：执行 setter");
	}

	public SomeServiceImpl() {
		System.out.println("Step1：执行无参构造器");
	}

	@Override
	public void doSome() {
		System.out.println("Step9：执行 doSome() 方法");
	}

	public void setUp() {
		System.out.println("Step7：初始化完毕之后");
	}

	public void tearDown() {
		System.out.println("Step11：销毁之前");
	}

	@Override
	public void setBeanName(String name) {
		System.out.println("Step3：获取到 bean 的 id = " + name);
	}

	@Override
	public void setBeanFactory(BeanFactory beanFactory) throws BeansException {
		System.out.println("Step4：获取到 BeanFactory 容器");
	}

	@Override
	public void afterPropertiesSet() throws Exception {
		System.out.println("Step6：Bean 初始化完毕了");
	}

	@Override
	public void destroy() throws Exception {
		System.out.println("Step10：实现接口的销毁之前");
	}
}
```
*MyBeanPostProcessor.java - Bean 后处理器*
```
public class MyBeanPostProcessor implements BeanPostProcessor {
	@Override
	public Object postProcessBeforeInitialization(Object bean, String beanName)
			throws BeansException {
		System.out.println("Step5：MyBeanPostProcessor - 执行 before() 方法");
		return bean;
	}

	@Override
	public Object postProcessAfterInitialization(final Object bean, String beanName)
			throws BeansException {
		System.out.println("Step8：MyBeanPostProcessor - 执行 after() 方法");
		return bean;
	}
}
```
*applicationContext.mxl*
```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- 注册Service -->
    <bean id="myService" class="top.qingrang.ba07.SomeServiceImpl"
    		init-method="setUp" destroy-method="tearDown">
    	<property name="adao" value="aaa"/>
    	<property name="bdao" value="bbb"/>
   	</bean>

   	<bean class="top.qingrang.ba07.MyBeanPostProcessor"/>
</beans>
```
*Test.java - 测试*
```
public void test01() {
	// 创建容器对象，加载Spring配置文件
	String resource = "top/qingrang/ba07/applicationContext.xml";
	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);
	ISomeService service = (ISomeService) ac.getBean("myService");
	service.doSome();
	// 对于销毁方法的执行，有两个条件：
	// 1)当前的Bean需要是singleton的
	// 2)要手工关闭容器
	((ClassPathXmlApplicationContext)ac).close();
}
```

*输出信息*
```
Step1：执行无参构造器
Step2：执行 setter
Step2：执行 setter
Step3：获取到 bean 的 id = myService
Step4：获取到 BeanFactory 容器
Step5：MyBeanPostProcessor - 执行 before() 方法
Step6：Bean 初始化完毕了
Step7：初始化完毕之后
Step8：MyBeanPostProcessor - 执行 after() 方法
Step9：执行 doSome() 方法
Step10：实现接口的销毁之前
Step11：销毁之前
```
### 基于 XML 的 DI
#### 注入分类
##### 设值注入
和 `setter` 方法有关系。

*School.java*
```
public class School {
	private String name;
	public void setName(String name) {
		this.name = name;
	}

	@Override
	public String toString() {
		return "School [name=" + name + "]";
	}
}
```

*Student.java*
```
public class Student {
	private String name;
	private int age;
	private School school;   // 对象属性，域属性
	
	public void setName(String name) {
		System.out.println("执行setName()");
		this.name = name;
	}
	public void setAge(int age) {
		System.out.println("执行setAge()");
		this.age = age;
	}
	public void setSchool(School school) {
		this.school = school;
	}

	@Override
	public String toString() {
		return "Student [name=" + name + ", age=" + age + ", school=" + school
				+ "]";
	}
}
```

*applicationContext.mxl*
```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- 注册 Student -->
    <bean id="myStudent" class="top.qingrang.di01.Student">
    	<property name="name" value="张三"/>
    	<property name="age" value="23"/>
        <!-- 对于对象的注入要用 ref -->
    	<property name="school" ref="mySchool"/>
    </bean>

    <!-- 注册 School -->
    <bean id="mySchool" class="top.qingrang.di01.School">
    	<property name="name" value="清华大学"/>
    </bean>

</beans>
```

*Test.java - 测试*
```
public void test01() {
	// 创建容器对象，加载Spring配置文件
	String resource = "top/qingrang/di01/applicationContext.xml";
	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);
	Student student = (Student) ac.getBean("myStudent");
	System.out.println(student);
}
```

*输出信息*
```
执行setName()
执行setAge()
Student [name=张三, age=23, school=School [name=清华大学]]
```
##### 构造注入
和 `setter` 方法没有关系，和构造方法有关系。



#### 集合属性注入
*School.java*
```
public class School {
	private String name;

	public void setName(String name) {
		this.name = name;
	}

	@Override
	public String toString() {
		return "School [name=" + name + "]";
	}
}
```
*Some.java*
```
public class Some {
	private School[] schools;
	private String[] myStrs;
	private List<String> myList;
	private Set<String> mySet;
	private Map<String, Object> myMap;
	private Properties myPros;

	public void setSchools(School[] schools) {
		this.schools = schools;
	}
	public void setMyStrs(String[] myStrs) {
		this.myStrs = myStrs;
	}
	public void setMyList(List<String> myList) {
		this.myList = myList;
	}
	public void setMySet(Set<String> mySet) {
		this.mySet = mySet;
	}
	public void setMyMap(Map<String, Object> myMap) {
		this.myMap = myMap;
	}
	public void setMyPros(Properties myPros) {
		this.myPros = myPros;
	}

	@Override
	public String toString() {
		return "Some [schools=" + Arrays.toString(schools) + ", myStrs="
				+ Arrays.toString(myStrs) + ", myList=" + myList + ", mySet="
				+ mySet + ", myMap=" + myMap + ", myPros=" + myPros + "]";
	}
}
```
*applicationContext.xml*
```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- 注册School -->
    <bean id="mySchool" class="top.qingrang.di05.School">
    	<property name="name" value="清华大学"/>
    </bean>
    <bean id="mySchool2" class="top.qingrang.di05.School">
    	<property name="name" value="北京大学"/>
    </bean>
    
    <!-- 注册Student -->
    <bean id="mySome" class="top.qingrang.di05.Some">
		<!-- 数组 -->
    	<property name="schools">
    		<array>
    			<ref bean="mySchool"/>
    			<ref bean="mySchool2"/>
    		</array>
    	</property>
		<!-- 数组：简写，带 ref 的若只有一个可以简写，多个不行 -->
		<property name="schools" value="mySchool"/>

		<!-- 数组 -->
    	<property name="myStrs">
    		<array>
    			<value>中国</value>
    			<value>北京</value>
    		</array>
    	</property>
		<!-- 数组：简写 -->
		<property name="myStrs" value="中国,北京"/>


		<!-- List<String> -->
    	<property name="myList">
    		<list>
    			<value>大兴</value>
    			<value>亦庄</value>
    		</list>
    	</property>
		<!-- List<String>：简写 -->
		<property name="myList" value="大兴,亦庄"/>

		<!-- Set<String> -->
    	<property name="mySet">
    		<set>
    			<value>大族企业湾</value>
    			<value>10号楼</value>
    		</set>
    	</property>
		<!-- Set<String>：简写 -->
		<property name="mySet" value="大族企业湾,10号楼"/>

		<!-- Map<String, Object>，Map 的键值都是 object -->
    	<property name="myMap">
    		<map>
    			<entry key="mobile" value="1234567"/>
    			<entry key="QQ" value="7654321"/>
    		</map>
    	</property>

		<!-- Properties，Properties 的键值都是字符串 -->
    	<property name="myPros">
    		<props>
    			<prop key="education">大学</prop>
    			<prop key="gender">男</prop>
    		</props>
    	</property>
    </bean>

</beans>
```
*MyTest.java*
```
@Test
public void test01() {
	// 创建容器对象，加载Spring配置文件
	String resource = "top/qingrang/di05/applicationContext.xml";
	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);
	Some some = (Some) ac.getBean("mySome");
	System.out.println(some);
}
```',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->saveNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000658s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001447s ]
[ sql ] [ SQL ] UPDATE `note`  SET `title`='Spring',`content`='# Spring\n[TOC]\n\nSpring 是一个基于 **IOC** 和 **AOP** 的结构 J2EE 系统的框架。\n## IOC（控制反转）\n### 概念\n控制反转（IOC， Inversion of Control），是一个概念，是一种思想。指将传统上由程序代码直接操控的对象调用权交给容器，通过容器来实现对象的装配和管理。控制反转就是对对象控制权的转移，从程序代码本身反转到了外部容器。简单说就是创建对象由以前的程序员自己 new 构造方法来调用，变成了交由 Spring 创建对象。\n\nIoC 是一个概念，是一种思想，其实现方式多种多样。当前比较流行的实现方式有两种：依赖注入和依赖查找。依赖注入方式应用更为广泛。\n- 依赖查找： Dependency Lookup， DL，容器提供回调接口和上下文环境给组件，程序代\n码则需要提供具体的查找方式。比较典型的是依赖于 JNDI 系统的查找。\n- 依赖注入： Dependency Injection， DI，程序代码不做定位查询，这些工作由容器自行完成。简单地说就是拿到的对象的属性，已经被注入好相关值了，直接使用即可。\n\n依赖注入 DI 是指程序运行过程中，若需要调用另一个对象协助时，无须在代码中创建被调用者，而是依赖于外部容器，由外部容器创建后传递给程序。Spring 的依赖注入对调用者与被调用者几乎没有任何要求，完全支持 POJO 之间依赖关系的管理。\n\n依赖注入是目前最优秀的解耦方式。依赖注入让 Spring 的 Bean 之间以配置文件的方式组织在一起，而不是以硬编码的方式耦合在一起的。\n\n>以获取对象的方式来进行比较\n\n- 传统的方式\n\n通过 new 关键字主动创建一个对象\n\n相当于你自己去菜市场 new 了一只鸡，不过是生鸡，要自己拔毛，去内脏，再上花椒，酱油，烤制，经过各种工序之后，才可以食用。\n\n- IOC方式\n\n对象的生命周期由 Spring 来管理，直接从 Spring 那里去获取一个对象。IOC 是反转控制 (Inversion Of Control)的缩写，就像控制权从本来在自己手里，现在交给了 Spring。\n\n相当于去馆子(Spring)点了一只鸡，交到你手上的时候，已经五味俱全，你就只管吃就行了。\n\n\n\n### 第一个 Spring 程序\n#### 传统的面向接口编程\n经过以下例子可以看出，若接口（Service 层）变了，Test(View 层) 也的改，耦合度很高。\n\n*ISomeService.java - 接口*\n```\npublic interface ISomeService {\n	void doSome();\n}\n```\n*SomeServiceImpl.java - 实现类*\n```\npublic class SomeServiceImpl implements ISomeService {\n	@Override\n	public void doSome() {\n		System.out.println(\"执行doSome()方法\");\n	}\n}\n```\n*Test.java - 测试*\n```\n@Test\npublic void test01() {\n	ISomeService service = new SomeServiceImpl();\n	service.doSome();\n}\n```\n#### Spring 实现\n*applicationContext.mxl - Spring 的配置文件*\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"\n        http://www.springframework.org/schema/beans \n        http://www.springframework.org/schema/beans/spring-beans.xsd\">\n\n    <!-- 注册 Service，Spring 底层实际是做了 SomeServiceImpl myService = new SomeServiceImpl(); -->\n    <bean id=\"myService\" class=\"top.qingrang.service.SomeServiceImpl\"/>\n\n</beans>\n```\n*Test.java - 测试*\n```\n@Test\npublic void test02() {\n	// 创建容器对象，加载 Spring 配置文件，会从类路径下查找配置文件\n	ApplicationContext ac = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\n	ISomeService someService = (ISomeService)ac.getBean(\"myService\");\n	someService.doSome();\n}\n```\n\n从以上代码中已经看不到 `SomeServiceImpl` 这个实现类了，就做到了解耦。\n\n>FileSystemXmlApplicationContext\n\n```\n// 创建容器对象，加载 Spring 配置文件，会从项目的根下查找配置文件\nApplicationContext ac = new FileSystemXmlApplicationContext(\"applicationContext.xml\");\n\n// 创建容器对象，加载 Spring 配置文件，会从当前文件系统的 D 盘根目录下查找配置文件\nApplicationContext ac = new FileSystemXmlApplicationContext(\"d:/applicationContext.xml\");\n```\n\n>BeanFactory 容器\n\n*Test.java*\n```\n@Test\npublic void test05() {\n	// 创建 BeanFactory 容器\n	BeanFactory bf = new XmlBeanFactory(new ClassPathResource(\"applicationContext.xml\"));\n	ISomeService service = (ISomeService) bf.getBean(\"myService\");\n	service.doSome();\n}\n```\n\n>ApplicationContext 与 BeanFactory 容器的区别\n\n这两上容器对于其中 Bean 的创建时机不同：\n1. ApplicationContext容器在进行初始化时，会将其中的所有Bean(对象)进行创建\n - 缺点：占用系统资源（内存、CPU等）\n - 优点：响应速度快\n1. BeanFactory容器中的对象，在容器初始化时并不会被创建，而是在真正获取该对象时才被创建\n - 缺点：相对来说，响应速度慢\n - 优点：不多占用系统资源\n\n### Bean 的装配\n#### 动态工厂 Bean\n*ISomeService.java - service 接口*\n```\npublic interface ISomeService {\n	void doSome();\n}\n```\n*SomeServiceImpl.java - service 实现类*\n```\npublic class SomeServiceImpl implements ISomeService {\n	@Override\n	public void doSome() {\n		System.out.println(\"执行doSome()方法\");\n	}\n}\n```\n*ServiceFactory.java - service 工厂*\n```\npublic class ServiceFactory {\n	public ISomeService getSomeService() {\n		return new SomeServiceImpl();\n	}\n}\n```\n*applicationContext.mxl*\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"\n        http://www.springframework.org/schema/beans \n        http://www.springframework.org/schema/beans/spring-beans.xsd\">\n\n    <!-- 注册动态工厂 -->\n    <bean id=\"factory\" class=\"top.qingrang.ba02.ServiceFactory\"/>\n\n    <!-- 注册 Service：动态工厂 Bean -->\n    <bean id=\"myService\" factory-bean=\"factory\" factory-method=\"getSomeService\"/>\n</beans>\n```\n*Test.java - 测试*\n```\npublic void test02() {\n	String resource = \"top/qingrang/ba02/applicationContext.xml\";\n	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);\n	ISomeService service = (ISomeService) ac.getBean(\"myService\");\n	service.doSome();\n}\n```\n#### 静态工厂 Bean\n*applicationContext.mxl*\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"\n        http://www.springframework.org/schema/beans \n        http://www.springframework.org/schema/beans/spring-beans.xsd\">\n\n    <!-- 注册 Service：静态工厂 Bean -->\n    <bean id=\"myService\" class=\"top.qingrang.ba03.ServiceFactory\" factory-method=\"getSomeService\"/>\n</beans>\n```\n#### 容器中 Bean 的作用域\n*applicationContext.mxl*\n```\n<bean id=\"myService\" class=\"top.qingrang.ba04.SomeServiceImpl\" scope=\"prototype\"/>\n```\n\n当通过 Spring 容器创建一个 Bean 实例时，不仅可以完成 Bean 的实例化，还可以通过 scope 属性，为 Bean 指定特定的作用域。 Spring 支持 5 种作用域。\n1. singleton： 单例模式。即在整个 Spring 容器中，使用 singleton 定义的 Bean 将是单例的，只有一个实例。该 Bean 是在容器被创建时即被装配好了。 默认为单例的。\n1. prototype： 原型模式。即每次使用 getBean 方法获取的同一个 `<bean />` 的实例都是一个新的实例。Bean 实例是在代码中使用该 Bean 实例时才进行装配的。\n1. request：对于每次 HTTP 请求，都将会产生一个不同的 Bean 实例。\n1. session：对于每个不同的 HTTP session，都将产生一个不同的 Bean 实例。\n1. global session：每个全局的 HTTP session 对应一个 Bean 实例。典型情况下，仅在使用 portlet 集群时有效，多个 Web 应用共享一个 session。一般应用中， global-session 与 session 是等同的。\n\n对于 scope 的值 request、 session 与 global session， 只有在 Web 应用中使用 Spring 时，该作用域才有效。\n\n\n#### Bean 后处理器\nBean 后处理器是一种特殊的 Bean，容器中所有的 Bean 在初始化时，均会自动执行该类的两个方法。由于该 Bean 是由其它 Bean 自动调用执行，不是程序员手工调用，故此 Bean 无须 id 属性。\n\n需要做的是，在 Bean 后处理器类方法中，只要对 Bean 类与 Bean 类中的方法进行判断，就可实现对指定的 Bean 的指定方法进行功能扩展与增强。方法返回的 Bean 对象，即是增强过的对象。就是设计模式中的代理模式。\n\n代码中需要自定义 Bean 后处理器类。该类就是实现了接口 BeanPostProcessor 的类。该接口中包含两个方法，分别在目标 Bean 初始化完毕之前与之后执行。它们的返回值为：功能被扩展或增强后的 Bean 对象。\n\nBean 初始化完毕有一个标志：一个方法将被执行。即当该方法被执行时，表示该 Bean 被初始化完毕。所以 Bean 后处理器中两个方法的执行，是在这个方法之前之后执行。 这个方法在后面将会讲到。\n\n`public Object postProcessBeforeInitialization(Object bean, String beanId) throws BeansException`\n\n该方法会在目标 Bean 初始化完毕之前由容器自动调用。\n\n`public Object postProcessAfterInitialization(Object bean, String beanId) throws BeansException`\n\n该方法会在目标 Bean 初始化完毕之后由容器自动调用。它们的参数是：第一个参数是系统即将初始化的 Bean 实例，第二个参数是该 Bean 实例的 id 属性值。若 Bean 没有 id 就是 name 属性值。\n\n*ISomeService.java - service 接口*\n```\npublic interface ISomeService {\n	String doSome();\n	String doOther();\n}\n```\n*SomeServiceImpl.java - service 实现类*\n```\npublic class SomeServiceImpl implements ISomeService {\n	@Override\n	public String doSome() {\n		System.out.println(\"执行doSome()方法\");\n		return \"doSome() - abc\";\n	}\n	\n	@Override\n	public String doOther() {\n		System.out.println(\"执行doOther()方法\");\n		return \"doOther() - def\";\n	}\n}\n```\n*MyBeanPostProcessor.java - 自定义 Bean 后处理器类*\n```\npublic class MyBeanPostProcessor implements BeanPostProcessor {\n\n	// bean：表示当前正在进行初始化的Bean对象\n	// beanName：表示当前正在进行初始化的Bean对象的id\n	@Override\n	public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\n		System.out.println(\"执行 ---- before() ---方法\");\n		return bean;\n	}\n\n	@Override\n	public Object postProcessAfterInitialization(final Object bean, String beanName) throws BeansException {\n		System.out.println(\"执行 ---- after() ---方法\");\n		//判断 SomeServiceImpl 对象\n		if (\"myService\".equals(beanName)) {\n			Object obj = Proxy.newProxyInstance(bean.getClass().getClassLoader(),\n					bean.getClass().getInterfaces(),\n					new InvocationHandler() {\n						@Override\n						public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n							Object invoke = method.invoke(bean, args);\n							//判断具体方法\n							if (\"doSome\".equals(method.getName())) {\n								return ((String) invoke).toUpperCase();\n							}\n							return invoke;\n						}\n					});\n			return obj;\n		}\n		return bean;\n	}\n}\n```\n*applicationContext.mxl*\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"\n        http://www.springframework.org/schema/beans \n        http://www.springframework.org/schema/beans/spring-beans.xsd\">\n\n    <!-- 注册 Service -->\n    <bean id=\"myService\" class=\"top.qingrang.ba05.SomeServiceImpl\"/>\n    <bean id=\"myService2\" class=\"top.qingrang.ba05.SomeServiceImpl\"/>\n\n    <!-- 注册 Bean 后处理器 -->\n    <bean class=\"top.qingrang.ba05.MyBeanPostProcessor\"/>\n\n</beans>\n```\n*Test.java - 测试*\n```\npublic void test01() {\n	String resource = \"top/qingrang/ba05/applicationContext.xml\";\n	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);\n\n	ISomeService service = (ISomeService) ac.getBean(\"myService\");\n	System.out.println(service.doSome());\n	System.out.println(service.doOther());\n\n	System.out.println(\"======================\");\n\n	ISomeService service2 = (ISomeService) ac.getBean(\"myService2\");\n	System.out.println(service2.doSome());\n	System.out.println(service2.doOther());\n}\n```\n\n*输出结果*\n```\n执行 ---- before() ---方法\n执行 ---- after() ---方法\n执行 ---- before() ---方法\n执行 ---- after() ---方法\n执行doSome()方法\nDOSOME() - ABC\n执行doOther()方法\ndoOther() - def\n======================\n执行doSome()方法\ndoSome() - abc\n执行doOther()方法\ndoOther() - def\n```\n\n\n#### Bean 的生命周期\n*ISomeService.java - service 接口*\n```\npublic interface ISomeService {\n	void doSome();\n}\n```\n*SomeServiceImpl.java - service 实现类*\n```\npublic class SomeServiceImpl implements ISomeService, BeanNameAware, BeanFactoryAware, InitializingBean, DisposableBean {\n	private String adao;\n	private String bdao;\n\n	public void setAdao(String adao) {\n		this.adao = adao;\n		System.out.println(\"Step2：执行 setter\");\n	}\n\n	public void setBdao(String bdao) {\n		this.bdao = bdao;\n		System.out.println(\"Step2：执行 setter\");\n	}\n\n	public SomeServiceImpl() {\n		System.out.println(\"Step1：执行无参构造器\");\n	}\n\n	@Override\n	public void doSome() {\n		System.out.println(\"Step9：执行 doSome() 方法\");\n	}\n\n	public void setUp() {\n		System.out.println(\"Step7：初始化完毕之后\");\n	}\n\n	public void tearDown() {\n		System.out.println(\"Step11：销毁之前\");\n	}\n\n	@Override\n	public void setBeanName(String name) {\n		System.out.println(\"Step3：获取到 bean 的 id = \" + name);\n	}\n\n	@Override\n	public void setBeanFactory(BeanFactory beanFactory) throws BeansException {\n		System.out.println(\"Step4：获取到 BeanFactory 容器\");\n	}\n\n	@Override\n	public void afterPropertiesSet() throws Exception {\n		System.out.println(\"Step6：Bean 初始化完毕了\");\n	}\n\n	@Override\n	public void destroy() throws Exception {\n		System.out.println(\"Step10：实现接口的销毁之前\");\n	}\n}\n```\n*MyBeanPostProcessor.java - Bean 后处理器*\n```\npublic class MyBeanPostProcessor implements BeanPostProcessor {\n	@Override\n	public Object postProcessBeforeInitialization(Object bean, String beanName)\n			throws BeansException {\n		System.out.println(\"Step5：MyBeanPostProcessor - 执行 before() 方法\");\n		return bean;\n	}\n\n	@Override\n	public Object postProcessAfterInitialization(final Object bean, String beanName)\n			throws BeansException {\n		System.out.println(\"Step8：MyBeanPostProcessor - 执行 after() 方法\");\n		return bean;\n	}\n}\n```\n*applicationContext.mxl*\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"\n        http://www.springframework.org/schema/beans \n        http://www.springframework.org/schema/beans/spring-beans.xsd\">\n\n    <!-- 注册Service -->\n    <bean id=\"myService\" class=\"top.qingrang.ba07.SomeServiceImpl\"\n    		init-method=\"setUp\" destroy-method=\"tearDown\">\n    	<property name=\"adao\" value=\"aaa\"/>\n    	<property name=\"bdao\" value=\"bbb\"/>\n   	</bean>\n\n   	<bean class=\"top.qingrang.ba07.MyBeanPostProcessor\"/>\n</beans>\n```\n*Test.java - 测试*\n```\npublic void test01() {\n	// 创建容器对象，加载Spring配置文件\n	String resource = \"top/qingrang/ba07/applicationContext.xml\";\n	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);\n	ISomeService service = (ISomeService) ac.getBean(\"myService\");\n	service.doSome();\n	// 对于销毁方法的执行，有两个条件：\n	// 1)当前的Bean需要是singleton的\n	// 2)要手工关闭容器\n	((ClassPathXmlApplicationContext)ac).close();\n}\n```\n\n*输出信息*\n```\nStep1：执行无参构造器\nStep2：执行 setter\nStep2：执行 setter\nStep3：获取到 bean 的 id = myService\nStep4：获取到 BeanFactory 容器\nStep5：MyBeanPostProcessor - 执行 before() 方法\nStep6：Bean 初始化完毕了\nStep7：初始化完毕之后\nStep8：MyBeanPostProcessor - 执行 after() 方法\nStep9：执行 doSome() 方法\nStep10：实现接口的销毁之前\nStep11：销毁之前\n```\n### 基于 XML 的 DI\n#### 注入分类\n##### 设值注入\n和 `setter` 方法有关系。\n\n*School.java*\n```\npublic class School {\n	private String name;\n	public void setName(String name) {\n		this.name = name;\n	}\n\n	@Override\n	public String toString() {\n		return \"School [name=\" + name + \"]\";\n	}\n}\n```\n\n*Student.java*\n```\npublic class Student {\n	private String name;\n	private int age;\n	private School school;   // 对象属性，域属性\n	\n	public void setName(String name) {\n		System.out.println(\"执行setName()\");\n		this.name = name;\n	}\n	public void setAge(int age) {\n		System.out.println(\"执行setAge()\");\n		this.age = age;\n	}\n	public void setSchool(School school) {\n		this.school = school;\n	}\n\n	@Override\n	public String toString() {\n		return \"Student [name=\" + name + \", age=\" + age + \", school=\" + school\n				+ \"]\";\n	}\n}\n```\n\n*applicationContext.mxl*\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"\n        http://www.springframework.org/schema/beans \n        http://www.springframework.org/schema/beans/spring-beans.xsd\">\n\n    <!-- 注册 Student -->\n    <bean id=\"myStudent\" class=\"top.qingrang.di01.Student\">\n    	<property name=\"name\" value=\"张三\"/>\n    	<property name=\"age\" value=\"23\"/>\n        <!-- 对于对象的注入要用 ref -->\n    	<property name=\"school\" ref=\"mySchool\"/>\n    </bean>\n\n    <!-- 注册 School -->\n    <bean id=\"mySchool\" class=\"top.qingrang.di01.School\">\n    	<property name=\"name\" value=\"清华大学\"/>\n    </bean>\n\n</beans>\n```\n\n*Test.java - 测试*\n```\npublic void test01() {\n	// 创建容器对象，加载Spring配置文件\n	String resource = \"top/qingrang/di01/applicationContext.xml\";\n	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);\n	Student student = (Student) ac.getBean(\"myStudent\");\n	System.out.println(student);\n}\n```\n\n*输出信息*\n```\n执行setName()\n执行setAge()\nStudent [name=张三, age=23, school=School [name=清华大学]]\n```\n##### 构造注入\n和 `setter` 方法没有关系，和构造方法有关系。\n\n\n\n#### 集合属性注入\n*School.java*\n```\npublic class School {\n	private String name;\n\n	public void setName(String name) {\n		this.name = name;\n	}\n\n	@Override\n	public String toString() {\n		return \"School [name=\" + name + \"]\";\n	}\n}\n```\n*Some.java*\n```\npublic class Some {\n	private School[] schools;\n	private String[] myStrs;\n	private List<String> myList;\n	private Set<String> mySet;\n	private Map<String, Object> myMap;\n	private Properties myPros;\n\n	public void setSchools(School[] schools) {\n		this.schools = schools;\n	}\n	public void setMyStrs(String[] myStrs) {\n		this.myStrs = myStrs;\n	}\n	public void setMyList(List<String> myList) {\n		this.myList = myList;\n	}\n	public void setMySet(Set<String> mySet) {\n		this.mySet = mySet;\n	}\n	public void setMyMap(Map<String, Object> myMap) {\n		this.myMap = myMap;\n	}\n	public void setMyPros(Properties myPros) {\n		this.myPros = myPros;\n	}\n\n	@Override\n	public String toString() {\n		return \"Some [schools=\" + Arrays.toString(schools) + \", myStrs=\"\n				+ Arrays.toString(myStrs) + \", myList=\" + myList + \", mySet=\"\n				+ mySet + \", myMap=\" + myMap + \", myPros=\" + myPros + \"]\";\n	}\n}\n```\n*applicationContext.xml*\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"\n        http://www.springframework.org/schema/beans \n        http://www.springframework.org/schema/beans/spring-beans.xsd\">\n\n    <!-- 注册School -->\n    <bean id=\"mySchool\" class=\"top.qingrang.di05.School\">\n    	<property name=\"name\" value=\"清华大学\"/>\n    </bean>\n    <bean id=\"mySchool2\" class=\"top.qingrang.di05.School\">\n    	<property name=\"name\" value=\"北京大学\"/>\n    </bean>\n    \n    <!-- 注册Student -->\n    <bean id=\"mySome\" class=\"top.qingrang.di05.Some\">\n		<!-- 数组 -->\n    	<property name=\"schools\">\n    		<array>\n    			<ref bean=\"mySchool\"/>\n    			<ref bean=\"mySchool2\"/>\n    		</array>\n    	</property>\n		<!-- 数组：简写，带 ref 的若只有一个可以简写，多个不行 -->\n		<property name=\"schools\" value=\"mySchool\"/>\n\n		<!-- 数组 -->\n    	<property name=\"myStrs\">\n    		<array>\n    			<value>中国</value>\n    			<value>北京</value>\n    		</array>\n    	</property>\n		<!-- 数组：简写 -->\n		<property name=\"myStrs\" value=\"中国,北京\"/>\n\n\n		<!-- List<String> -->\n    	<property name=\"myList\">\n    		<list>\n    			<value>大兴</value>\n    			<value>亦庄</value>\n    		</list>\n    	</property>\n		<!-- List<String>：简写 -->\n		<property name=\"myList\" value=\"大兴,亦庄\"/>\n\n		<!-- Set<String> -->\n    	<property name=\"mySet\">\n    		<set>\n    			<value>大族企业湾</value>\n    			<value>10号楼</value>\n    		</set>\n    	</property>\n		<!-- Set<String>：简写 -->\n		<property name=\"mySet\" value=\"大族企业湾,10号楼\"/>\n\n		<!-- Map<String, Object>，Map 的键值都是 object -->\n    	<property name=\"myMap\">\n    		<map>\n    			<entry key=\"mobile\" value=\"1234567\"/>\n    			<entry key=\"QQ\" value=\"7654321\"/>\n    		</map>\n    	</property>\n\n		<!-- Properties，Properties 的键值都是字符串 -->\n    	<property name=\"myPros\">\n    		<props>\n    			<prop key=\"education\">大学</prop>\n    			<prop key=\"gender\">男</prop>\n    		</props>\n    	</property>\n    </bean>\n\n</beans>\n```\n*MyTest.java*\n```\n@Test\npublic void test01() {\n	// 创建容器对象，加载Spring配置文件\n	String resource = \"top/qingrang/di05/applicationContext.xml\";\n	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);\n	Some some = (Some) ac.getBean(\"mySome\");\n	System.out.println(some);\n}\n```',`groups`='Default',`p_id`=1  WHERE  `id` = 1 [ RunTime:0.001320s ]
---------------------------------------------------------------
[ 2018-11-17T22:01:12+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/updatenote/id/247.html
[ info ] qingrang.top/daily/admin/note/updatenote/id/247.html [运行时间：0.070566s][吞吐率：14.17req/s] [内存消耗：2,209.05kb] [文件加载：58]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'updatenote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '44815',
  'cache-control' => 'max-age=0',
  'origin' => 'http://qingrang.top',
  'upgrade-insecure-requests' => '1',
  'content-type' => 'application/x-www-form-urlencoded',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/247.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=o6ks3fkf36d7gbp7k617en7d14',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'summary' => '',
  'content' => '# Spring
[TOC]

Spring 是一个基于 **IOC** 和 **AOP** 的结构 J2EE 系统的框架。
## IOC（控制反转）
### 概念
控制反转（IOC， Inversion of Control），是一个概念，是一种思想。指将传统上由程序代码直接操控的对象调用权交给容器，通过容器来实现对象的装配和管理。控制反转就是对对象控制权的转移，从程序代码本身反转到了外部容器。简单说就是创建对象由以前的程序员自己 new 构造方法来调用，变成了交由 Spring 创建对象。

IoC 是一个概念，是一种思想，其实现方式多种多样。当前比较流行的实现方式有两种：依赖注入和依赖查找。依赖注入方式应用更为广泛。
- 依赖查找： Dependency Lookup， DL，容器提供回调接口和上下文环境给组件，程序代
码则需要提供具体的查找方式。比较典型的是依赖于 JNDI 系统的查找。
- 依赖注入： Dependency Injection， DI，程序代码不做定位查询，这些工作由容器自行完成。简单地说就是拿到的对象的属性，已经被注入好相关值了，直接使用即可。

依赖注入 DI 是指程序运行过程中，若需要调用另一个对象协助时，无须在代码中创建被调用者，而是依赖于外部容器，由外部容器创建后传递给程序。Spring 的依赖注入对调用者与被调用者几乎没有任何要求，完全支持 POJO 之间依赖关系的管理。

依赖注入是目前最优秀的解耦方式。依赖注入让 Spring 的 Bean 之间以配置文件的方式组织在一起，而不是以硬编码的方式耦合在一起的。

>以获取对象的方式来进行比较

- 传统的方式

通过 new 关键字主动创建一个对象

相当于你自己去菜市场 new 了一只鸡，不过是生鸡，要自己拔毛，去内脏，再上花椒，酱油，烤制，经过各种工序之后，才可以食用。

- IOC方式

对象的生命周期由 Spring 来管理，直接从 Spring 那里去获取一个对象。IOC 是反转控制 (Inversion Of Control)的缩写，就像控制权从本来在自己手里，现在交给了 Spring。

相当于去馆子(Spring)点了一只鸡，交到你手上的时候，已经五味俱全，你就只管吃就行了。



### 第一个 Spring 程序
#### 传统的面向接口编程
经过以下例子可以看出，若接口（Service 层）变了，Test(View 层) 也的改，耦合度很高。

*ISomeService.java - 接口*
```
public interface ISomeService {
	void doSome();
}
```
*SomeServiceImpl.java - 实现类*
```
public class SomeServiceImpl implements ISomeService {
	@Override
	public void doSome() {
		System.out.println("执行doSome()方法");
	}
}
```
*Test.java - 测试*
```
@Test
public void test01() {
	ISomeService service = new SomeServiceImpl();
	service.doSome();
}
```
#### Spring 实现
*applicationContext.mxl - Spring 的配置文件*
```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- 注册 Service，Spring 底层实际是做了 SomeServiceImpl myService = new SomeServiceImpl(); -->
    <bean id="myService" class="top.qingrang.service.SomeServiceImpl"/>

</beans>
```
*Test.java - 测试*
```
@Test
public void test02() {
	// 创建容器对象，加载 Spring 配置文件，会从类路径下查找配置文件
	ApplicationContext ac = new ClassPathXmlApplicationContext("applicationContext.xml");
	ISomeService someService = (ISomeService)ac.getBean("myService");
	someService.doSome();
}
```

从以上代码中已经看不到 `SomeServiceImpl` 这个实现类了，就做到了解耦。

>FileSystemXmlApplicationContext

```
// 创建容器对象，加载 Spring 配置文件，会从项目的根下查找配置文件
ApplicationContext ac = new FileSystemXmlApplicationContext("applicationContext.xml");

// 创建容器对象，加载 Spring 配置文件，会从当前文件系统的 D 盘根目录下查找配置文件
ApplicationContext ac = new FileSystemXmlApplicationContext("d:/applicationContext.xml");
```

>BeanFactory 容器

*Test.java*
```
@Test
public void test05() {
	// 创建 BeanFactory 容器
	BeanFactory bf = new XmlBeanFactory(new ClassPathResource("applicationContext.xml"));
	ISomeService service = (ISomeService) bf.getBean("myService");
	service.doSome();
}
```

>ApplicationContext 与 BeanFactory 容器的区别

这两上容器对于其中 Bean 的创建时机不同：
1. ApplicationContext容器在进行初始化时，会将其中的所有Bean(对象)进行创建
 - 缺点：占用系统资源（内存、CPU等）
 - 优点：响应速度快
1. BeanFactory容器中的对象，在容器初始化时并不会被创建，而是在真正获取该对象时才被创建
 - 缺点：相对来说，响应速度慢
 - 优点：不多占用系统资源

### Bean 的装配
#### 动态工厂 Bean
*ISomeService.java - service 接口*
```
public interface ISomeService {
	void doSome();
}
```
*SomeServiceImpl.java - service 实现类*
```
public class SomeServiceImpl implements ISomeService {
	@Override
	public void doSome() {
		System.out.println("执行doSome()方法");
	}
}
```
*ServiceFactory.java - service 工厂*
```
public class ServiceFactory {
	public ISomeService getSomeService() {
		return new SomeServiceImpl();
	}
}
```
*applicationContext.mxl*
```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- 注册动态工厂 -->
    <bean id="factory" class="top.qingrang.ba02.ServiceFactory"/>

    <!-- 注册 Service：动态工厂 Bean -->
    <bean id="myService" factory-bean="factory" factory-method="getSomeService"/>
</beans>
```
*Test.java - 测试*
```
public void test02() {
	String resource = "top/qingrang/ba02/applicationContext.xml";
	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);
	ISomeService service = (ISomeService) ac.getBean("myService");
	service.doSome();
}
```
#### 静态工厂 Bean
*applicationContext.mxl*
```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- 注册 Service：静态工厂 Bean -->
    <bean id="myService" class="top.qingrang.ba03.ServiceFactory" factory-method="getSomeService"/>
</beans>
```
#### 容器中 Bean 的作用域
*applicationContext.mxl*
```
<bean id="myService" class="top.qingrang.ba04.SomeServiceImpl" scope="prototype"/>
```

当通过 Spring 容器创建一个 Bean 实例时，不仅可以完成 Bean 的实例化，还可以通过 scope 属性，为 Bean 指定特定的作用域。 Spring 支持 5 种作用域。
1. singleton： 单例模式。即在整个 Spring 容器中，使用 singleton 定义的 Bean 将是单例的，只有一个实例。该 Bean 是在容器被创建时即被装配好了。 默认为单例的。
1. prototype： 原型模式。即每次使用 getBean 方法获取的同一个 `<bean />` 的实例都是一个新的实例。Bean 实例是在代码中使用该 Bean 实例时才进行装配的。
1. request：对于每次 HTTP 请求，都将会产生一个不同的 Bean 实例。
1. session：对于每个不同的 HTTP session，都将产生一个不同的 Bean 实例。
1. global session：每个全局的 HTTP session 对应一个 Bean 实例。典型情况下，仅在使用 portlet 集群时有效，多个 Web 应用共享一个 session。一般应用中， global-session 与 session 是等同的。

对于 scope 的值 request、 session 与 global session， 只有在 Web 应用中使用 Spring 时，该作用域才有效。


#### Bean 后处理器
Bean 后处理器是一种特殊的 Bean，容器中所有的 Bean 在初始化时，均会自动执行该类的两个方法。由于该 Bean 是由其它 Bean 自动调用执行，不是程序员手工调用，故此 Bean 无须 id 属性。

需要做的是，在 Bean 后处理器类方法中，只要对 Bean 类与 Bean 类中的方法进行判断，就可实现对指定的 Bean 的指定方法进行功能扩展与增强。方法返回的 Bean 对象，即是增强过的对象。就是设计模式中的代理模式。

代码中需要自定义 Bean 后处理器类。该类就是实现了接口 BeanPostProcessor 的类。该接口中包含两个方法，分别在目标 Bean 初始化完毕之前与之后执行。它们的返回值为：功能被扩展或增强后的 Bean 对象。

Bean 初始化完毕有一个标志：一个方法将被执行。即当该方法被执行时，表示该 Bean 被初始化完毕。所以 Bean 后处理器中两个方法的执行，是在这个方法之前之后执行。 这个方法在后面将会讲到。

`public Object postProcessBeforeInitialization(Object bean, String beanId) throws BeansException`

该方法会在目标 Bean 初始化完毕之前由容器自动调用。

`public Object postProcessAfterInitialization(Object bean, String beanId) throws BeansException`

该方法会在目标 Bean 初始化完毕之后由容器自动调用。它们的参数是：第一个参数是系统即将初始化的 Bean 实例，第二个参数是该 Bean 实例的 id 属性值。若 Bean 没有 id 就是 name 属性值。

*ISomeService.java - service 接口*
```
public interface ISomeService {
	String doSome();
	String doOther();
}
```
*SomeServiceImpl.java - service 实现类*
```
public class SomeServiceImpl implements ISomeService {
	@Override
	public String doSome() {
		System.out.println("执行doSome()方法");
		return "doSome() - abc";
	}
	
	@Override
	public String doOther() {
		System.out.println("执行doOther()方法");
		return "doOther() - def";
	}
}
```
*MyBeanPostProcessor.java - 自定义 Bean 后处理器类*
```
public class MyBeanPostProcessor implements BeanPostProcessor {

	// bean：表示当前正在进行初始化的Bean对象
	// beanName：表示当前正在进行初始化的Bean对象的id
	@Override
	public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
		System.out.println("执行 ---- before() ---方法");
		return bean;
	}

	@Override
	public Object postProcessAfterInitialization(final Object bean, String beanName) throws BeansException {
		System.out.println("执行 ---- after() ---方法");
		//判断 SomeServiceImpl 对象
		if ("myService".equals(beanName)) {
			Object obj = Proxy.newProxyInstance(bean.getClass().getClassLoader(),
					bean.getClass().getInterfaces(),
					new InvocationHandler() {
						@Override
						public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
							Object invoke = method.invoke(bean, args);
							//判断具体方法
							if ("doSome".equals(method.getName())) {
								return ((String) invoke).toUpperCase();
							}
							return invoke;
						}
					});
			return obj;
		}
		return bean;
	}
}
```
*applicationContext.mxl*
```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- 注册 Service -->
    <bean id="myService" class="top.qingrang.ba05.SomeServiceImpl"/>
    <bean id="myService2" class="top.qingrang.ba05.SomeServiceImpl"/>

    <!-- 注册 Bean 后处理器 -->
    <bean class="top.qingrang.ba05.MyBeanPostProcessor"/>

</beans>
```
*Test.java - 测试*
```
public void test01() {
	String resource = "top/qingrang/ba05/applicationContext.xml";
	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);

	ISomeService service = (ISomeService) ac.getBean("myService");
	System.out.println(service.doSome());
	System.out.println(service.doOther());

	System.out.println("======================");

	ISomeService service2 = (ISomeService) ac.getBean("myService2");
	System.out.println(service2.doSome());
	System.out.println(service2.doOther());
}
```

*输出结果*
```
执行 ---- before() ---方法
执行 ---- after() ---方法
执行 ---- before() ---方法
执行 ---- after() ---方法
执行doSome()方法
DOSOME() - ABC
执行doOther()方法
doOther() - def
======================
执行doSome()方法
doSome() - abc
执行doOther()方法
doOther() - def
```


#### Bean 的生命周期
*ISomeService.java - service 接口*
```
public interface ISomeService {
	void doSome();
}
```
*SomeServiceImpl.java - service 实现类*
```
public class SomeServiceImpl implements ISomeService, BeanNameAware, BeanFactoryAware, InitializingBean, DisposableBean {
	private String adao;
	private String bdao;

	public void setAdao(String adao) {
		this.adao = adao;
		System.out.println("Step2：执行 setter");
	}

	public void setBdao(String bdao) {
		this.bdao = bdao;
		System.out.println("Step2：执行 setter");
	}

	public SomeServiceImpl() {
		System.out.println("Step1：执行无参构造器");
	}

	@Override
	public void doSome() {
		System.out.println("Step9：执行 doSome() 方法");
	}

	public void setUp() {
		System.out.println("Step7：初始化完毕之后");
	}

	public void tearDown() {
		System.out.println("Step11：销毁之前");
	}

	@Override
	public void setBeanName(String name) {
		System.out.println("Step3：获取到 bean 的 id = " + name);
	}

	@Override
	public void setBeanFactory(BeanFactory beanFactory) throws BeansException {
		System.out.println("Step4：获取到 BeanFactory 容器");
	}

	@Override
	public void afterPropertiesSet() throws Exception {
		System.out.println("Step6：Bean 初始化完毕了");
	}

	@Override
	public void destroy() throws Exception {
		System.out.println("Step10：实现接口的销毁之前");
	}
}
```
*MyBeanPostProcessor.java - Bean 后处理器*
```
public class MyBeanPostProcessor implements BeanPostProcessor {
	@Override
	public Object postProcessBeforeInitialization(Object bean, String beanName)
			throws BeansException {
		System.out.println("Step5：MyBeanPostProcessor - 执行 before() 方法");
		return bean;
	}

	@Override
	public Object postProcessAfterInitialization(final Object bean, String beanName)
			throws BeansException {
		System.out.println("Step8：MyBeanPostProcessor - 执行 after() 方法");
		return bean;
	}
}
```
*applicationContext.mxl*
```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- 注册Service -->
    <bean id="myService" class="top.qingrang.ba07.SomeServiceImpl"
    		init-method="setUp" destroy-method="tearDown">
    	<property name="adao" value="aaa"/>
    	<property name="bdao" value="bbb"/>
   	</bean>

   	<bean class="top.qingrang.ba07.MyBeanPostProcessor"/>
</beans>
```
*Test.java - 测试*
```
public void test01() {
	// 创建容器对象，加载Spring配置文件
	String resource = "top/qingrang/ba07/applicationContext.xml";
	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);
	ISomeService service = (ISomeService) ac.getBean("myService");
	service.doSome();
	// 对于销毁方法的执行，有两个条件：
	// 1)当前的Bean需要是singleton的
	// 2)要手工关闭容器
	((ClassPathXmlApplicationContext)ac).close();
}
```

*输出信息*
```
Step1：执行无参构造器
Step2：执行 setter
Step2：执行 setter
Step3：获取到 bean 的 id = myService
Step4：获取到 BeanFactory 容器
Step5：MyBeanPostProcessor - 执行 before() 方法
Step6：Bean 初始化完毕了
Step7：初始化完毕之后
Step8：MyBeanPostProcessor - 执行 after() 方法
Step9：执行 doSome() 方法
Step10：实现接口的销毁之前
Step11：销毁之前
```
### 基于 XML 的 DI
#### 注入分类
##### 设值注入
和 `setter` 方法有关系。

*School.java*
```
public class School {
	private String name;
	public void setName(String name) {
		this.name = name;
	}

	@Override
	public String toString() {
		return "School [name=" + name + "]";
	}
}
```

*Student.java*
```
public class Student {
	private String name;
	private int age;
	private School school;   // 对象属性，域属性
	
	public void setName(String name) {
		System.out.println("执行setName()");
		this.name = name;
	}
	public void setAge(int age) {
		System.out.println("执行setAge()");
		this.age = age;
	}
	public void setSchool(School school) {
		this.school = school;
	}

	@Override
	public String toString() {
		return "Student [name=" + name + ", age=" + age + ", school=" + school
				+ "]";
	}
}
```

*applicationContext.mxl*
```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- 注册 Student -->
    <bean id="myStudent" class="top.qingrang.di01.Student">
    	<property name="name" value="张三"/>
    	<property name="age" value="23"/>
        <!-- 对于对象的注入要用 ref -->
    	<property name="school" ref="mySchool"/>
    </bean>

    <!-- 注册 School -->
    <bean id="mySchool" class="top.qingrang.di01.School">
    	<property name="name" value="清华大学"/>
    </bean>

</beans>
```

*Test.java - 测试*
```
public void test01() {
	// 创建容器对象，加载Spring配置文件
	String resource = "top/qingrang/di01/applicationContext.xml";
	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);
	Student student = (Student) ac.getBean("myStudent");
	System.out.println(student);
}
```

*输出信息*
```
执行setName()
执行setAge()
Student [name=张三, age=23, school=School [name=清华大学]]
```
##### 构造注入
和 `setter` 方法没有关系，和构造方法有关系。



#### 集合属性注入
*School.java*
```
public class School {
	private String name;

	public void setName(String name) {
		this.name = name;
	}

	@Override
	public String toString() {
		return "School [name=" + name + "]";
	}
}
```
*Some.java*
```
public class Some {
	private School[] schools;
	private String[] myStrs;
	private List<String> myList;
	private Set<String> mySet;
	private Map<String, Object> myMap;
	private Properties myPros;

	public void setSchools(School[] schools) {
		this.schools = schools;
	}
	public void setMyStrs(String[] myStrs) {
		this.myStrs = myStrs;
	}
	public void setMyList(List<String> myList) {
		this.myList = myList;
	}
	public void setMySet(Set<String> mySet) {
		this.mySet = mySet;
	}
	public void setMyMap(Map<String, Object> myMap) {
		this.myMap = myMap;
	}
	public void setMyPros(Properties myPros) {
		this.myPros = myPros;
	}

	@Override
	public String toString() {
		return "Some [schools=" + Arrays.toString(schools) + ", myStrs="
				+ Arrays.toString(myStrs) + ", myList=" + myList + ", mySet="
				+ mySet + ", myMap=" + myMap + ", myPros=" + myPros + "]";
	}
}
```
*applicationContext.xml*
```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- 注册School -->
    <bean id="mySchool" class="top.qingrang.di05.School">
    	<property name="name" value="清华大学"/>
    </bean>
    <bean id="mySchool2" class="top.qingrang.di05.School">
    	<property name="name" value="北京大学"/>
    </bean>
    
    <!-- 注册Student -->
    <bean id="mySome" class="top.qingrang.di05.Some">
		<!-- 数组 -->
    	<property name="schools">
    		<array>
    			<ref bean="mySchool"/>
    			<ref bean="mySchool2"/>
    		</array>
    	</property>
		<!-- 数组：简写，带 ref 的若只有一个可以简写，多个不行 -->
		<property name="schools" value="mySchool"/>

		<!-- 数组 -->
    	<property name="myStrs">
    		<array>
    			<value>中国</value>
    			<value>北京</value>
    		</array>
    	</property>
		<!-- 数组：简写 -->
		<property name="myStrs" value="中国,北京"/>


		<!-- List<String> -->
    	<property name="myList">
    		<list>
    			<value>大兴</value>
    			<value>亦庄</value>
    		</list>
    	</property>
		<!-- List<String>：简写 -->
		<property name="myList" value="大兴,亦庄"/>

		<!-- Set<String> -->
    	<property name="mySet">
    		<set>
    			<value>大族企业湾</value>
    			<value>10号楼</value>
    		</set>
    	</property>
		<!-- Set<String>：简写 -->
		<property name="mySet" value="大族企业湾,10号楼"/>

		<!-- Map<String, Object>，Map 的键值都是 object -->
    	<property name="myMap">
    		<map>
    			<entry key="mobile" value="1234567"/>
    			<entry key="QQ" value="7654321"/>
    		</map>
    	</property>

		<!-- Properties，Properties 的键值都是字符串 -->
    	<property name="myPros">
    		<props>
    			<prop key="education">大学</prop>
    			<prop key="gender">男</prop>
    		</props>
    	</property>
    </bean>

</beans>
```
*MyTest.java*
```
@Test
public void test01() {
	// 创建容器对象，加载Spring配置文件
	String resource = "top/qingrang/di05/applicationContext.xml";
	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);
	Some some = (Some) ac.getBean("mySome");
	System.out.println(some);
}
```
#### 对于域属性(对象)的自动注入
##### byName 方式自动注入
![byName 方式自动注入](https://daily-1252869435.cos.ap-chengdu.myqcloud.com/2018-11-17-22-04-38.png)
##### byType 方式自动注入
![mark](https://daily-1252869435.cos.ap-chengdu.myqcloud.com/2018-11-17-22-06-41.png)',
  'groups' => 'Java',
  'showsel' => '1',
  'showse2' => '1',
  'id' => '247',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->updateNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000577s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001497s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 247 LIMIT 1 [ RunTime:0.000728s ]
[ sql ] [ SQL ] SELECT `groups` FROM `note` WHERE  `id` = 247 LIMIT 1 [ RunTime:0.000473s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000972s ]
[ sql ] [ SQL ] SELECT `parent_id` FROM `groups` WHERE  `groups` = 'Java' LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `id` = 2 LIMIT 1 [ RunTime:0.000384s ]
[ sql ] [ SQL ] UPDATE `note`  SET `id`=247,`p_id`=2,`title`='Spring\r',`content`='# Spring\r\n[TOC]\r\n\r\nSpring 是一个基于 **IOC** 和 **AOP** 的结构 J2EE 系统的框架。\r\n## IOC（控制反转）\r\n### 概念\r\n控制反转（IOC， Inversion of Control），是一个概念，是一种思想。指将传统上由程序代码直接操控的对象调用权交给容器，通过容器来实现对象的装配和管理。控制反转就是对对象控制权的转移，从程序代码本身反转到了外部容器。简单说就是创建对象由以前的程序员自己 new 构造方法来调用，变成了交由 Spring 创建对象。\r\n\r\nIoC 是一个概念，是一种思想，其实现方式多种多样。当前比较流行的实现方式有两种：依赖注入和依赖查找。依赖注入方式应用更为广泛。\r\n- 依赖查找： Dependency Lookup， DL，容器提供回调接口和上下文环境给组件，程序代\r\n码则需要提供具体的查找方式。比较典型的是依赖于 JNDI 系统的查找。\r\n- 依赖注入： Dependency Injection， DI，程序代码不做定位查询，这些工作由容器自行完成。简单地说就是拿到的对象的属性，已经被注入好相关值了，直接使用即可。\r\n\r\n依赖注入 DI 是指程序运行过程中，若需要调用另一个对象协助时，无须在代码中创建被调用者，而是依赖于外部容器，由外部容器创建后传递给程序。Spring 的依赖注入对调用者与被调用者几乎没有任何要求，完全支持 POJO 之间依赖关系的管理。\r\n\r\n依赖注入是目前最优秀的解耦方式。依赖注入让 Spring 的 Bean 之间以配置文件的方式组织在一起，而不是以硬编码的方式耦合在一起的。\r\n\r\n>以获取对象的方式来进行比较\r\n\r\n- 传统的方式\r\n\r\n通过 new 关键字主动创建一个对象\r\n\r\n相当于你自己去菜市场 new 了一只鸡，不过是生鸡，要自己拔毛，去内脏，再上花椒，酱油，烤制，经过各种工序之后，才可以食用。\r\n\r\n- IOC方式\r\n\r\n对象的生命周期由 Spring 来管理，直接从 Spring 那里去获取一个对象。IOC 是反转控制 (Inversion Of Control)的缩写，就像控制权从本来在自己手里，现在交给了 Spring。\r\n\r\n相当于去馆子(Spring)点了一只鸡，交到你手上的时候，已经五味俱全，你就只管吃就行了。\r\n\r\n\r\n\r\n### 第一个 Spring 程序\r\n#### 传统的面向接口编程\r\n经过以下例子可以看出，若接口（Service 层）变了，Test(View 层) 也的改，耦合度很高。\r\n\r\n*ISomeService.java - 接口*\r\n```\r\npublic interface ISomeService {\r\n	void doSome();\r\n}\r\n```\r\n*SomeServiceImpl.java - 实现类*\r\n```\r\npublic class SomeServiceImpl implements ISomeService {\r\n	@Override\r\n	public void doSome() {\r\n		System.out.println(\"执行doSome()方法\");\r\n	}\r\n}\r\n```\r\n*Test.java - 测试*\r\n```\r\n@Test\r\npublic void test01() {\r\n	ISomeService service = new SomeServiceImpl();\r\n	service.doSome();\r\n}\r\n```\r\n#### Spring 实现\r\n*applicationContext.mxl - Spring 的配置文件*\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\r\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n    xsi:schemaLocation=\"\r\n        http://www.springframework.org/schema/beans \r\n        http://www.springframework.org/schema/beans/spring-beans.xsd\">\r\n\r\n    <!-- 注册 Service，Spring 底层实际是做了 SomeServiceImpl myService = new SomeServiceImpl(); -->\r\n    <bean id=\"myService\" class=\"top.qingrang.service.SomeServiceImpl\"/>\r\n\r\n</beans>\r\n```\r\n*Test.java - 测试*\r\n```\r\n@Test\r\npublic void test02() {\r\n	// 创建容器对象，加载 Spring 配置文件，会从类路径下查找配置文件\r\n	ApplicationContext ac = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\r\n	ISomeService someService = (ISomeService)ac.getBean(\"myService\");\r\n	someService.doSome();\r\n}\r\n```\r\n\r\n从以上代码中已经看不到 `SomeServiceImpl` 这个实现类了，就做到了解耦。\r\n\r\n>FileSystemXmlApplicationContext\r\n\r\n```\r\n// 创建容器对象，加载 Spring 配置文件，会从项目的根下查找配置文件\r\nApplicationContext ac = new FileSystemXmlApplicationContext(\"applicationContext.xml\");\r\n\r\n// 创建容器对象，加载 Spring 配置文件，会从当前文件系统的 D 盘根目录下查找配置文件\r\nApplicationContext ac = new FileSystemXmlApplicationContext(\"d:/applicationContext.xml\");\r\n```\r\n\r\n>BeanFactory 容器\r\n\r\n*Test.java*\r\n```\r\n@Test\r\npublic void test05() {\r\n	// 创建 BeanFactory 容器\r\n	BeanFactory bf = new XmlBeanFactory(new ClassPathResource(\"applicationContext.xml\"));\r\n	ISomeService service = (ISomeService) bf.getBean(\"myService\");\r\n	service.doSome();\r\n}\r\n```\r\n\r\n>ApplicationContext 与 BeanFactory 容器的区别\r\n\r\n这两上容器对于其中 Bean 的创建时机不同：\r\n1. ApplicationContext容器在进行初始化时，会将其中的所有Bean(对象)进行创建\r\n - 缺点：占用系统资源（内存、CPU等）\r\n - 优点：响应速度快\r\n1. BeanFactory容器中的对象，在容器初始化时并不会被创建，而是在真正获取该对象时才被创建\r\n - 缺点：相对来说，响应速度慢\r\n - 优点：不多占用系统资源\r\n\r\n### Bean 的装配\r\n#### 动态工厂 Bean\r\n*ISomeService.java - service 接口*\r\n```\r\npublic interface ISomeService {\r\n	void doSome();\r\n}\r\n```\r\n*SomeServiceImpl.java - service 实现类*\r\n```\r\npublic class SomeServiceImpl implements ISomeService {\r\n	@Override\r\n	public void doSome() {\r\n		System.out.println(\"执行doSome()方法\");\r\n	}\r\n}\r\n```\r\n*ServiceFactory.java - service 工厂*\r\n```\r\npublic class ServiceFactory {\r\n	public ISomeService getSomeService() {\r\n		return new SomeServiceImpl();\r\n	}\r\n}\r\n```\r\n*applicationContext.mxl*\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\r\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n    xsi:schemaLocation=\"\r\n        http://www.springframework.org/schema/beans \r\n        http://www.springframework.org/schema/beans/spring-beans.xsd\">\r\n\r\n    <!-- 注册动态工厂 -->\r\n    <bean id=\"factory\" class=\"top.qingrang.ba02.ServiceFactory\"/>\r\n\r\n    <!-- 注册 Service：动态工厂 Bean -->\r\n    <bean id=\"myService\" factory-bean=\"factory\" factory-method=\"getSomeService\"/>\r\n</beans>\r\n```\r\n*Test.java - 测试*\r\n```\r\npublic void test02() {\r\n	String resource = \"top/qingrang/ba02/applicationContext.xml\";\r\n	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);\r\n	ISomeService service = (ISomeService) ac.getBean(\"myService\");\r\n	service.doSome();\r\n}\r\n```\r\n#### 静态工厂 Bean\r\n*applicationContext.mxl*\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\r\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n    xsi:schemaLocation=\"\r\n        http://www.springframework.org/schema/beans \r\n        http://www.springframework.org/schema/beans/spring-beans.xsd\">\r\n\r\n    <!-- 注册 Service：静态工厂 Bean -->\r\n    <bean id=\"myService\" class=\"top.qingrang.ba03.ServiceFactory\" factory-method=\"getSomeService\"/>\r\n</beans>\r\n```\r\n#### 容器中 Bean 的作用域\r\n*applicationContext.mxl*\r\n```\r\n<bean id=\"myService\" class=\"top.qingrang.ba04.SomeServiceImpl\" scope=\"prototype\"/>\r\n```\r\n\r\n当通过 Spring 容器创建一个 Bean 实例时，不仅可以完成 Bean 的实例化，还可以通过 scope 属性，为 Bean 指定特定的作用域。 Spring 支持 5 种作用域。\r\n1. singleton： 单例模式。即在整个 Spring 容器中，使用 singleton 定义的 Bean 将是单例的，只有一个实例。该 Bean 是在容器被创建时即被装配好了。 默认为单例的。\r\n1. prototype： 原型模式。即每次使用 getBean 方法获取的同一个 `<bean />` 的实例都是一个新的实例。Bean 实例是在代码中使用该 Bean 实例时才进行装配的。\r\n1. request：对于每次 HTTP 请求，都将会产生一个不同的 Bean 实例。\r\n1. session：对于每个不同的 HTTP session，都将产生一个不同的 Bean 实例。\r\n1. global session：每个全局的 HTTP session 对应一个 Bean 实例。典型情况下，仅在使用 portlet 集群时有效，多个 Web 应用共享一个 session。一般应用中， global-session 与 session 是等同的。\r\n\r\n对于 scope 的值 request、 session 与 global session， 只有在 Web 应用中使用 Spring 时，该作用域才有效。\r\n\r\n\r\n#### Bean 后处理器\r\nBean 后处理器是一种特殊的 Bean，容器中所有的 Bean 在初始化时，均会自动执行该类的两个方法。由于该 Bean 是由其它 Bean 自动调用执行，不是程序员手工调用，故此 Bean 无须 id 属性。\r\n\r\n需要做的是，在 Bean 后处理器类方法中，只要对 Bean 类与 Bean 类中的方法进行判断，就可实现对指定的 Bean 的指定方法进行功能扩展与增强。方法返回的 Bean 对象，即是增强过的对象。就是设计模式中的代理模式。\r\n\r\n代码中需要自定义 Bean 后处理器类。该类就是实现了接口 BeanPostProcessor 的类。该接口中包含两个方法，分别在目标 Bean 初始化完毕之前与之后执行。它们的返回值为：功能被扩展或增强后的 Bean 对象。\r\n\r\nBean 初始化完毕有一个标志：一个方法将被执行。即当该方法被执行时，表示该 Bean 被初始化完毕。所以 Bean 后处理器中两个方法的执行，是在这个方法之前之后执行。 这个方法在后面将会讲到。\r\n\r\n`public Object postProcessBeforeInitialization(Object bean, String beanId) throws BeansException`\r\n\r\n该方法会在目标 Bean 初始化完毕之前由容器自动调用。\r\n\r\n`public Object postProcessAfterInitialization(Object bean, String beanId) throws BeansException`\r\n\r\n该方法会在目标 Bean 初始化完毕之后由容器自动调用。它们的参数是：第一个参数是系统即将初始化的 Bean 实例，第二个参数是该 Bean 实例的 id 属性值。若 Bean 没有 id 就是 name 属性值。\r\n\r\n*ISomeService.java - service 接口*\r\n```\r\npublic interface ISomeService {\r\n	String doSome();\r\n	String doOther();\r\n}\r\n```\r\n*SomeServiceImpl.java - service 实现类*\r\n```\r\npublic class SomeServiceImpl implements ISomeService {\r\n	@Override\r\n	public String doSome() {\r\n		System.out.println(\"执行doSome()方法\");\r\n		return \"doSome() - abc\";\r\n	}\r\n	\r\n	@Override\r\n	public String doOther() {\r\n		System.out.println(\"执行doOther()方法\");\r\n		return \"doOther() - def\";\r\n	}\r\n}\r\n```\r\n*MyBeanPostProcessor.java - 自定义 Bean 后处理器类*\r\n```\r\npublic class MyBeanPostProcessor implements BeanPostProcessor {\r\n\r\n	// bean：表示当前正在进行初始化的Bean对象\r\n	// beanName：表示当前正在进行初始化的Bean对象的id\r\n	@Override\r\n	public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\r\n		System.out.println(\"执行 ---- before() ---方法\");\r\n		return bean;\r\n	}\r\n\r\n	@Override\r\n	public Object postProcessAfterInitialization(final Object bean, String beanName) throws BeansException {\r\n		System.out.println(\"执行 ---- after() ---方法\");\r\n		//判断 SomeServiceImpl 对象\r\n		if (\"myService\".equals(beanName)) {\r\n			Object obj = Proxy.newProxyInstance(bean.getClass().getClassLoader(),\r\n					bean.getClass().getInterfaces(),\r\n					new InvocationHandler() {\r\n						@Override\r\n						public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\r\n							Object invoke = method.invoke(bean, args);\r\n							//判断具体方法\r\n							if (\"doSome\".equals(method.getName())) {\r\n								return ((String) invoke).toUpperCase();\r\n							}\r\n							return invoke;\r\n						}\r\n					});\r\n			return obj;\r\n		}\r\n		return bean;\r\n	}\r\n}\r\n```\r\n*applicationContext.mxl*\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\r\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n    xsi:schemaLocation=\"\r\n        http://www.springframework.org/schema/beans \r\n        http://www.springframework.org/schema/beans/spring-beans.xsd\">\r\n\r\n    <!-- 注册 Service -->\r\n    <bean id=\"myService\" class=\"top.qingrang.ba05.SomeServiceImpl\"/>\r\n    <bean id=\"myService2\" class=\"top.qingrang.ba05.SomeServiceImpl\"/>\r\n\r\n    <!-- 注册 Bean 后处理器 -->\r\n    <bean class=\"top.qingrang.ba05.MyBeanPostProcessor\"/>\r\n\r\n</beans>\r\n```\r\n*Test.java - 测试*\r\n```\r\npublic void test01() {\r\n	String resource = \"top/qingrang/ba05/applicationContext.xml\";\r\n	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);\r\n\r\n	ISomeService service = (ISomeService) ac.getBean(\"myService\");\r\n	System.out.println(service.doSome());\r\n	System.out.println(service.doOther());\r\n\r\n	System.out.println(\"======================\");\r\n\r\n	ISomeService service2 = (ISomeService) ac.getBean(\"myService2\");\r\n	System.out.println(service2.doSome());\r\n	System.out.println(service2.doOther());\r\n}\r\n```\r\n\r\n*输出结果*\r\n```\r\n执行 ---- before() ---方法\r\n执行 ---- after() ---方法\r\n执行 ---- before() ---方法\r\n执行 ---- after() ---方法\r\n执行doSome()方法\r\nDOSOME() - ABC\r\n执行doOther()方法\r\ndoOther() - def\r\n======================\r\n执行doSome()方法\r\ndoSome() - abc\r\n执行doOther()方法\r\ndoOther() - def\r\n```\r\n\r\n\r\n#### Bean 的生命周期\r\n*ISomeService.java - service 接口*\r\n```\r\npublic interface ISomeService {\r\n	void doSome();\r\n}\r\n```\r\n*SomeServiceImpl.java - service 实现类*\r\n```\r\npublic class SomeServiceImpl implements ISomeService, BeanNameAware, BeanFactoryAware, InitializingBean, DisposableBean {\r\n	private String adao;\r\n	private String bdao;\r\n\r\n	public void setAdao(String adao) {\r\n		this.adao = adao;\r\n		System.out.println(\"Step2：执行 setter\");\r\n	}\r\n\r\n	public void setBdao(String bdao) {\r\n		this.bdao = bdao;\r\n		System.out.println(\"Step2：执行 setter\");\r\n	}\r\n\r\n	public SomeServiceImpl() {\r\n		System.out.println(\"Step1：执行无参构造器\");\r\n	}\r\n\r\n	@Override\r\n	public void doSome() {\r\n		System.out.println(\"Step9：执行 doSome() 方法\");\r\n	}\r\n\r\n	public void setUp() {\r\n		System.out.println(\"Step7：初始化完毕之后\");\r\n	}\r\n\r\n	public void tearDown() {\r\n		System.out.println(\"Step11：销毁之前\");\r\n	}\r\n\r\n	@Override\r\n	public void setBeanName(String name) {\r\n		System.out.println(\"Step3：获取到 bean 的 id = \" + name);\r\n	}\r\n\r\n	@Override\r\n	public void setBeanFactory(BeanFactory beanFactory) throws BeansException {\r\n		System.out.println(\"Step4：获取到 BeanFactory 容器\");\r\n	}\r\n\r\n	@Override\r\n	public void afterPropertiesSet() throws Exception {\r\n		System.out.println(\"Step6：Bean 初始化完毕了\");\r\n	}\r\n\r\n	@Override\r\n	public void destroy() throws Exception {\r\n		System.out.println(\"Step10：实现接口的销毁之前\");\r\n	}\r\n}\r\n```\r\n*MyBeanPostProcessor.java - Bean 后处理器*\r\n```\r\npublic class MyBeanPostProcessor implements BeanPostProcessor {\r\n	@Override\r\n	public Object postProcessBeforeInitialization(Object bean, String beanName)\r\n			throws BeansException {\r\n		System.out.println(\"Step5：MyBeanPostProcessor - 执行 before() 方法\");\r\n		return bean;\r\n	}\r\n\r\n	@Override\r\n	public Object postProcessAfterInitialization(final Object bean, String beanName)\r\n			throws BeansException {\r\n		System.out.println(\"Step8：MyBeanPostProcessor - 执行 after() 方法\");\r\n		return bean;\r\n	}\r\n}\r\n```\r\n*applicationContext.mxl*\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\r\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n    xsi:schemaLocation=\"\r\n        http://www.springframework.org/schema/beans \r\n        http://www.springframework.org/schema/beans/spring-beans.xsd\">\r\n\r\n    <!-- 注册Service -->\r\n    <bean id=\"myService\" class=\"top.qingrang.ba07.SomeServiceImpl\"\r\n    		init-method=\"setUp\" destroy-method=\"tearDown\">\r\n    	<property name=\"adao\" value=\"aaa\"/>\r\n    	<property name=\"bdao\" value=\"bbb\"/>\r\n   	</bean>\r\n\r\n   	<bean class=\"top.qingrang.ba07.MyBeanPostProcessor\"/>\r\n</beans>\r\n```\r\n*Test.java - 测试*\r\n```\r\npublic void test01() {\r\n	// 创建容器对象，加载Spring配置文件\r\n	String resource = \"top/qingrang/ba07/applicationContext.xml\";\r\n	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);\r\n	ISomeService service = (ISomeService) ac.getBean(\"myService\");\r\n	service.doSome();\r\n	// 对于销毁方法的执行，有两个条件：\r\n	// 1)当前的Bean需要是singleton的\r\n	// 2)要手工关闭容器\r\n	((ClassPathXmlApplicationContext)ac).close();\r\n}\r\n```\r\n\r\n*输出信息*\r\n```\r\nStep1：执行无参构造器\r\nStep2：执行 setter\r\nStep2：执行 setter\r\nStep3：获取到 bean 的 id = myService\r\nStep4：获取到 BeanFactory 容器\r\nStep5：MyBeanPostProcessor - 执行 before() 方法\r\nStep6：Bean 初始化完毕了\r\nStep7：初始化完毕之后\r\nStep8：MyBeanPostProcessor - 执行 after() 方法\r\nStep9：执行 doSome() 方法\r\nStep10：实现接口的销毁之前\r\nStep11：销毁之前\r\n```\r\n### 基于 XML 的 DI\r\n#### 注入分类\r\n##### 设值注入\r\n和 `setter` 方法有关系。\r\n\r\n*School.java*\r\n```\r\npublic class School {\r\n	private String name;\r\n	public void setName(String name) {\r\n		this.name = name;\r\n	}\r\n\r\n	@Override\r\n	public String toString() {\r\n		return \"School [name=\" + name + \"]\";\r\n	}\r\n}\r\n```\r\n\r\n*Student.java*\r\n```\r\npublic class Student {\r\n	private String name;\r\n	private int age;\r\n	private School school;   // 对象属性，域属性\r\n	\r\n	public void setName(String name) {\r\n		System.out.println(\"执行setName()\");\r\n		this.name = name;\r\n	}\r\n	public void setAge(int age) {\r\n		System.out.println(\"执行setAge()\");\r\n		this.age = age;\r\n	}\r\n	public void setSchool(School school) {\r\n		this.school = school;\r\n	}\r\n\r\n	@Override\r\n	public String toString() {\r\n		return \"Student [name=\" + name + \", age=\" + age + \", school=\" + school\r\n				+ \"]\";\r\n	}\r\n}\r\n```\r\n\r\n*applicationContext.mxl*\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\r\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n    xsi:schemaLocation=\"\r\n        http://www.springframework.org/schema/beans \r\n        http://www.springframework.org/schema/beans/spring-beans.xsd\">\r\n\r\n    <!-- 注册 Student -->\r\n    <bean id=\"myStudent\" class=\"top.qingrang.di01.Student\">\r\n    	<property name=\"name\" value=\"张三\"/>\r\n    	<property name=\"age\" value=\"23\"/>\r\n        <!-- 对于对象的注入要用 ref -->\r\n    	<property name=\"school\" ref=\"mySchool\"/>\r\n    </bean>\r\n\r\n    <!-- 注册 School -->\r\n    <bean id=\"mySchool\" class=\"top.qingrang.di01.School\">\r\n    	<property name=\"name\" value=\"清华大学\"/>\r\n    </bean>\r\n\r\n</beans>\r\n```\r\n\r\n*Test.java - 测试*\r\n```\r\npublic void test01() {\r\n	// 创建容器对象，加载Spring配置文件\r\n	String resource = \"top/qingrang/di01/applicationContext.xml\";\r\n	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);\r\n	Student student = (Student) ac.getBean(\"myStudent\");\r\n	System.out.println(student);\r\n}\r\n```\r\n\r\n*输出信息*\r\n```\r\n执行setName()\r\n执行setAge()\r\nStudent [name=张三, age=23, school=School [name=清华大学]]\r\n```\r\n##### 构造注入\r\n和 `setter` 方法没有关系，和构造方法有关系。\r\n\r\n\r\n\r\n#### 集合属性注入\r\n*School.java*\r\n```\r\npublic class School {\r\n	private String name;\r\n\r\n	public void setName(String name) {\r\n		this.name = name;\r\n	}\r\n\r\n	@Override\r\n	public String toString() {\r\n		return \"School [name=\" + name + \"]\";\r\n	}\r\n}\r\n```\r\n*Some.java*\r\n```\r\npublic class Some {\r\n	private School[] schools;\r\n	private String[] myStrs;\r\n	private List<String> myList;\r\n	private Set<String> mySet;\r\n	private Map<String, Object> myMap;\r\n	private Properties myPros;\r\n\r\n	public void setSchools(School[] schools) {\r\n		this.schools = schools;\r\n	}\r\n	public void setMyStrs(String[] myStrs) {\r\n		this.myStrs = myStrs;\r\n	}\r\n	public void setMyList(List<String> myList) {\r\n		this.myList = myList;\r\n	}\r\n	public void setMySet(Set<String> mySet) {\r\n		this.mySet = mySet;\r\n	}\r\n	public void setMyMap(Map<String, Object> myMap) {\r\n		this.myMap = myMap;\r\n	}\r\n	public void setMyPros(Properties myPros) {\r\n		this.myPros = myPros;\r\n	}\r\n\r\n	@Override\r\n	public String toString() {\r\n		return \"Some [schools=\" + Arrays.toString(schools) + \", myStrs=\"\r\n				+ Arrays.toString(myStrs) + \", myList=\" + myList + \", mySet=\"\r\n				+ mySet + \", myMap=\" + myMap + \", myPros=\" + myPros + \"]\";\r\n	}\r\n}\r\n```\r\n*applicationContext.xml*\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\r\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n    xsi:schemaLocation=\"\r\n        http://www.springframework.org/schema/beans \r\n        http://www.springframework.org/schema/beans/spring-beans.xsd\">\r\n\r\n    <!-- 注册School -->\r\n    <bean id=\"mySchool\" class=\"top.qingrang.di05.School\">\r\n    	<property name=\"name\" value=\"清华大学\"/>\r\n    </bean>\r\n    <bean id=\"mySchool2\" class=\"top.qingrang.di05.School\">\r\n    	<property name=\"name\" value=\"北京大学\"/>\r\n    </bean>\r\n    \r\n    <!-- 注册Student -->\r\n    <bean id=\"mySome\" class=\"top.qingrang.di05.Some\">\r\n		<!-- 数组 -->\r\n    	<property name=\"schools\">\r\n    		<array>\r\n    			<ref bean=\"mySchool\"/>\r\n    			<ref bean=\"mySchool2\"/>\r\n    		</array>\r\n    	</property>\r\n		<!-- 数组：简写，带 ref 的若只有一个可以简写，多个不行 -->\r\n		<property name=\"schools\" value=\"mySchool\"/>\r\n\r\n		<!-- 数组 -->\r\n    	<property name=\"myStrs\">\r\n    		<array>\r\n    			<value>中国</value>\r\n    			<value>北京</value>\r\n    		</array>\r\n    	</property>\r\n		<!-- 数组：简写 -->\r\n		<property name=\"myStrs\" value=\"中国,北京\"/>\r\n\r\n\r\n		<!-- List<String> -->\r\n    	<property name=\"myList\">\r\n    		<list>\r\n    			<value>大兴</value>\r\n    			<value>亦庄</value>\r\n    		</list>\r\n    	</property>\r\n		<!-- List<String>：简写 -->\r\n		<property name=\"myList\" value=\"大兴,亦庄\"/>\r\n\r\n		<!-- Set<String> -->\r\n    	<property name=\"mySet\">\r\n    		<set>\r\n    			<value>大族企业湾</value>\r\n    			<value>10号楼</value>\r\n    		</set>\r\n    	</property>\r\n		<!-- Set<String>：简写 -->\r\n		<property name=\"mySet\" value=\"大族企业湾,10号楼\"/>\r\n\r\n		<!-- Map<String, Object>，Map 的键值都是 object -->\r\n    	<property name=\"myMap\">\r\n    		<map>\r\n    			<entry key=\"mobile\" value=\"1234567\"/>\r\n    			<entry key=\"QQ\" value=\"7654321\"/>\r\n    		</map>\r\n    	</property>\r\n\r\n		<!-- Properties，Properties 的键值都是字符串 -->\r\n    	<property name=\"myPros\">\r\n    		<props>\r\n    			<prop key=\"education\">大学</prop>\r\n    			<prop key=\"gender\">男</prop>\r\n    		</props>\r\n    	</property>\r\n    </bean>\r\n\r\n</beans>\r\n```\r\n*MyTest.java*\r\n```\r\n@Test\r\npublic void test01() {\r\n	// 创建容器对象，加载Spring配置文件\r\n	String resource = \"top/qingrang/di05/applicationContext.xml\";\r\n	ApplicationContext ac = new ClassPathXmlApplicationContext(resource);\r\n	Some some = (Some) ac.getBean(\"mySome\");\r\n	System.out.println(some);\r\n}\r\n```\r\n#### 对于域属性(对象)的自动注入\r\n##### byName 方式自动注入\r\n![byName 方式自动注入](https://daily-1252869435.cos.ap-chengdu.myqcloud.com/2018-11-17-22-04-38.png)\r\n##### byType 方式自动注入\r\n![mark](https://daily-1252869435.cos.ap-chengdu.myqcloud.com/2018-11-17-22-06-41.png)',`groups`='Java',`is_show`=1,`publish`=1,`summary`=''  WHERE  `id` = 247 [ RunTime:0.001182s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Java' LIMIT 1 [ RunTime:0.001304s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=19  WHERE  `groups` = 'Java' [ RunTime:0.000367s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Java' LIMIT 1 [ RunTime:0.001061s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=19  WHERE  `groups` = 'Java' [ RunTime:0.000359s ]
---------------------------------------------------------------
[ 2018-11-17T22:01:13+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/247.html
[ info ] qingrang.top/daily/admin/note/shownote/id/247.html [运行时间：0.092949s][吞吐率：10.76req/s] [内存消耗：2,018.42kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/247.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=o6ks3fkf36d7gbp7k617en7d14',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '247',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000445s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001273s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 247 LIMIT 1 [ RunTime:0.000511s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000843s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000299s ]
---------------------------------------------------------------
[ 2018-11-17T22:26:56+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/247.html
[ info ] qingrang.top/daily/admin/note/shownote/id/247.html [运行时间：0.063078s][吞吐率：15.85req/s] [内存消耗：2,018.42kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/247.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=o6ks3fkf36d7gbp7k617en7d14',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '247',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.001155s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.002443s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 247 LIMIT 1 [ RunTime:0.000918s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001191s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000293s ]
---------------------------------------------------------------
[ 2018-11-17T22:28:18+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/login/index.html
[ info ] qingrang.top/daily/admin/login/index.html [运行时间：0.038112s][吞吐率：26.24req/s] [内存消耗：1,339.90kb] [文件加载：47]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'login',
    2 => 'index',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ RUN ] app\admin\controller\Login->index[ /var/www/html/daily/application/admin/controller/Login.php ]
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/login/index.html [ array (
) ]
[ info ] [ LOG ] INIT File
---------------------------------------------------------------
[ 2018-11-17T22:28:30+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/login/index.html
[ info ] qingrang.top/daily/admin/login/index.html [运行时间：0.061013s][吞吐率：16.39req/s] [内存消耗：1,922.41kb] [文件加载：54]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'login',
    2 => 'index',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '8',
  'cache-control' => 'max-age=0',
  'origin' => 'http://qingrang.top',
  'upgrade-insecure-requests' => '1',
  'content-type' => 'application/x-www-form-urlencoded',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/login/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'pwd' => 'shao',
)
[ info ] [ RUN ] app\admin\controller\Login->index[ /var/www/html/daily/application/admin/controller/Login.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000823s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `admin` [ RunTime:0.001354s ]
[ sql ] [ SQL ] SELECT * FROM `admin` WHERE  `id` = 1 LIMIT 1 [ RunTime:0.000438s ]
---------------------------------------------------------------
[ 2018-11-17T22:28:31+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note
[ info ] qingrang.top/daily/admin/note [运行时间：0.081336s][吞吐率：12.29req/s] [内存消耗：2,267.98kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/login/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->notelst[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/notelst.html [ array (
  0 => 'stickList',
  1 => 'hide',
  2 => 'list',
  3 => 'list_new',
  4 => 'groups',
  5 => 'groups0',
  6 => 'groups1',
  7 => 'groups2',
  8 => 'count',
  9 => 'year',
  10 => 'default_num',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000634s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001370s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Personal'  AND `is_show` = 1 ORDER BY date desc,id desc [ RunTime:0.002579s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Personal' ORDER BY id desc LIMIT 5 [ RunTime:0.000642s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `config` [ RunTime:0.000945s ]
[ sql ] [ SQL ] SELECT * FROM `config` WHERE  `name` = 'hide' LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` < 5 [ RunTime:0.000517s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001026s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 0  AND `id` <> 2 ORDER BY `groups` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `parent_id` = 1 [ RunTime:0.000464s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 2 ORDER BY `groups` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Default' LIMIT 1 [ RunTime:0.001437s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `yearlist` [ RunTime:0.001241s ]
[ sql ] [ SQL ] SELECT DISTINCT  `year` FROM `yearlist` ORDER BY year desc [ RunTime:0.000802s ]
---------------------------------------------------------------
[ 2018-11-17T22:28:41+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/247.html
[ info ] qingrang.top/daily/admin/note/shownote/id/247.html [运行时间：0.064695s][吞吐率：15.46req/s] [内存消耗：2,018.32kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '247',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000610s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.002151s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 247 LIMIT 1 [ RunTime:0.000827s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001089s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000333s ]
---------------------------------------------------------------
[ 2018-11-17T22:30:23+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/newedit.html
[ info ] qingrang.top/daily/admin/note/newedit.html [运行时间：0.060622s][吞吐率：16.50req/s] [内存消耗：2,020.94kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'newedit',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->newEdit[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/newedit.html [ array (
  0 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000572s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001637s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000421s ]
---------------------------------------------------------------
[ 2018-11-17T22:30:47+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/addnote.html
[ info ] qingrang.top/daily/admin/note/addnote.html [运行时间：0.163226s][吞吐率：6.13req/s] [内存消耗：1,996.99kb] [文件加载：58]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'addnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '536',
  'cache-control' => 'max-age=0',
  'origin' => 'http://qingrang.top',
  'upgrade-insecure-requests' => '1',
  'content-type' => 'application/x-www-form-urlencoded',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/newedit.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'groups' => '',
  'content' => '# 读《阿里巴巴 Java 开发手册》
',
  'test-editormd-html-code' => '<h1 id="h1--java-"><a name="读《阿里巴巴 Java 开发手册》" class="reference-link"></a><span class="header-link octicon octicon-link"></span>读《阿里巴巴 Java 开发手册》</h1>',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->addNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000833s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001913s ]
[ sql ] [ SQL ] SELECT `parent_id` FROM `groups` WHERE  `groups` = '' LIMIT 1 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `id` IS NULL LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SELECT `id` FROM `groups` WHERE  `groups` = '' LIMIT 1 [ RunTime:0.000425s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001876s ]
[ error ] [10501]SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'p_id' cannot be null[/var/www/html/daily/thinkphp/library/think/db/Connection.php:451]
---------------------------------------------------------------
[ 2018-11-17T22:30:50+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/newedit.html
[ info ] qingrang.top/daily/admin/note/newedit.html [运行时间：0.058799s][吞吐率：17.01req/s] [内存消耗：2,020.94kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'newedit',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->newEdit[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/newedit.html [ array (
  0 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000530s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001806s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000327s ]
---------------------------------------------------------------
[ 2018-11-17T22:30:57+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/addnote.html
[ info ] qingrang.top/daily/admin/note/addnote.html [运行时间：0.061279s][吞吐率：16.32req/s] [内存消耗：1,976.63kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'addnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '540',
  'cache-control' => 'max-age=0',
  'origin' => 'http://qingrang.top',
  'upgrade-insecure-requests' => '1',
  'content-type' => 'application/x-www-form-urlencoded',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/newedit.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'groups' => 'Java',
  'content' => '# 读《阿里巴巴 Java 开发手册》
',
  'test-editormd-html-code' => '<h1 id="h1--java-"><a name="读《阿里巴巴 Java 开发手册》" class="reference-link"></a><span class="header-link octicon octicon-link"></span>读《阿里巴巴 Java 开发手册》</h1>',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->addNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000647s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001490s ]
[ sql ] [ SQL ] SELECT `parent_id` FROM `groups` WHERE  `groups` = 'Java' LIMIT 1 [ RunTime:0.000412s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `id` = 2 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001029s ]
[ sql ] [ SQL ] INSERT INTO `note` (`title` , `content` , `groups` , `p_id` , `date`) VALUES ('读《阿里巴巴 Java 开发手册》\r' , '# 读《阿里巴巴 Java 开发手册》\r\n' , 'Java' , 2 , '2018-11-17') [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Java' LIMIT 1 [ RunTime:0.001139s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=20  WHERE  `groups` = 'Java' [ RunTime:0.000463s ]
---------------------------------------------------------------
[ 2018-11-17T22:30:57+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note
[ info ] qingrang.top/daily/admin/note [运行时间：0.069168s][吞吐率：14.46req/s] [内存消耗：2,262.91kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/newedit.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->notelst[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/notelst.html [ array (
  0 => 'stickList',
  1 => 'hide',
  2 => 'list',
  3 => 'list_new',
  4 => 'groups',
  5 => 'groups0',
  6 => 'groups1',
  7 => 'groups2',
  8 => 'count',
  9 => 'year',
  10 => 'default_num',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000479s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001286s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Personal'  AND `is_show` = 1 ORDER BY date desc,id desc [ RunTime:0.001839s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `groups` <> 'Personal' ORDER BY id desc LIMIT 5 [ RunTime:0.000579s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `config` [ RunTime:0.000959s ]
[ sql ] [ SQL ] SELECT * FROM `config` WHERE  `name` = 'hide' LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` < 5 [ RunTime:0.000525s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000878s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 0  AND `id` <> 2 ORDER BY `groups` [ RunTime:0.000379s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `parent_id` = 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SELECT * FROM `groups` WHERE  `parent_id` = 2 ORDER BY `groups` [ RunTime:0.000378s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Default' LIMIT 1 [ RunTime:0.000984s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `yearlist` [ RunTime:0.001215s ]
[ sql ] [ SQL ] SELECT DISTINCT  `year` FROM `yearlist` ORDER BY year desc [ RunTime:0.000672s ]
---------------------------------------------------------------
[ 2018-11-17T22:31:04+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/249.html
[ info ] qingrang.top/daily/admin/note/editnote/id/249.html [运行时间：0.050427s][吞吐率：19.83req/s] [内存消耗：2,028.04kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000505s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001471s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000474s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000854s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000386s ]
---------------------------------------------------------------
[ 2018-11-17T22:35:25+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/savenote.html
[ info ] qingrang.top/daily/admin/note/savenote.html [运行时间：0.082852s][吞吐率：12.07req/s] [内存消耗：2,023.11kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'savenote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '535',
  'accept' => 'text/plain, */*; q=0.01',
  'origin' => 'http://qingrang.top',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/249.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'ogroup' => 'Default',
  'context' => '# 读《阿里巴巴 Java 开发手册》
## 命名
### 抽象类：Abstract 开头
### 异常类：Exception 结尾
### 测试类：Test 结尾
### POJO 类中布尔类型的变量，都不要加 is
',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->saveNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000785s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.002020s ]
[ sql ] [ SQL ] UPDATE `note`  SET `title`='读《阿里巴巴 Java 开发手册》',`content`='# 读《阿里巴巴 Java 开发手册》\n## 命名\n### 抽象类：Abstract 开头\n### 异常类：Exception 结尾\n### 测试类：Test 结尾\n### POJO 类中布尔类型的变量，都不要加 is\n',`groups`='Default',`p_id`=1  WHERE  `id` = 1 [ RunTime:0.000718s ]
---------------------------------------------------------------
[ 2018-11-17T22:35:31+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/249.html
[ info ] qingrang.top/daily/admin/note/editnote/id/249.html [运行时间：0.063585s][吞吐率：15.73req/s] [内存消耗：2,028.29kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000552s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001410s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000414s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001474s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000399s ]
---------------------------------------------------------------
[ 2018-11-17T22:38:00+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/249.html
[ info ] qingrang.top/daily/admin/note/editnote/id/249.html [运行时间：0.051440s][吞吐率：19.44req/s] [内存消耗：2,028.29kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000539s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001473s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000401s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000837s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000292s ]
---------------------------------------------------------------
[ 2018-11-17T22:39:35+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/249.html
[ info ] qingrang.top/daily/admin/note/editnote/id/249.html [运行时间：0.058526s][吞吐率：17.09req/s] [内存消耗：2,028.29kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000557s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001556s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000423s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001193s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000324s ]
---------------------------------------------------------------
[ 2018-11-17T22:39:46+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/249.html
[ info ] qingrang.top/daily/admin/note/editnote/id/249.html [运行时间：0.054984s][吞吐率：18.19req/s] [内存消耗：2,028.29kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000543s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001332s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000569s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001303s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000330s ]
---------------------------------------------------------------
[ 2018-11-17T22:39:58+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/249.html
[ info ] qingrang.top/daily/admin/note/editnote/id/249.html [运行时间：0.059085s][吞吐率：16.92req/s] [内存消耗：2,028.29kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000680s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001593s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000422s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000935s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000302s ]
---------------------------------------------------------------
[ 2018-11-17T22:40:16+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/249.html
[ info ] qingrang.top/daily/admin/note/editnote/id/249.html [运行时间：0.059784s][吞吐率：16.73req/s] [内存消耗：2,028.29kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000577s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001271s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000371s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000886s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000326s ]
---------------------------------------------------------------
[ 2018-11-17T22:45:07+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/updatenote/id/249.html
[ info ] qingrang.top/daily/admin/note/updatenote/id/249.html [运行时间：0.059040s][吞吐率：16.94req/s] [内存消耗：2,057.44kb] [文件加载：58]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'updatenote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '3678',
  'cache-control' => 'max-age=0',
  'origin' => 'http://qingrang.top',
  'upgrade-insecure-requests' => '1',
  'content-type' => 'application/x-www-form-urlencoded',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/249.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'summary' => '',
  'content' => '# 读《阿里巴巴 Java 开发手册》
## 命名
1. 各层命名规约：
	- Service/DAO 层方法命名规约
		- 获取单个对象的方法用 get 做前缀。
		- 获取多个对象的方法用 list 做前缀。
		- 获取统计值的方法用 count 做前缀。
		- 插入的方法用 insert 做前缀。
		- 删除的方法用 delete 做前缀。
		- 修改的方法用 update 做前缀。
	- 领域模型命名规约**(??? 这是什么)**
		- 数据对象： xxxDO， xxx 即为数据表名。
		- 数据传输对象： xxxDTO， xxx 为业务领域相关的名称。
		- 展示对象： xxxVO， xxx 一般为网页名称。
		- POJO 是 DO/DTO/BO/VO 的统称，禁止命名成 xxxPOJO。
1. 抽象类：Abstract 开头
1. 异常类：Exception 结尾
1. 测试类：Test 结尾
1. POJO 类中布尔类型的变量，都不要加 is
1. 包名
包名统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。包名统一使用单数形式，但是类名如果有复数含义，类名可以使用复数形式
1. 如果模块、 接口、类、方法使用了设计模式，在命名时体现出具体模式。
eg：`public class LoginProxy;`
1. 接口类中的方法和属性不要加任何修饰符号
1. 枚举类名带上 Enum 后缀，枚举成员名称需要全大写，单词间用下划线隔开

',
  'groups' => 'Java',
  'showsel' => '1',
  'showse2' => '1',
  'id' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->updateNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000563s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001563s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000417s ]
[ sql ] [ SQL ] SELECT `groups` FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000861s ]
[ sql ] [ SQL ] SELECT `parent_id` FROM `groups` WHERE  `groups` = 'Java' LIMIT 1 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `id` = 2 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] UPDATE `note`  SET `id`=249,`p_id`=2,`title`='读《阿里巴巴 Java 开发手册》\r',`content`='# 读《阿里巴巴 Java 开发手册》\r\n## 命名\r\n1. 各层命名规约：\r\n	- Service/DAO 层方法命名规约\r\n		- 获取单个对象的方法用 get 做前缀。\r\n		- 获取多个对象的方法用 list 做前缀。\r\n		- 获取统计值的方法用 count 做前缀。\r\n		- 插入的方法用 insert 做前缀。\r\n		- 删除的方法用 delete 做前缀。\r\n		- 修改的方法用 update 做前缀。\r\n	- 领域模型命名规约**(??? 这是什么)**\r\n		- 数据对象： xxxDO， xxx 即为数据表名。\r\n		- 数据传输对象： xxxDTO， xxx 为业务领域相关的名称。\r\n		- 展示对象： xxxVO， xxx 一般为网页名称。\r\n		- POJO 是 DO/DTO/BO/VO 的统称，禁止命名成 xxxPOJO。\r\n1. 抽象类：Abstract 开头\r\n1. 异常类：Exception 结尾\r\n1. 测试类：Test 结尾\r\n1. POJO 类中布尔类型的变量，都不要加 is\r\n1. 包名\r\n包名统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。包名统一使用单数形式，但是类名如果有复数含义，类名可以使用复数形式\r\n1. 如果模块、 接口、类、方法使用了设计模式，在命名时体现出具体模式。\r\neg：`public class LoginProxy;`\r\n1. 接口类中的方法和属性不要加任何修饰符号\r\n1. 枚举类名带上 Enum 后缀，枚举成员名称需要全大写，单词间用下划线隔开\r\n\r\n',`groups`='Java',`is_show`=1,`publish`=1,`summary`=''  WHERE  `id` = 249 [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Java' LIMIT 1 [ RunTime:0.001204s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=20  WHERE  `groups` = 'Java' [ RunTime:0.000333s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Java' LIMIT 1 [ RunTime:0.000924s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=20  WHERE  `groups` = 'Java' [ RunTime:0.000350s ]
---------------------------------------------------------------
[ 2018-11-17T22:45:08+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/249.html
[ info ] qingrang.top/daily/admin/note/shownote/id/249.html [运行时间：0.078048s][吞吐率：12.81req/s] [内存消耗：1,981.15kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/249.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000665s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001871s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000539s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001377s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000389s ]
---------------------------------------------------------------
[ 2018-11-17T22:45:28+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/249.html
[ info ] qingrang.top/daily/admin/note/editnote/id/249.html [运行时间：0.060543s][吞吐率：16.52req/s] [内存消耗：2,028.82kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000532s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001407s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000441s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001186s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000464s ]
---------------------------------------------------------------
[ 2018-11-17T22:45:48+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/updatenote/id/249.html
[ info ] qingrang.top/daily/admin/note/updatenote/id/249.html [运行时间：0.073506s][吞吐率：13.60req/s] [内存消耗：2,057.69kb] [文件加载：58]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'updatenote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '3743',
  'cache-control' => 'max-age=0',
  'origin' => 'http://qingrang.top',
  'upgrade-insecure-requests' => '1',
  'content-type' => 'application/x-www-form-urlencoded',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/249.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'summary' => '',
  'content' => '# 读《阿里巴巴 Java 开发手册》
## 命名
1. 各层命名规约：
	- Service/DAO 层方法命名规约
		- 获取单个对象的方法用 get 做前缀。
		- 获取多个对象的方法用 list 做前缀。
		- 获取统计值的方法用 count 做前缀。
		- 插入的方法用 insert 做前缀。
		- 删除的方法用 delete 做前缀。
		- 修改的方法用 update 做前缀。
	- 领域模型命名规约**(??? 这是什么)**
		- 数据对象： xxxDO， xxx 即为数据表名。
		- 数据传输对象： xxxDTO， xxx 为业务领域相关的名称。
		- 展示对象： xxxVO， xxx 一般为网页名称。
		- POJO 是 DO/DTO/BO/VO 的统称，禁止命名成 xxxPOJO。
1. 抽象类：Abstract 开头
1. 异常类：Exception 结尾
1. 测试类：Test 结尾
1. 接口类：I 开头
1. POJO 类中布尔类型的变量，都不要加 is
1. 包名
包名统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。包名统一使用单数形式，但是类名如果有复数含义，类名可以使用复数形式
1. 如果模块、 接口、类、方法使用了设计模式，在命名时体现出具体模式。
eg：`public class LoginProxy;`
1. 接口类中的方法和属性不要加任何修饰符号
1. 枚举类名带上 Enum 后缀，枚举成员名称需要全大写，单词间用下划线隔开

',
  'groups' => 'Java',
  'showsel' => '1',
  'showse2' => '1',
  'id' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->updateNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000583s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001372s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000460s ]
[ sql ] [ SQL ] SELECT `groups` FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000404s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001310s ]
[ sql ] [ SQL ] SELECT `parent_id` FROM `groups` WHERE  `groups` = 'Java' LIMIT 1 [ RunTime:0.000372s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `id` = 2 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] UPDATE `note`  SET `id`=249,`p_id`=2,`title`='读《阿里巴巴 Java 开发手册》\r',`content`='# 读《阿里巴巴 Java 开发手册》\r\n## 命名\r\n1. 各层命名规约：\r\n	- Service/DAO 层方法命名规约\r\n		- 获取单个对象的方法用 get 做前缀。\r\n		- 获取多个对象的方法用 list 做前缀。\r\n		- 获取统计值的方法用 count 做前缀。\r\n		- 插入的方法用 insert 做前缀。\r\n		- 删除的方法用 delete 做前缀。\r\n		- 修改的方法用 update 做前缀。\r\n	- 领域模型命名规约**(??? 这是什么)**\r\n		- 数据对象： xxxDO， xxx 即为数据表名。\r\n		- 数据传输对象： xxxDTO， xxx 为业务领域相关的名称。\r\n		- 展示对象： xxxVO， xxx 一般为网页名称。\r\n		- POJO 是 DO/DTO/BO/VO 的统称，禁止命名成 xxxPOJO。\r\n1. 抽象类：Abstract 开头\r\n1. 异常类：Exception 结尾\r\n1. 测试类：Test 结尾\r\n1. 接口类：I 开头\r\n1. POJO 类中布尔类型的变量，都不要加 is\r\n1. 包名\r\n包名统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。包名统一使用单数形式，但是类名如果有复数含义，类名可以使用复数形式\r\n1. 如果模块、 接口、类、方法使用了设计模式，在命名时体现出具体模式。\r\neg：`public class LoginProxy;`\r\n1. 接口类中的方法和属性不要加任何修饰符号\r\n1. 枚举类名带上 Enum 后缀，枚举成员名称需要全大写，单词间用下划线隔开\r\n\r\n',`groups`='Java',`is_show`=1,`publish`=1,`summary`=''  WHERE  `id` = 249 [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Java' LIMIT 1 [ RunTime:0.001396s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=20  WHERE  `groups` = 'Java' [ RunTime:0.000451s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Java' LIMIT 1 [ RunTime:0.000914s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=20  WHERE  `groups` = 'Java' [ RunTime:0.000310s ]
---------------------------------------------------------------
[ 2018-11-17T22:45:49+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/249.html
[ info ] qingrang.top/daily/admin/note/shownote/id/249.html [运行时间：0.056480s][吞吐率：17.71req/s] [内存消耗：1,981.17kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/249.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000616s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001304s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000419s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001008s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000336s ]
---------------------------------------------------------------
[ 2018-11-17T22:46:53+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/editnote/id/249.html
[ info ] qingrang.top/daily/admin/note/editnote/id/249.html [运行时间：0.079270s][吞吐率：12.62req/s] [内存消耗：2,028.84kb] [文件加载：56]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'editnote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->editNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/editnote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000640s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001820s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000503s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001272s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000363s ]
---------------------------------------------------------------
[ 2018-11-17T22:47:21+08:00 ] 74.120.168.12 74.120.168.12 POST /daily/admin/note/updatenote/id/249.html
[ info ] qingrang.top/daily/admin/note/updatenote/id/249.html [运行时间：0.066952s][吞吐率：14.94req/s] [内存消耗：2,058.18kb] [文件加载：58]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'updatenote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'content-length' => '3933',
  'cache-control' => 'max-age=0',
  'origin' => 'http://qingrang.top',
  'upgrade-insecure-requests' => '1',
  'content-type' => 'application/x-www-form-urlencoded',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/249.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'summary' => '向大佬学习，规范代码，码出高效， 码出质量。',
  'content' => '# 读《阿里巴巴 Java 开发手册》
## 命名
1. 各层命名规约：
	- Service/DAO 层方法命名规约
		- 获取单个对象的方法用 get 做前缀。
		- 获取多个对象的方法用 list 做前缀。
		- 获取统计值的方法用 count 做前缀。
		- 插入的方法用 insert 做前缀。
		- 删除的方法用 delete 做前缀。
		- 修改的方法用 update 做前缀。
	- 领域模型命名规约**(??? 这是什么)**
		- 数据对象： xxxDO， xxx 即为数据表名。
		- 数据传输对象： xxxDTO， xxx 为业务领域相关的名称。
		- 展示对象： xxxVO， xxx 一般为网页名称。
		- POJO 是 DO/DTO/BO/VO 的统称，禁止命名成 xxxPOJO。
1. 抽象类：Abstract 开头
1. 异常类：Exception 结尾
1. 测试类：Test 结尾
1. 接口类：I 开头
1. POJO 类中布尔类型的变量，都不要加 is
1. 包名
包名统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。包名统一使用单数形式，但是类名如果有复数含义，类名可以使用复数形式
1. 如果模块、 接口、类、方法使用了设计模式，在命名时体现出具体模式。
eg：`public class LoginProxy;`
1. 接口类中的方法和属性不要加任何修饰符号
1. 枚举类名带上 Enum 后缀，枚举成员名称需要全大写，单词间用下划线隔开

',
  'groups' => 'Java',
  'showsel' => '1',
  'showse2' => '1',
  'id' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->updateNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000460s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001333s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT `groups` FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.000871s ]
[ sql ] [ SQL ] SELECT `parent_id` FROM `groups` WHERE  `groups` = 'Java' LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SELECT `groups` FROM `groups` WHERE  `id` = 2 LIMIT 1 [ RunTime:0.000434s ]
[ sql ] [ SQL ] UPDATE `note`  SET `id`=249,`p_id`=2,`title`='读《阿里巴巴 Java 开发手册》\r',`content`='# 读《阿里巴巴 Java 开发手册》\r\n## 命名\r\n1. 各层命名规约：\r\n	- Service/DAO 层方法命名规约\r\n		- 获取单个对象的方法用 get 做前缀。\r\n		- 获取多个对象的方法用 list 做前缀。\r\n		- 获取统计值的方法用 count 做前缀。\r\n		- 插入的方法用 insert 做前缀。\r\n		- 删除的方法用 delete 做前缀。\r\n		- 修改的方法用 update 做前缀。\r\n	- 领域模型命名规约**(??? 这是什么)**\r\n		- 数据对象： xxxDO， xxx 即为数据表名。\r\n		- 数据传输对象： xxxDTO， xxx 为业务领域相关的名称。\r\n		- 展示对象： xxxVO， xxx 一般为网页名称。\r\n		- POJO 是 DO/DTO/BO/VO 的统称，禁止命名成 xxxPOJO。\r\n1. 抽象类：Abstract 开头\r\n1. 异常类：Exception 结尾\r\n1. 测试类：Test 结尾\r\n1. 接口类：I 开头\r\n1. POJO 类中布尔类型的变量，都不要加 is\r\n1. 包名\r\n包名统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。包名统一使用单数形式，但是类名如果有复数含义，类名可以使用复数形式\r\n1. 如果模块、 接口、类、方法使用了设计模式，在命名时体现出具体模式。\r\neg：`public class LoginProxy;`\r\n1. 接口类中的方法和属性不要加任何修饰符号\r\n1. 枚举类名带上 Enum 后缀，枚举成员名称需要全大写，单词间用下划线隔开\r\n\r\n',`groups`='Java',`is_show`=1,`publish`=1,`summary`='向大佬学习，规范代码，码出高效， 码出质量。'  WHERE  `id` = 249 [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Java' LIMIT 1 [ RunTime:0.001309s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=20  WHERE  `groups` = 'Java' [ RunTime:0.000441s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `note` WHERE  `groups` = 'Java' LIMIT 1 [ RunTime:0.000898s ]
[ sql ] [ SQL ] UPDATE `groups`  SET `g_count`=20  WHERE  `groups` = 'Java' [ RunTime:0.000408s ]
---------------------------------------------------------------
[ 2018-11-17T22:47:22+08:00 ] 74.120.168.12 74.120.168.12 GET /daily/admin/note/shownote/id/249.html
[ info ] qingrang.top/daily/admin/note/shownote/id/249.html [运行时间：0.054336s][吞吐率：18.40req/s] [内存消耗：1,981.23kb] [文件加载：55]
[ info ] [ LANG ] /var/www/html/daily/thinkphp/lang/zh-cn.php
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'note',
    2 => 'shownote',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'qingrang.top',
  'cache-control' => 'max-age=0',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://qingrang.top/daily/admin/note/editnote/id/249.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9,la;q=0.8,en;q=0.7,lb;q=0.6',
  'cookie' => 'Hm_lvt_1769181352e9adc950166aada465644e=1541082864,1541122974,1541171416,1542098176; PHPSESSID=vh2rftp73hr5b5c162pbdbgna0',
  'connection' => 'close',
)
[ info ] [ PARAM ] array (
  'id' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ RUN ] app\admin\controller\Note->showNote[ /var/www/html/daily/application/admin/controller/Note.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /var/www/html/daily/application/admin/view/note/shownote.html [ array (
  0 => 'note',
  1 => 'groups',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.001026s ] mysql:host=74.120.168.12;dbname=diary;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `note` [ RunTime:0.001179s ]
[ sql ] [ SQL ] SELECT * FROM `note` WHERE  `id` = 249 LIMIT 1 [ RunTime:0.000397s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `groups` [ RunTime:0.001192s ]
[ sql ] [ SQL ] SELECT * FROM `groups` [ RunTime:0.000276s ]
